1ï¸âƒ£ CÃ­l a princip

MÃ­t speciÃ¡lnÃ­ administraÄnÃ­ strÃ¡nku pro prÃ¡ci s hrÃ¡Äi:

pÅ™ehled vÅ¡ech hrÃ¡ÄÅ¯ v systÃ©mu (ne jen â€moji hrÃ¡Äiâ€œ),

schvalovÃ¡nÃ­ (APPROVE / REJECT),

CRUD operace (vytvoÅ™it, upravit, smazat),

zmÄ›na pÅ™iÅ™azenÃ©ho uÅ¾ivatele.

StrÃ¡nka bude dostupnÃ¡ pro:

ADMIN â€“ plnÃ¡ prÃ¡va.

MANAGER â€“ omezenÄ›jÅ¡Ã­ prÃ¡va (podle toho, co dovolÃ­ backend).

ZÅ¯stane zachovÃ¡no:

/players (MyPlayers) â€“ strÃ¡nka pro bÄ›Å¾nÃ©ho uÅ¾ivatele a vÃ½bÄ›r currentPlayer,

/matches, registrace atd. beze zmÄ›ny.

2ï¸âƒ£ MapovÃ¡nÃ­ backend endpointÅ¯ â†’ akce na FE

Z PlayerControlleru:

ADMIN / MANAGER spoleÄnÃ©:

GET /api/players

FE: naÄte globÃ¡lnÃ­ seznam hrÃ¡ÄÅ¯ pro admin strÃ¡nku.

GET /api/players/{id}

FE: zobrazÃ­ detail hrÃ¡Äe (napÅ™. v modÃ¡lu / detailnÃ­ strÃ¡nce).

POST /api/players

FE: formulÃ¡Å™ â€VytvoÅ™it hrÃ¡Äe (globÃ¡lnÄ›)â€œ â€“ typicky pro ADMIN/MANAGER, kdyÅ¾ zaklÃ¡dajÃ­ hrÃ¡Äe do systÃ©mu (ne jen â€pro sebeâ€œ).

Jen ADMIN:

PUT /api/players/{id}

FE: tlaÄÃ­tko â€Upravitâ€œ, kterÃ© otevÅ™e formulÃ¡Å™ s daty a uloÅ¾Ã­ zmÄ›ny.

DELETE /api/players/{id}

FE: tlaÄÃ­tko â€Smazatâ€œ (s confirm dialogem).

PUT /api/players/{id}/approve

FE: tlaÄÃ­tko â€SchvÃ¡litâ€œ.

PUT /api/players/{id}/reject

FE: tlaÄÃ­tko â€ZamÃ­tnoutâ€œ.

POST /api/players/{playerId}/change-user

FE: akce â€ZmÄ›nit uÅ¾ivateleâ€œ â€“ otevÅ™e modÃ¡l, kde zadÃ¡Å¡/ vybereÅ¡ novÃ©ho uÅ¾ivatele.

USER /me ÄÃ¡st nechÃ¡vÃ¡me tak, jak je:

POST /api/players/me â€“ vytvoÅ™enÃ­ hrÃ¡Äe pro pÅ™ihlÃ¡Å¡enÃ©ho usera (uÅ¾ existuje v tvÃ©m playerApi.js). 

api

GET /api/players/me â€“ seznam â€mÃ½châ€œ hrÃ¡ÄÅ¯ (uÅ¾ pouÅ¾Ã­vÃ¡Å¡ v usePlayers). 

hooks

PUT /api/players/me â€“ update aktuÃ¡lnÃ­ho hrÃ¡Äe (pÅ™es CurrentPlayerService na backendu â€“ to Å™eÅ¡Ã­Å¡ v jinÃ© ÄÃ¡sti).

3ï¸âƒ£ API vrstva na FE â€“ jakÃ© funkce pÅ™idat

Do src/api/playerApi.js bych doplnil vedle stÃ¡vajÃ­cÃ­ch â€/meâ€œ funkcÃ­ i admin/global funkce:

ÄŒtenÃ­:

getAllPlayersAdmin() â†’ volÃ¡ GET /players

getPlayerByIdAdmin(id) â†’ GET /players/{id}

VytvÃ¡Å™enÃ­:

createPlayerForMe(data) â†’ stÃ¡vajÃ­cÃ­ /players/me (pÅ™ejmenovÃ¡nÃ­ pouze v kÃ³du, aby bylo jasnÃ©).

createPlayerAdmin(data) â†’ novÃ© POST /players (role ADMIN/MANAGER).

Update:

updatePlayerAdmin(id, data) â†’ PUT /players/{id}

MazÃ¡nÃ­:

deletePlayerAdmin(id) â†’ DELETE /players/{id}

SchvalovÃ¡nÃ­:

approvePlayerAdmin(id) â†’ PUT /players/{id}/approve

rejectPlayerAdmin(id) â†’ PUT /players/{id}/reject

ZmÄ›na uÅ¾ivatele:

changePlayerUserAdmin(playerId, newUserId) â†’ POST /players/{playerId}/change-user

Architektonicky: â€/meâ€œ funkce ponechÃ¡Å¡ pro bÄ›Å¾nÃ©ho usera, admin/global funkce majÃ­ v nÃ¡zvu â€Adminâ€œ, aby bylo vÅ¾dy jasnÃ©, Å¾e jsou pro admin strÃ¡nku.

4ï¸âƒ£ Hooky / logickÃ¡ vrstva pro admin strÃ¡nku

Do src/hooks:

useAllPlayersAdmin

OdpovÄ›dnost:

naÄÃ­st vÅ¡echny hrÃ¡Äe (getAllPlayersAdmin),

drÅ¾et players, loading, error,

umÄ›t reload() po akcÃ­ch (approve/reject/update/delete).

AlternativnÄ›: pÅ™idat i podporu filtrÅ¯ (status, tÃ½m, textovÃ© hledÃ¡nÃ­) â€“ Å™eÅ¡it uÅ¾ jen v hooku a do UI posÃ­lat vyfiltrovanÃ½ seznam.

usePlayerDetailAdmin(playerId)

pro detail/modÃ¡l â€“ GET /players/{id},

nemusÃ­ bÃ½t nutnÃ© hned na zaÄÃ¡tku, mÅ¯Å¾eÅ¡ detail dÄ›lat jednoduÅ¡e tak, Å¾e jen najdeÅ¡ hrÃ¡Äe v seznamu + pÅ™Ã­padnÄ› si dotÃ¡hneÅ¡ detail on-demand.

(VolitelnÃ©) usePlayerAdminActions

spoleÄnÃ¡ logika pro:

approve(id)

reject(id)

delete(id)

update(id, data)

changeUser(playerId, newUserId)

postarÃ¡ se o:

volÃ¡nÃ­ API,

zachycenÃ­ chyb,

volÃ¡nÃ­ reload() z useAllPlayersAdmin,

zobrazenÃ­ notifikace (pÅ™es tvÅ¯j NotificationContext, pokud chceÅ¡).

5ï¸âƒ£ NovÃ¡ strÃ¡nka pro ADMIN/MANAGER
5.1 NÃ¡zev a umÃ­stÄ›nÃ­

Soubor: src/pages/AdminPlayersPage.jsx (nebo PlayersAdminPage.jsx).

Route: napÅ™Ã­klad /admin/players.

5.2 OdpovÄ›dnost strÃ¡nky

Zajistit kompletnÃ­ view pro globÃ¡lnÃ­ sprÃ¡vu hrÃ¡ÄÅ¯:

nahoÅ™e toolbar (filtry, tlaÄÃ­tko â€VytvoÅ™it hrÃ¡Äeâ€œ),

pod tÃ­m tabulka/karty vÅ¡ech hrÃ¡ÄÅ¯,

v kaÅ¾dÃ©m Å™Ã¡dku akÄnÃ­ tlaÄÃ­tka podle role a statusu,

modÃ¡ly pro:

potvrzenÃ­ smazÃ¡nÃ­,

editaci hrÃ¡Äe,

zmÄ›nu uÅ¾ivatele.

UvnitÅ™ strÃ¡nky se pouÅ¾ije:

useAllPlayersAdmin() â€“ data,

usePlayerAdminActions() â€“ mutate akce.

6ï¸âƒ£ Role a tlaÄÃ­tka â€“ kdo co vidÃ­ a kdy
6.1 RozdÄ›lenÃ­ podle role (dnes podle backendu)

ADMIN

vidÃ­:

seznam vÅ¡ech hrÃ¡ÄÅ¯,

tlaÄÃ­tko â€VytvoÅ™it hrÃ¡Äeâ€œ (globÃ¡lnÄ›),

u kaÅ¾dÃ©ho hrÃ¡Äe:

SchvÃ¡lit (APPROVE) â€“ pokud status dovoluje,

ZamÃ­tnout (REJECT) â€“ pokud status dovoluje,

Upravit (update),

Smazat,

ZmÄ›nit uÅ¾ivatele.

MANAGER

podle aktuÃ¡lnÃ­ho PlayerControlleru:

mÅ¯Å¾e GET /players, GET /players/{id}, POST /players (create),

ale nemÅ¯Å¾e PUT /{id}, DELETE /{id}, approve/reject, change-user (ty jsou jen hasRole('ADMIN')).

FE teda:

zobrazÃ­:

seznam vÅ¡ech hrÃ¡ÄÅ¯,

tlaÄÃ­tko â€VytvoÅ™it hrÃ¡Äeâ€œ (globÃ¡lnÃ­ create).

nezobrazÃ­:

Approve/Reject,

Upravit,

Smazat,

ZmÄ›nit uÅ¾ivatele.

Pokud do budoucna chceÅ¡, aby MANAGER mohl schvalovat:

na backendu zmÄ›nit @PreAuthorize u approve/reject (pÅ™Ã­padnÄ› dalÅ¡Ã­ch) na hasRole('ADMIN') or hasRole('MANAGER'),

na FE jen rozÅ¡Ã­Å™Ã­Å¡ podmÃ­nky pro zobrazenÃ­ tlaÄÃ­tek.

6.2 RozdÄ›lenÃ­ podle statusu hrÃ¡Äe

Bez ohledu na roli (pro ty, kdo akci mohou):

Pro ADMINA:

Status	TlaÄÃ­tko APPROVE	TlaÄÃ­tko REJECT	PoznÃ¡mka
PENDING	zobrazit	zobrazit	klasickÃ© schvalovÃ¡nÃ­
APPROVED	skryt / disabled	zobrazit	dÃ¡vÃ¡ smysl jen â€ZamÃ­tnoutâ€œ
REJECTED	zobrazit	skryt / disabled	dÃ¡vÃ¡ smysl jen â€SchvÃ¡lit zpÄ›tnÄ›â€œ

Pro MANAGERA dnes â€“ Å¾Ã¡dnÃ¡ z tÄ›chto akcÃ­, dokud nerozÅ¡Ã­Å™Ã­Å¡ backend.

7ï¸âƒ£ Komponenty UI pro admin strÃ¡nku

RozdÄ›lenÃ­ do menÅ¡Ã­ch kouskÅ¯, aby byl frontend pÅ™ehlednÃ½:

AdminPlayersToolbar

Filtry:

drop-down na status (VÅ¡ichni / PENDING / APPROVED / REJECTED),

textovÃ© hledÃ¡nÃ­ podle jmÃ©na/emailu.

TlaÄÃ­tko:

â€VytvoÅ™it hrÃ¡Äeâ€œ (viditelnÃ© pro ADMIN i MANAGER, protoÅ¾e POST /players majÃ­ oba).

AdminPlayersTable

VykreslÃ­ tabulku / seznam.

Sloupce tÅ™eba:

JmÃ©no / pÅ™ezdÃ­vka,

Status (hezkÃ½ badge â€“ klidnÄ› znovupouÅ¾Ã­t styl z PlayerMatchStatus, jen jinÃ½ enum),

TÃ½m,

PÅ™iÅ™azenÃ½ uÅ¾ivatel (email),

Datum vytvoÅ™enÃ­,

Akce.

V props:

players (jiÅ¾ pÅ™Ã­padnÄ› vyfiltrovanÃ½ seznam),

onApprove(id), onReject(id), onEdit(player), onDelete(id), onChangeUser(player).

AdminPlayerRow (volitelnÃ©)

Å˜Ã¡dek tabulky, kterÃ½:

drÅ¾Ã­ logiku â€kterÃ¡ tlaÄÃ­tka zobrazitâ€œ podle:

user.role (pÅ™ijde z kontextu nebo z prop),

player.playerStatus.

ModÃ¡ly:

AdminPlayerEditModal â€“ formulÃ¡Å™ pro update (ADMIN).

ChangePlayerUserModal â€“ zadÃ¡nÃ­ ID/emailu uÅ¾ivatele, kterÃ©mu hrÃ¡Äe pÅ™iÅ™adit (ADMIN).

ConfirmDeleteModal â€“ potvrzenÃ­ smazÃ¡nÃ­ (ADMIN).

8ï¸âƒ£ Router a navbar â€“ jak tam dostat odkaz
8.1 Routing

V hlavnÃ­m routeru:

PÅ™idat route:

/admin/players â†’ AdminPlayersPage.

Omotat role guardem:

nÄ›co jako:

v routeru pouÅ¾Ã­t komponentu RoleGuard (uÅ¾ ji mÃ¡Å¡) 

components

pro role: ["ROLE_ADMIN", "ROLE_MANAGER"] (podle toho, co ti backend vracÃ­).

8.2 Navbar

V Navbar.jsx:

Do <ul> v menu pÅ™idat dalÅ¡Ã­ poloÅ¾ku:

â€SprÃ¡va hrÃ¡ÄÅ¯â€œ nebo â€Admin hrÃ¡Äiâ€œ â†’ /admin/players.

Odkaz obalit RoleGuard nebo podmÃ­nkou, aby:

se zobrazoval jen pÅ™ihlÃ¡Å¡enÃ½m a

jen ADMIN/MANAGER.

TÃ­m:

bÄ›Å¾nÃ½ user uvidÃ­ dÃ¡l jen:

HrÃ¡Äi (svoji /players strÃ¡nku),

ZÃ¡pasy,

Registrace,

NastavenÃ­.

ADMIN/MANAGER navÃ­c:

â€SprÃ¡va hrÃ¡ÄÅ¯â€œ.

9ï¸âƒ£ Jak to zapadne do stÃ¡vajÃ­cÃ­ho flow s â€mÃ½mi hrÃ¡Äiâ€œ

StÃ¡vajÃ­cÃ­ Players komponenta (MyPlayers) se nemÄ›nÃ­:

pouÅ¾Ã­vÃ¡ usePlayers â†’ GET /players/me,

setCurrentPlayer â†’ POST /current-player/{id},

createPlayer â†’ /players/me.

NovÃ¡ admin strÃ¡nka:

vÅ¯bec nepracuje s currentPlayer,

neovlivÅˆuje â€vÃ½bÄ›r hrÃ¡Äeâ€œ uÅ¾ivatele,

je ÄistÄ› globÃ¡lnÃ­ administrace.

ğŸ”Ÿ DoporuÄenÃ½ postup implementace (aby ti to â€nespadloâ€œ)

API vrstva:

PÅ™idej novÃ© funkce do playerApi.js pro admin/global operations.

Hook useAllPlayersAdmin:

udÄ›lej jednoduchou verzi â€“ jen naÄtenÃ­ vÅ¡ech hrÃ¡ÄÅ¯ + reload.

StrÃ¡nka AdminPlayersPage:

zÃ¡klad:

useAllPlayersAdmin,

vÃ½pis prostÃ© tabulky bez modÃ¡lÅ¯, jen se jmÃ©nem a statusem.

RoleGuard v routeru + navbar odkaz:

pÅ™idej route + odkaz v menu,

zkontroluj, Å¾e bÄ›Å¾nÃ½ user se tam nedostane.

PostupnÄ› pÅ™idÃ¡vej akce:

Approve/Reject tlaÄÃ­tka pro ADMIN,

Delete,

Edit modal,

ChangeUser modal.