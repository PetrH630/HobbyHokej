

===== FILE: \CreatePlayerForm.jsx =====

import { useState } from "react";

const CreatePlayerForm = ({ onSubmit, onCancel, submitting }) => {
    const [name, setName] = useState("");
    const [surname, setSurname] = useState("");
    const [nickName, setNickName] = useState("");
    const [phoneNumber, setPhoneNumber] = useState("");
    const [team, setTeam] = useState("DARK");

    const handleSubmit = (e) => {
        e.preventDefault();

        onSubmit({
            name,
            surname,
            nickName: nickName || null,
            phoneNumber: phoneNumber || null,
            team,
        });
    };

    return (
        <form onSubmit={handleSubmit}>
            <div className="mb-3">
                <label className="form-label">Jm√©no *</label>
                <input
                    type="text"
                    className="form-control"
                    value={name}
                    onChange={(e) => setName(e.target.value)}
                    required
                    minLength={2}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">P≈ô√≠jmen√≠ *</label>
                <input
                    type="text"
                    className="form-control"
                    value={surname}
                    onChange={(e) => setSurname(e.target.value)}
                    required
                    minLength={2}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">
                    P≈ôezd√≠vka (nepovinn√©)
                </label>
                <input
                    type="text"
                    className="form-control"
                    value={nickName}
                    onChange={(e) => setNickName(e.target.value)}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">
                    Telefon (nepovinn√©)
                </label>
                <input
                    type="tel"
                    className="form-control"
                    value={phoneNumber}
                    onChange={(e) => setPhoneNumber(e.target.value)}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">T√Ωm</label>
                <select
                    className="form-select"
                    value={team}
                    onChange={(e) => setTeam(e.target.value)}
                >
                    <option value="DARK">DARK</option>
                    <option value="LIGHT">LIGHT</option>
                </select>
            </div>

            <div className="d-flex justify-content-between mt-4">
                <button
                    type="button"
                    className="btn btn-outline-secondary"
                    onClick={onCancel}
                    disabled={submitting}
                >
                    Zru≈°it
                </button>

                <button
                    type="submit"
                    className="btn btn-primary"
                    disabled={submitting}
                >
                    {submitting ? "Ukl√°d√°m‚Ä¶" : "Vytvo≈ôit hr√°ƒçe"}
                </button>
            </div>
        </form>
    );
};

export default CreatePlayerForm;

===== FILE: \PlayerCard.jsx =====

// src/components/PlayerCard.jsx
import RoleGuard from "../RoleGuard";
import { PhoneIcon, TeamDarkIcon, TeamLightIcon, PlayerIcon } from "../../icons";
import { formatPhoneNumber } from "../../utils/formatPhoneNumber";
import "./PlayerCard.css";

const statusClassMap = {
    APPROVED: "player-approved",
    PENDING: "player-pending",
    REJECTED: "player-rejected",
};

const statusTextMap = {
    PENDING: "ƒçek√° na schv√°len√≠",
    REJECTED: "zam√≠tnuto",
    APPROVED: "schv√°leno",
};

const PlayerCard = ({ player, onSelect, isActive, disabledTooltip }) => {
    const playerStatus = player.playerStatus ?? "PENDING";

    const statusClass = statusClassMap[playerStatus] || "";
    const statusText = statusTextMap[playerStatus] ?? playerStatus;

    const isApproved = playerStatus === "APPROVED";
    const isDarkTeam = player.team === "DARK";

    const hasDisabledTooltip = !!disabledTooltip;
    const isDisabled = !isApproved && hasDisabledTooltip;

    const isClickable = isApproved && !!onSelect && !isDisabled;

    return (
        <div
            className={[
                "player-card",
                statusClass,
                isClickable ? "clickable" : "",
                isDisabled ? "player-card--disabled" : "",
                isActive ? "player-card--active" : "",
            ]
                .filter(Boolean)
                .join(" ")}
            role={isClickable ? "button" : undefined}
            tabIndex={isClickable ? 0 : -1}
            onClick={isClickable ? onSelect : undefined}
            onKeyDown={
                isClickable
                    ? (e) => e.key === "Enter" && onSelect()
                    : undefined
            }
        >
            {/* Indik√°tor aktivn√≠ho hr√°ƒçe v prav√©m horn√≠m rohu */}
            <PlayerIcon
                className={`active-indicator ${isActive ? "active" : "inactive"
                    }`}
            />

            <div className="card-body">
                <h5 className="card-title mb-4 mt-3 text-center">
                    {player.fullName}
                </h5>

                <div className="mb-2 text-center">
                    <div
                        className={`team-icon-wrapper ${isDarkTeam ? "team-dark" : "team-light"
                            }`}
                    >
                        <TeamDarkIcon className="team-icon base" />
                        <TeamLightIcon className="team-icon overlay" />
                    </div>
                </div>

                <RoleGuard roles={["ROLE_ADMIN"]}>
                    <p className="card-text text-center mb-2">
                        <strong>Typ:</strong> {player.type}
                    </p>
                </RoleGuard>

                <p className="card-text text-center mb-2">
                    <strong>Status:</strong> {statusText}
                </p>

                <p className="card-text text-center mb-2">
                    <PhoneIcon className="phone-icon" />+
                    {formatPhoneNumber(player.phoneNumber)}
                </p>
            </div>

            {isDisabled && (
                <div className="player-card-tooltip">
                    {disabledTooltip}
                </div>
            )}
        </div>
    );
};

export default PlayerCard;

===== FILE: \PlayerMatchStatus.jsx =====

import "./PlayerMatchStatus.css";

import {
    RegisteredIcon,
    UnregisteredIcon,
    ExcusedIcon,
    ReservedIcon,
    NoResponseIcon,
    NoExcusedIcon,
} from "../../icons";

/**
 * Ikony pro STAV HR√ÅƒåE v z√°pase
 */
const PLAYER_MATCH_STATUS_ICON_MAP = {
    REGISTERED: RegisteredIcon,
    UNREGISTERED: UnregisteredIcon,
    EXCUSED: ExcusedIcon,
    RESERVED: ReservedIcon,
    NO_RESPONSE: NoResponseIcon,
    NO_EXCUSED: NoExcusedIcon,
};

/**
 * Texty ‚Äì nadch√°zej√≠c√≠ z√°pas
 */
const PLAYER_MATCH_STATUS_TEXT_UPCOMING = {
    REGISTERED: "p≈ôihl√°≈°en",
    UNREGISTERED: "odhl√°≈°en",
    EXCUSED: "omluven",
    RESERVED: "n√°hradn√≠k",
    NO_RESPONSE: "nep≈ôihl√°≈°en",
    NO_EXCUSED: "neomluven",
};

/**
 * Texty ‚Äì uplynul√Ω z√°pas
 */
const PLAYER_MATCH_STATUS_TEXT_PAST = {
    REGISTERED: "byl jsem",
    UNREGISTERED: "nebyl jsem",
    EXCUSED: "nemohl jsem",
    RESERVED: "byl jsem n√°hradn√≠k",
    NO_RESPONSE: "nereagoval jsem",
    NO_EXCUSED: "nep≈ôi≈°el jsem",
};

const PlayerMatchStatus = ({
    playerMatchStatus,
    variant = "upcoming",
}) => {
    // üîπ sjednocen√≠ ‚Äì v≈ædy pracujeme s jednou promƒõnnou
    const normalizedStatus = playerMatchStatus ?? "NO_RESPONSE";

    const StatusIcon = PLAYER_MATCH_STATUS_ICON_MAP[normalizedStatus];

    const textMap =
        variant === "past"
            ? PLAYER_MATCH_STATUS_TEXT_PAST
            : PLAYER_MATCH_STATUS_TEXT_UPCOMING;

    const text = textMap[normalizedStatus] ?? normalizedStatus;

    const modifier = normalizedStatus.toLowerCase(); // REGISTERED -> registered, NO_RESPONSE -> no_response

    return (
        <div className="text-center mb-3">
            <span
                className={`
                    player-match-status
                    player-match-status--${modifier}
                `}
            >
                {StatusIcon && (
                    <StatusIcon className="player-match-status-icon" />
                )}
                <strong className="player-match-status-text">
                    {text}
                </strong>
            </span>
        </div>
    );
};

export default PlayerMatchStatus;

===== FILE: \Players.jsx =====

// src/components/Players.jsx
import { usePlayers } from "../../hooks/usePlayers";
import PlayerCard from "./PlayerCard";
import { setCurrentPlayer } from "../../api/playerApi";
import { useNavigate } from "react-router-dom";
import { useCurrentPlayer } from "../../hooks/useCurrentPlayer";

import "./Players.css";

const Players = () => {
    const { players, loading, error } = usePlayers();
    const navigate = useNavigate();

    const { currentPlayer, refreshCurrentPlayer } = useCurrentPlayer();

    const handleSelectPlayer = async (playerId) => {
        try {
            await setCurrentPlayer(playerId);
            await refreshCurrentPlayer();
            navigate("/matches");
        } catch (err) {
            console.error("Nelze nastavit aktu√°ln√≠ho hr√°ƒçe", err);
            alert("Nepoda≈ôilo se vybrat hr√°ƒçe.");
        }
    };

    if (loading) return <p>Naƒç√≠t√°m hr√°ƒçe‚Ä¶</p>;
    if (error) return <p className="text-danger">{error}</p>;

    if (players.length === 0) {
        return (
            <div className="text-center mt-4">
                <p className="mb-3">
                    Je≈°tƒõ nem√°te vytvo≈ôen√©ho ≈æ√°dn√©ho hr√°ƒçe.
                    <br />
                    Chcete ho nyn√≠ vytvo≈ôit?
                </p>

                <button
                    className="btn btn-primary"
                    onClick={() => navigate("/createPlayer")}
                >
                    Vytvo≈ôit hr√°ƒçe
                </button>
            </div>
        );
    }

    return (
        <div className="container mt-3">
            <div className="player-list">
                {players.map((p) => (
                    <div className="player-item" key={p.id}>
                        <PlayerCard
                            player={p}
                            isActive={currentPlayer?.id === p.id}
                            onSelect={() => handleSelectPlayer(p.id)}
                            disabledTooltip={
                                p.playerStatus === "PENDING"
                                    ? "Hr√°ƒç ƒçek√° na schv√°len√≠ administr√°torem"
                                    : p.playerStatus === "REJECTED"
                                        ? "Hr√°ƒç byl zam√≠tnut administr√°torem"
                                        : ""
                            }
                        />
                    </div>
                ))}
            </div>

            <div className="text-center mt-4">
                <button
                    className="btn btn-outline-primary"
                    onClick={() => navigate("/createPlayer")}
                >
                    P≈ôidat dal≈°√≠ho hr√°ƒçe
                </button>
            </div>
        </div>
    );
};

export default Players;
