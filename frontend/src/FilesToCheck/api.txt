

===== FILE: \authApi.js =====

import api from "./axios";

/**
 * Přihlášení uživatele
 */
export const loginUser = (email, password) =>
    api.post("auth/login", { email, password });

/**
 * Odhlášení
 */
export const logoutUser = () =>
    api.post("auth/logout");

/**
 * Načtení aktuálního uživatele
 */
export const fetchCurrentUser = () =>
    api.get("/auth/me");

/**
 * Rychlá kontrola přihlášení
 */
export const checkAuthentication = async () => {
    try {
        await fetchCurrentUser();
        return true;
    } catch {
        return false;
    }
};

/**
 * Registrace nového uživatele
 */
export const registerUser = (data) =>
    api.post("/auth/register", data);

/**
 * Zapomenuté heslo – požadavek na reset (pošle e-mail s odkazem)
 */
export const requestForgottenPassword = (email) =>
    api.post("/auth/forgotten-password", { email });

/**
 * Zapomenuté heslo – zjistí info podle tokenu (e-mail)
 */
export const getForgottenPasswordInfo = (token) =>
    api.get("/auth/forgotten-password/info", {
        params: { token },
    });

/**
 * Zapomenuté heslo – finální reset hesla
 *
 * POZOR: názvy polí v objektu data si případně slaď s tím,
 * jak máš definovaný ForgottenPasswordResetDTO na backendu.
 */
export const resetForgottenPassword = (data) =>
    api.post("/auth/forgotten-password/reset", data);

===== FILE: \axios.js =====

import axios from "axios";

axios.defaults.withCredentials = true;

const api = axios.create({
    baseURL: import.meta.env.VITE_API_URL + "/api", // backend
    withCredentials: true,  
});

export default api;

===== FILE: \matchApi.js =====

import api from "./axios";

// nadcházející zápasy pro currentPlayer
export const getMyUpcomingMatchesOverview = async () => {
    const res = await api.get("/matches/me/upcoming-overview", {
        withCredentials: true,
    });
    return res.data; // List<MatchOverviewDTO>
};

// uplynulé zápasy pro currentPlayer
export const getMyPassedMatchesOverview = async () => {
    const res = await api.get("/matches/me/all-passed", {
        withCredentials: true,
    });
    return res.data; // List<MatchOverviewDTO>
};

export const getMatchDetail = async (id) => {
    const res = await api.get(`/matches/${id}/detail`, {
        withCredentials: true,
    });
    return res.data; // očekáváme DTO s detailem + statusem hráče
};







===== FILE: \matchRegistrationApi.js =====

// src/api/matchRegistrationApi.js
import api from "./axios";

/**
 * Upsert registrace pro AKTUÁLNÍHO hráče (/me/upsert)
 * - matchId: ID zápasu
 * - team: tým (např. "DARK" / "LIGHT") nebo null
 * - excuseReason: důvod omluvy (např. "ILLNESS") nebo null
 * - excuseNote: text omluvy nebo null
 * - unregister: true → odhlásit, false → registrovat / omluvit
 */
export const upsertMyRegistration = async ({
    matchId,
    team = null,
    excuseReason = null,
    excuseNote = null,
    unregister = false,
    substitute = false,
}) => {
    const res = await api.post(
        "/registrations/me/upsert",
        {
            matchId,
            team,
            adminNote: null,       // hráč nic nevyplňuje
            excuseReason,
            excuseNote,
            unregister,
            substitute,
        },
        { withCredentials: true }
    );

    // backend vrací MatchRegistrationDTO
    return res.data;
};

===== FILE: \playerApi.js =====

import api from "./axios";

export const getMyPlayers = async () => {
    const res = await api.get("/players/me");
    return res.data;
};

export const setCurrentPlayer = async (playerId) => {
    const res = await api.post(`/current-player/${playerId}`);
    return res.data; // nebo void, podle backendu
};

export const getCurrentPlayer = async () => {
    const res = await api.get("/current-player");
    return res.data;
};

export const createPlayer = async (data) => {
    const res = await api.post("/players/me", data);
    return res.data;
};
