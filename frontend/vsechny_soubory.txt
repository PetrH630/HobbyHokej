==================================================
src\api\adminPlayersApi.js
==================================================

// src/api/adminPlayersApi.js
import api from "./axios";

export const fetchAllPlayersAdmin = async () => {
    return api.get("/players"); 
};


==================================================
src\api\authApi.js
==================================================

import api from "./axios";

/**
 * PĹ™ihlĂˇĹˇenĂ­ uĹľivatele
 */
export const loginUser = (email, password) =>
    api.post("auth/login", { email, password });

/**
 * OdhlĂˇĹˇenĂ­
 */
export const logoutUser = () =>
    api.post("auth/logout");

/**
 * NaÄŤtenĂ­ aktuĂˇlnĂ­ho uĹľivatele
 */
export const fetchCurrentUser = () =>
    api.get("/auth/me");

/**
 * RychlĂˇ kontrola pĹ™ihlĂˇĹˇenĂ­
 */
export const checkAuthentication = async () => {
    try {
        await fetchCurrentUser();
        return true;
    } catch {
        return false;
    }
};

/**
 * Registrace novĂ©ho uĹľivatele
 */
export const registerUser = (data) =>
    api.post("/auth/register", data);

/**
 * Aktivace ĂşÄŤtu pomocĂ­ tokenu
 */
export const verifyEmail = (token) =>
    api.get("/auth/verify", { params: { token } });


/**
 * ZapomenutĂ© heslo â€“ poĹľadavek na reset (poĹˇle e-mail s odkazem)
 */
export const requestForgottenPassword = (email) =>
    api.post("/auth/forgotten-password", { email });

/**
 * ZapomenutĂ© heslo â€“ zjistĂ­ info podle tokenu (e-mail)
 */
export const getForgottenPasswordInfo = (token) =>
    api.get("/auth/forgotten-password/info", {
        params: { token },
    });

/**
 * ZapomenutĂ© heslo â€“ finĂˇlnĂ­ reset hesla
 */
export const resetForgottenPassword = (data) =>
    api.post("/auth/forgotten-password/reset", data);

==================================================
src\api\axios.js
==================================================

import axios from "axios";

/**
 * CentrĂˇlnĂ­ Axios instance pro komunikaci s backendem.
 *
 * ReĹľimy:
 * 1) LokĂˇlnĂ­ vĂ˝voj:
 *    VITE_API_BASE_URL=http://localhost:8080
 *
 * 2) Produkce â€“ jeden server (nginx proxy):
 *    VĹľdy pouĹľĂ­vĂˇ relativnĂ­ "/api"
 *
 * 3) Produkce â€“ oddÄ›lenĂ˝ backend:
 *    Lze upravit podle potĹ™eby
 */

const isProd = import.meta.env.PROD;

const apiBase = isProd
    ? "/api"  // đź”Ą na VPS vĹľdy relativnĂ­ cesta
    : (import.meta.env.VITE_API_BASE_URL
        ? `${import.meta.env.VITE_API_BASE_URL.replace(/\/$/, "")}/api`
        : "/api");

const api = axios.create({
    baseURL: apiBase,
    withCredentials: true,
});

export default api;


==================================================
src\api\demoApi.js
==================================================

// api/demoApi.js
import api from "./axios"; // tvĹŻj axios instance

export async function tryGetDemoNotifications() {
  try {
    const res = await api.get("/demo/notifications", { withCredentials: true });
      console.log("[DEMO] notifications OK:", res.data);
    return res.data; // DemoNotificationsDTO

  } catch (e) {
    const status = e?.response?.status;
      console.log("[DEMO] notifications FAIL:", {
          status,
          url: e?.config?.url,
          baseURL: e?.config?.baseURL,
          message: e?.message,
          data: e?.response?.data,
      });
    // 404 = endpoint v produkci neexistuje (pojistka), 403 = security blokuje
    if (status === 404 || status === 403) return null;
    return null; // aĹĄ to nelĂˇme flow ani pĹ™i jinĂ˝ch chybĂˇch
  }
}

export async function tryClearDemoNotifications() {
    try {
        await api.delete("/demo/notifications", { withCredentials: true });
        return true;
    } catch (e) {
        const status = e?.response?.status;
        if (status === 404 || status === 403) return false;
        return false;
    }
}



==================================================
src\api\demoNotificationsApi.js
==================================================

// src/api/demoNotificationsApi.js
import api from "./axios";

export const getDemoNotifications = () => {
    return api.get("/demo/notifications");
};


==================================================
src\api\matchApi.js
==================================================

// src/api/matchApi.js
import api from "./axios";

/* =========================================================
   HrĂˇÄŤ â€“ zĂˇpasy pro currentPlayer
   ========================================================= */

/**
 * NadchĂˇzejĂ­cĂ­ zĂˇpasy (pĹ™ehled) pro aktuĂˇlnĂ­ho hrĂˇÄŤe.
 * GET /api/matches/me/upcoming-overview
 */
export const getMyUpcomingMatchesOverview = async () => {
    const res = await api.get("/matches/me/upcoming-overview", {
        withCredentials: true,
    });
    return res.data; // List<MatchOverviewDTO>
};

/**
 * UplynulĂ© zĂˇpasy (pĹ™ehled) pro aktuĂˇlnĂ­ho hrĂˇÄŤe.
 * GET /api/matches/me/all-passed
 */
export const getMyPassedMatchesOverview = async () => {
    const res = await api.get("/matches/me/all-passed", {
        withCredentials: true,
    });
    return res.data; // List<MatchOverviewDTO>
};

/**
 * Detail zĂˇpasu z pohledu hrĂˇÄŤe.
 * GET /api/matches/{id}/detail
 */
export const getMatchDetail = async (id) => {
    const res = await api.get(`/matches/${id}/detail`, {
        withCredentials: true,
    });
    return res.data; // MatchDetailDTO
};

/* 
   ADMIN / MANAGER â€“ globĂˇlnĂ­ sprĂˇva zĂˇpasĹŻ
*/

/**
 * VrĂˇtĂ­ vĹˇechny zĂˇpasy v systĂ©mu (v aktuĂˇlnĂ­ sezĂłnÄ›).
 * GET /api/matches
 * Role: ADMIN, MANAGER
 */
export const getAllMatchesAdmin = async () => {
    const res = await api.get("/matches");
    return res.data; // List<MatchDTO>
};

/**
 * VrĂˇtĂ­ vĹˇechny nadchĂˇzejĂ­cĂ­ zĂˇpasy.
 * GET /api/matches/upcoming
 * Role: ADMIN, MANAGER
 */
export const getUpcomingMatchesAdmin = async () => {
    const res = await api.get("/matches/upcoming");
    return res.data; // List<MatchDTO>
};

/**
 * VrĂˇtĂ­ vĹˇechny probÄ›hlĂ© zĂˇpasy.
 * GET /api/matches/past
 * Role: ADMIN, MANAGER
 */
export const getPastMatchesAdmin = async () => {
    const res = await api.get("/matches/past");
    return res.data; // List<MatchDTO>
};

/**
 * VytvoĹ™Ă­ novĂ˝ zĂˇpas.
 * POST /api/matches
 * Role: ADMIN
 */
export const createMatchAdmin = async (data) => {
    const res = await api.post("/matches", data);
    return res.data; // MatchDTO
};

/**
 * Aktualizuje existujĂ­cĂ­ zĂˇpas.
 * PUT /api/matches/{id}
 * Role: ADMIN, MANAGER
 */
export const updateMatchAdmin = async (id, data) => {
    const res = await api.put(`/matches/${id}`, data);
    return res.data; // MatchDTO
};

/**
 * SmaĹľe zĂˇpas.
 * DELETE /api/matches/{id}
 * Role: ADMIN
 */
export const deleteMatchAdmin = async (id) => {
    const res = await api.delete(`/matches/${id}`);
    return res.data; // SuccessResponseDTO
};

/**
 * ZruĹˇĂ­ zĂˇpas s dĹŻvodem.
 * PATCH /api/matches/{matchId}/cancel?reason=...
 * Role: ADMIN, MANAGER
 */
export const cancelMatchAdmin = async (matchId, reason) => {
    const res = await api.patch(`/matches/${matchId}/cancel`, null, {
        params: { reason },
    });
    return res.data; // SuccessResponseDTO
};

/**
 * ObnovĂ­ dĹ™Ă­ve zruĹˇenĂ˝ zĂˇpas.
 * PATCH /api/matches/{matchId}/uncancel
 * Role: ADMIN, MANAGER
 */
export const unCancelMatchAdmin = async (matchId) => {
    const res = await api.patch(`/matches/${matchId}/uncancel`);
    return res.data; // SuccessResponseDTO
};

/**
 * Historie zĂˇpasu.
 * GET /api/matches/{id}/history
 * Role: ADMIN, MANAGER
 */
export const getMatchHistoryAdmin = async (id) => {
    const res = await api.get(`/matches/${id}/history`);
    return res.data; // List<MatchHistoryDTO>
};

/**
 * ZĂˇpasy dostupnĂ© pro konkrĂ©tnĂ­ho hrĂˇÄŤe.
 * GET /api/matches/available-for-player/{playerId}
 * Role: ADMIN, MANAGER
 */
export const getAvailableMatchesForPlayerAdmin = async (playerId) => {
    const res = await api.get(`/matches/available-for-player/${playerId}`);
    return res.data; // List<MatchDTO>
};


==================================================
src\api\matchRegistrationApi.js
==================================================

// src/api/matchRegistrationApi.js
import api from "./axios";

/**
 * Upsert registrace pro AKTUĂLNĂŤHO hrĂˇÄŤe (/me/upsert)
 * - matchId: ID zĂˇpasu
 * - team: tĂ˝m (napĹ™. "DARK" / "LIGHT") nebo null
 * - excuseReason: dĹŻvod omluvy
 * - excuseNote: text omluvy nebo null
 * - unregister: true â†’ odhlĂˇsit, false â†’ registrovat / omluvit
 */
export const upsertMyRegistration = async ({
    matchId,
    team = null,
    excuseReason = null,
    excuseNote = null,
    unregister = false,
    substitute = false,
}) => {
    const res = await api.post(
        "/registrations/me/upsert",
        {
            matchId,
            team,
            adminNote: null,      
            excuseReason,
            excuseNote,
            unregister,
            substitute,
        },
        { withCredentials: true }
    );
    return res.data;
};

/**
 * ADMIN/MANAGER: oznaÄŤĂ­ hrĂˇÄŤe jako NO_EXCUSED
 * PATCH /api/matches/match/{matchId}/players/{playerId}/no-excused
 *
 * POZOR: podle controlleru mĂˇĹˇ @RequestMapping("/api/matches")
 * a @PatchMapping("/match/{matchId}/players/{playerId}/no-excused"),
 * takĹľe vĂ˝slednĂˇ cesta je /api/matches/match/...
 */
export const markNoExcusedAdmin = async (matchId, playerId, adminNote) => {
    const res = await api.patch(
        `/registrations/match/${matchId}/players/${playerId}/no-excused`,
        null,
        {
            params: adminNote ? { adminNote } : {},
        }
    );
    return res.data;
};

/**
 * ADMIN/MANAGER: zruĹˇĂ­ NO_EXCUSED a oznaÄŤĂ­ hrĂˇÄŤe jako EXCUSED
 * s dĹŻvodem JINĂ‰ a poznĂˇmkou â€žOmluven - nakonec opravdu nemohlâ€ś.
 *
 * Backend endpoint si mĹŻĹľeĹˇ udÄ›lat napĹ™.
 * @PatchMapping("/match/{matchId}/players/{playerId}/cancel-no-excused")
 */
export const cancelNoExcusedAdmin = async (matchId, playerId, excuseNote) => {
    const res = await api.patch(
        `/registrations/match/${matchId}/players/${playerId}/cancel-no-excused`,
        null,
        {
            params: {
                excuseReason: "JINE", 
                excuseNote,
            },
        }
    );
    return res.data;
};




==================================================
src\api\matchRegistrationHistoryApi.js
==================================================

// src/api/matchRegistrationHistoryAdmin
import api from "./axios";

// historie registraci hrĂˇÄŤe na zĂˇpas dle id zĂˇpasu
export const getMyMatchRegistrationHistory = async (matchId) => {
    const res = await api.get(`/registrations/history/me/matches/${matchId}`,{
    withCredentials: true,
    });
    return res.data; // List<MatchRegistrationHistoryDTO> getHistoryForCurrentPlayerAndMatch(Long matchId)
};

// ADMIN: historie registracĂ­ konkrĂ©tnĂ­ho hrĂˇÄŤe v konkrĂ©tnĂ­m zĂˇpase
// Upravenou URL pĹ™izpĹŻsob svĂ©mu backendu
export const getPlayerRegistrationHistoryAdmin = async (matchId, playerId) => {
    const res = await api.get(
        `/registrations/history/admin/matches/${matchId}/players/${playerId}`
    );
    return res.data;
};

==================================================
src\api\modeApi.js
==================================================

// src/api/modeApi.js
import api from "./axios";

/**
 * NaÄŤte reĹľim aplikace (demo / produkce) z backendu.
 *
 * VolĂˇ: GET {baseURL}/public/app-mode
 * â†’ s baseURL = VITE_API_URL + "/api"
 * tedy typicky: http://localhost:8080/api/public/app-mode
 */
export const fetchAppMode = async () => {
    const response = await api.get("/public/app-mode");

    console.log("[modeApi] /public/app-mode response.data:", response.data);

    return response.data; // oÄŤekĂˇvĂˇme objekt { demoMode: true/false }
};


==================================================
src\api\playerApi.js
==================================================

// src/api/playerApi.js
import api from "./axios";

/* 
   USER â€“ HRĂÄŚI PĹIHLĂĹ ENĂ‰HO UĹ˝IVATELE (/me)
 */

/**
 * NaÄŤte hrĂˇÄŤe pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele
 * GET /api/players/me
 */
export const getMyPlayers = async () => {
    
    
    
    const res = await api.get("/players/me");
    return res.data;
};

/**
 * VytvoĹ™Ă­ novĂ©ho hrĂˇÄŤe pro pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele
 * POST /api/players/me
 */
export const createPlayer = async (data) => {
    const res = await api.post("/players/me", data);
    return res.data;
};

/**
 * NastavĂ­ aktuĂˇlnĂ­ho hrĂˇÄŤe
 * POST /api/current-player/{playerId}
 */
export const setCurrentPlayer = async (playerId) => {
    const res = await api.post(`/current-player/${playerId}`);
    return res.data;
};

/**
 * NaÄŤte aktuĂˇlnĂ­ho hrĂˇÄŤe
 * GET /api/current-player
 */
export const getCurrentPlayer = async () => {
    const res = await api.get("/current-player");
    return res.data;
};

/**
 * AutomatickĂ˝ vĂ˝bÄ›r aktuĂˇlnĂ­ho hrĂˇÄŤe po loginu
 * POST /api/current-player/auto-select
 */
export const autoSelectCurrentPlayer = async () => {
    const res = await api.post("/current-player/auto-select");
    return res.data;
};

/**
 * Aktualizuje Ăşdaje aktuĂˇlnÄ› zvolenĂ©ho hrĂˇÄŤe.
 * Mappuje na PUT /api/players/me
 */
export const updateMyCurrentPlayer = async (playerDto) => {
    const res = await api.put("/players/me", playerDto, {
        withCredentials: true,
    });
    return res.data; // PlayerDTO
};

/* 
   ADMIN / MANAGER â€“ GLOBĂLNĂŤ SPRĂVA HRĂÄŚĹ®
 */

/**
 * NaÄŤte vĹˇechny hrĂˇÄŤe v systĂ©mu
 * GET /api/players
 * Role: ADMIN, MANAGER
 */
export const getAllPlayersAdmin = async () => {
    const res = await api.get("/players");
    return res.data;
};

/**
 * Detail hrĂˇÄŤe podle ID
 * GET /api/players/{id}
 * Role: ADMIN, MANAGER
 */
export const getPlayerById = async (id) => {
    const res = await api.get(`/players/${id}`);
    return res.data;
};

/**
 * VytvoĹ™Ă­ hrĂˇÄŤe globĂˇlnÄ›
 * POST /api/players
 * Role: ADMIN, MANAGER
 */
export const createPlayerAdmin = async (data) => {
    const res = await api.post("/players", data);
    return res.data;
};

/**
 * Aktualizuje hrĂˇÄŤe
 * PUT /api/players/{id}
 * Role: ADMIN
 */
export const updatePlayerAdmin = async (id, data) => {
    const res = await api.put(`/players/${id}`, data);
    return res.data;
};

/**
 * SmaĹľe hrĂˇÄŤe
 * DELETE /api/players/{id}
 * Role: ADMIN
 */
export const deletePlayerAdmin = async (id) => {
    const res = await api.delete(`/players/${id}`);
    return res.data;
};

/**
 * SchvĂˇlĂ­ hrĂˇÄŤe (APPROVED)
 * PUT /api/players/{id}/approve
 * Role: ADMIN
 */
export const approvePlayerAdmin = async (id) => {
    const res = await api.put(`/players/${id}/approve`);
    return res.data;
};

/**
 * ZamĂ­tne hrĂˇÄŤe (REJECTED)
 * PUT /api/players/{id}/reject
 * Role: ADMIN
 */
export const rejectPlayerAdmin = async (id) => {
    const res = await api.put(`/players/${id}/reject`);
    return res.data;
};

/**
 * ZmÄ›nĂ­ pĹ™iĹ™azenĂ©ho uĹľivatele hrĂˇÄŤe
 * POST /api/players/{playerId}/change-user
 * Role: ADMIN
 */
export const changePlayerUserAdmin = async (playerId, newUserId) => {
    const res = await api.post(`/players/${playerId}/change-user`, {
        newUserId,
    });
    return res.data;
};

/**
 * Historie hrĂˇÄŤe (ADMIN / MANAGER)
 * GET /api/players/{id}/history
 */
export const getPlayerHistoryAdmin = async (id) => {
    const res = await api.get(`/players/${id}/history`);
    return res.data; // List<PlayerHistoryDTO>
};

/**
 * Historie aktuĂˇlnĂ­ho hrĂˇÄŤe (/me/history)
 * GET /api/players/me/history
 */
export const getMyPlayerHistory = async () => {
    const res = await api.get("/players/me/history");
    return res.data; // List<PlayerHistoryDTO>
};

/**
 * Statistiky aktuĂˇlnĂ­ho hrĂˇÄŤe pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele
 * GET /api/players/me/stats
 */
export const getMyPlayerStats = async () => {
    const res = await api.get("/players/me/stats");
    return res.data; // PlayerStatsDTO
};

/**
 * Statistiky hrĂˇÄŤe podle ID (ADMIN / MANAGER)
 * GET /api/players/{playerId}/stats
 */
export const getPlayerStatsAdmin = async (playerId) => {
    const res = await api.get(`/players/${playerId}/stats`);
    return res.data; // PlayerStatsDTO
};



==================================================
src\api\playerInactivityApi.js
==================================================

// src/api/playerInactivityApi.js
import api from "./axios";

/**
 * ADMIN: vrĂˇtĂ­ vĹˇechny zĂˇznamy neaktivity vĹˇech hrĂˇÄŤĹŻ.
 * GET /api/inactivity/admin/all
 */
export const getAllPlayerInactivityPeriodsAdmin = async () => {
    const res = await api.get("/inactivity/admin/all", {
        withCredentials: true,
    });
    return res.data; // pole PlayerInactivityPeriodDTO
};

/**
 * ADMIN/MANAGER: vĹˇechna obdobĂ­ neaktivity danĂ©ho hrĂˇÄŤe
 * GET /api/inactivity/admin/player/{playerId}
 */
export const getInactivityByPlayerAdmin = async (playerId) => {
    const res = await api.get(`/inactivity/admin/player/${playerId}`);
    return res.data; // List<PlayerInactivityPeriodDTO>
};

/**
 * ADMIN/MANAGER: vytvoĹ™enĂ­ obdobĂ­ neaktivity
 * POST /api/inactivity/admin
 */
export const createInactivityAdmin = async (payload) => {
    const res = await api.post("/inactivity/admin", payload);
    return res.data; // PlayerInactivityPeriodDTO
};

/**
 * ADMIN/MANAGER: update obdobĂ­ neaktivity
 * PUT /api/inactivity/admin/{id}
 */
export const updateInactivityAdmin = async (id, payload) => {
    const res = await api.put(`/inactivity/admin/${id}`, payload);
    return res.data;
};

/**
 * ADMIN: smazĂˇnĂ­ obdobĂ­ neaktivity
 * DELETE /api/inactivity/admin/{id}
 */
export const deleteInactivityAdmin = async (id) => {
    await api.delete(`/inactivity/admin/${id}`);
};

/**
 * PLAYER: vĹˇechna obdobĂ­ neaktivity pĹ™ihlĂˇĹˇenĂ©ho hrĂˇÄŤe
 * GET /api/inactivity/admin/me/all
 */
export const getMyInactivity = async () => {
    const res = await api.get(`/inactivity/admin/me/all`);
    return res.data; // List<PlayerInactivityPeriodDTO>
};


==================================================
src\api\playerSettingsApi.js
==================================================

// src/api/playerSettingsApi.js
import api from "./axios";

/**
 * NaÄŤte nastavenĂ­ aktuĂˇlnĂ­ho hrĂˇÄŤe (/api/me/settings).
 */
export const getCurrentPlayerSettings = async () => {
    const res = await api.get("/me/settings", {
        withCredentials: true,
    });
    return res.data; // PlayerSettingsDTO
};

/**
 * UloĹľĂ­ nastavenĂ­ aktuĂˇlnĂ­ho hrĂˇÄŤe (/api/me/settings).
 *
 * @param {Object} settings PlayerSettingsDTO
 */
export const updateCurrentPlayerSettings = async (settings) => {
    const res = await api.patch("/me/settings", settings, {
        withCredentials: true,
    });
    return res.data; // PlayerSettingsDTO
};

/**
 * (VolitelnĂ©) NaÄŤtenĂ­ nastavenĂ­ libovolnĂ©ho hrĂˇÄŤe podle ID.
 */
export const getPlayerSettings = async (playerId) => {
    const res = await api.get(`/players/${playerId}/settings`, {
        withCredentials: true,
    });
    return res.data; // PlayerSettingsDTO
};

/**
 * (VolitelnĂ©) Aktualizace nastavenĂ­ libovolnĂ©ho hrĂˇÄŤe podle ID.
 */
export const updatePlayerSettings = async (playerId, settings) => {
    const res = await api.patch(`/players/${playerId}/settings`, settings, {
        withCredentials: true,
    });
    return res.data; // PlayerSettingsDTO
};


==================================================
src\api\seasonApi.js
==================================================

// src/api/seasonApi.js

import api from "./axios";

/* =========================================================
   USER â€“ SEZĂ“NY PĹIHLĂĹ ENĂ‰HO UĹ˝IVATELE (/me)
   ========================================================= */

/**
 * VracĂ­ seznam vĹˇech sezĂłn pro pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele.
 * GET /api/seasons/me
 */
export const fetchSeasonsForUser = async () => {
    const res = await api.get("/seasons/me");
    return res.data; // List<SeasonDTO>
};

/**
 * VracĂ­ aktuĂˇlnÄ› vybranou sezĂłnu pro uĹľivatele.
 * GET /api/seasons/me/current
 */
export const fetchCurrentSeasonForUser = async () => {
    const res = await api.get("/seasons/me/current");
    return res.data; // SeasonDTO nebo null
};

/**
 * NastavĂ­ aktuĂˇlnĂ­ sezĂłnu pro uĹľivatele.
 * POST /api/seasons/me/current/{seasonId}
 */
export const setCurrentSeasonForUser = async (seasonId) => {
    const res = await api.post(`/seasons/me/current/${seasonId}`);
    return res.data;
};

/* =========================================================
   ADMIN / MANAGER â€“ GLOBĂLNĂŤ SPRĂVA SEZĂ“N
   ========================================================= */

/**
 * NaÄŤte vĹˇechny sezĂłny v systĂ©mu.
 * GET /api/seasons
 * Role: ADMIN, MANAGER
 */
export const getAllSeasonsAdmin = async () => {
    const res = await api.get("/seasons");
    return res.data; // List<SeasonDTO>
};

/**
 * Detail sezĂłny podle ID.
 * GET /api/seasons/{id}
 * Role: ADMIN, MANAGER
 */
export const getSeasonByIdAdmin = async (id) => {
    const res = await api.get(`/seasons/${id}`);
    return res.data; // SeasonDTO
};

/**
 * VytvoĹ™Ă­ novou sezĂłnu.
 * POST /api/seasons
 * Role: ADMIN
 */
export const createSeasonAdmin = async (data) => {
    const res = await api.post("/seasons", data);
    return res.data; // SeasonDTO
};

/**
 * Aktualizuje existujĂ­cĂ­ sezĂłnu.
 * PUT /api/seasons/{id}
 * Role: ADMIN
 */
export const updateSeasonAdmin = async (id, data) => {
    const res = await api.put(`/seasons/${id}`, data);
    return res.data; // SeasonDTO
};

// PATCH /api/seasons/{id}/activate
export const setActiveSeasonAdmin = async (seasonId) => {
    const res = await api.put(`/seasons/${seasonId}/active`);
    return res.data;
};




==================================================
src\api\userApi.js
==================================================

// src/api/userApi.js
import api from "./axios";

export const userApi = {
    // ADMIN: seznam uĹľivatelĹŻ
    getAll: async () => {
        const res = await api.get("/users");
        return res.data;
    },

    // ADMIN: detail uĹľivatele podle ID
    getById: async (id) => {
        const res = await api.get(`/users/${id}`);
        return res.data;
    },

    // ADMIN: updateByAdmin
    updateAdmin: async (id, dto) => {
        const res = await api.put(`/users/${id}`,dto);
        return res.data;
    },

    // ADMIN: reset hesla na vĂ˝chozĂ­ hodnotu
    resetPassword: async (id) => {
        const res = await api.post(`/users/${id}/reset-password`);
        return res.data; // "Heslo resetovĂˇno na 'Player123'"
    },

    // ADMIN: aktivace ĂşÄŤtu
    activateUser: async (id) => {
        const res = await api.patch(`/users/${id}/activate`);
        return res.data;
    },

    // ADMIN: deaktivace ĂşÄŤtu
    deactivateUser: async (id) => {
        const res = await api.patch(`/users/${id}/deactivate`);
        return res.data;
    },


    // === ÄŚĂST PRO PĹIHLĂĹ ENĂ‰HO UĹ˝IVATELE (/me) ===

    /**
     * VrĂˇtĂ­ detail aktuĂˇlnÄ› pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele.
     * GET /api/users/me
     */
    getCurrent: async () => {
        const res = await api.get("/users/me");
        return res.data; // AppUserDTO
    },

    /**
     * Aktualizuje Ăşdaje aktuĂˇlnÄ› pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele.
     * PUT /api/users/me/update
     *
     * @param {Object} dto AppUserDTO
     */
    updateCurrent: async (dto) => {
        const res = await api.put("/users/me/update", dto);
        return res.data; // "UĹľivatel byl zmÄ›nÄ›n"
    },

    /**
     * ZmÄ›nĂ­ heslo aktuĂˇlnÄ› pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele.
     * POST /api/users/me/change-password
     *
     * @param {{ oldPassword: string, newPassword: string, newPasswordConfirm: string }} data
     */
    changeMyPassword: async (data) => {
        const res = await api.post("/users/me/change-password", data);
        return res.data; // "Heslo ĂşspÄ›ĹˇnÄ› zmÄ›nÄ›no"
    },
};


==================================================
src\api\userSettingsApi.js
==================================================

// src/api/userSettingsApi.js
import api from "./axios";

/**
 * NaÄŤte nastavenĂ­ aktuĂˇlnÄ› pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele (/api/user/settings).
 */
export const getUserSettings = async () => {
    const res = await api.get("/user/settings", {
        withCredentials: true,
    });
    return res.data; // AppUserSettingsDTO
};

/**
 * Aktualizuje nastavenĂ­ aktuĂˇlnÄ› pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele (/api/user/settings).
 *
 * @param {Object} settings AppUserSettingsDTO
 */
export const updateUserSettings = async (settings) => {
    const res = await api.patch("/user/settings", settings, {
        withCredentials: true,
    });
    return res.data; // AppUserSettingsDTO
};


==================================================
src\components\admin\AdminCancelNoExcuseModal.jsx
==================================================

import React, { useState } from "react";
import { useGlobalModal } from "../../hooks/useGlobalModal";

const AdminCancelNoExcuseModal = ({ match, saving, onConfirm, onClose }) => {


    const [selectedPlayerId, setSelectedPlayerId] = useState("");
    const [note, setNote] = useState("Omluven - nakonec opravdu nemohl");

    const noExcused = match?.noExcusedPlayers ?? [];

    const handleSubmit = (e) => {
        e.preventDefault();
        if (!selectedPlayerId) return;
        onConfirm(Number(selectedPlayerId), note);
    };

    return (
        <div className="modal d-block" tabIndex="-1">
            <div className="modal-dialog">
                <div className="modal-content">
                    <form onSubmit={handleSubmit}>
                        <div className="modal-header">
                            <h5 className="modal-title">
                                ZruĹˇit neomluvenĂ­ hrĂˇÄŤe
                            </h5>
                            <button
                                type="button"
                                className="btn-close"
                                onClick={onClose}
                                disabled={saving}
                            />
                        </div>
                        <div className="modal-body">
                            <p>
                                Vyber hrĂˇÄŤe, u kterĂ©ho chceĹˇ zruĹˇit neomluvenĂ­.
                            </p>

                            <div className="mb-3">
                                <label className="form-label">HrĂˇÄŤ</label>
                                <select
                                    className="form-select"
                                    value={selectedPlayerId}
                                    onChange={(e) =>
                                        setSelectedPlayerId(e.target.value)
                                    }
                                    disabled={saving || noExcused.length === 0}
                                >
                                    <option value="">Vyber hrĂˇÄŤeâ€¦</option>
                                    {noExcused.map((p) => (
                                        <option key={p.id} value={p.id}>
                                            {p.fullName ??
                                                `${p.name} ${p.surname}`}
                                        </option>
                                    ))}
                                </select>
                            </div>
                            <div className="mb-3">
                                <label className="form-label">
                                    PoznĂˇmka k omluvenĂ­ (volitelnĂ©)
                                </label>
                                <textarea
                                    className="form-control"
                                    rows="2"
                                    value={note}
                                    onChange={(e) => setNote(e.target.value)}
                                    disabled={saving}
                                    placeholder="DĹŻvod, proÄŤ je hrĂˇÄŤ dodateÄŤnÄ› omluvenâ€¦"
                                />
                                <div className="form-text">
                                    PoznĂˇmka se uloĹľĂ­ k omluvenĂ­ tohoto hrĂˇÄŤe.
                                </div>
                            </div>
                            {noExcused.length === 0 && (
                                <div className="alert alert-info">
                                    Pro tento zĂˇpas nenĂ­ nikdo oznaÄŤen jako
                                    â€žbez omluvyâ€ś.
                                </div>
                            )}
                        </div>
                        <div className="modal-footer">
                            <button
                                type="button"
                                className="btn btn-secondary"
                                onClick={onClose}
                                disabled={saving}
                            >
                                ZavĹ™Ă­t
                            </button>
                            <button
                                type="submit"
                                className="btn btn-primary"
                                disabled={
                                    saving ||
                                    !selectedPlayerId ||
                                    noExcused.length === 0
                                }
                            >
                                {saving
                                    ? "UklĂˇdĂˇmâ€¦"
                                    : "ZruĹˇit neomluvenĂ­ a omluvit"}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    );
};

export default AdminCancelNoExcuseModal;


==================================================
src\components\admin\AdminMatchCard.jsx
==================================================

// src/components/admin/AdminMatchCard.jsx
import { useState } from "react";
import RoleGuard from "../RoleGuard";
import AdminMatchHistory from "./AdminMatchHistory";
import AdminMatchDetailInline from "./AdminMatchDetailInline";
import {
    matchStatusLabel,
    matchCancelReasonLabel,
    matchActionLabel,
} from "../../utils/matchFormatter";
import { useGlobalDim } from "../../hooks/useGlobalDim";

const AdminMatchCard = ({ match, onEdit, onDelete, onCancel, onUnCancel }) => {
    const [showHistory, setShowHistory] = useState(false);
    const [showDetail, setShowDetail] = useState(false);

    const isExpanded = showDetail || showHistory;
    const dimActive = isExpanded; //  ztmavenĂ­ platĂ­ pro detail i historii

    //  zapne globĂˇlnĂ­ ztmavenĂ­, kdyĹľ je detail nebo historie otevĹ™enĂˇ
    useGlobalDim(dimActive);

    const statusText = matchStatusLabel(match.matchStatus);
    const cancelReasonText = matchCancelReasonLabel(match.cancelReason);
    const actionText = matchActionLabel(match.action);

    const isCanceled = match.matchStatus === "CANCELED";

    const parseDateTime = (dt) => {
        if (!dt) return null;
        const safe = dt.replace(" ", "T");
        const d = new Date(safe);
        return Number.isNaN(d.getTime()) ? null : d;
    };

    const formatDateTime = (dt) => {
        const d = parseDateTime(dt);
        if (!d) return "-";
        return d.toLocaleString("cs-CZ");
    };

    const matchDate = parseDateTime(match.dateTime);
    const now = new Date();
    const isPast = matchDate ? matchDate < now : false;

    // logika badge: zruĹˇenĂ˝ > uplynulĂ˝ > aktivnĂ­
    let badgeText = "budoucĂ­";
    let badgeClass = "bg-success";

    if (isCanceled) {
        badgeText = "zruĹˇenĂ˝";
        badgeClass = "bg-danger";
    } else if (isPast) {
        badgeText = "uplynulĂ˝";
        badgeClass = "bg-secondary";
    }

    const toggleHistory = () => {
        setShowHistory((prev) => !prev);
    };

    const toggleDetail = () => {
        setShowDetail((prev) => !prev);
    };

    //  DĹ®LEĹ˝ITĂ‰:
    // KdyĹľ je otevĹ™enĂ˝ detail nebo historie, karta musĂ­ bĂ˝t neprĹŻhlednĂˇ (ĹľĂˇdnĂ© bg-opacity),
    // aby se "neztmavila" pĹ™es overlay strĂˇnky.
    const cardClassName =
        "card shadow-sm mb-3 " +
        (isExpanded ? "border border-2 " : "") +
        (dimActive
            ? "bg-white dim-keep"
            : isExpanded
                ? "bg-danger bg-opacity-10"
                : "");

    return (
        <>
            {/*  klik mimo kartu zavĹ™e detail/historii (vrstva je pod kartou, nad ztmavenĂ­m) */}
            {dimActive && (
                <div
                    className="global-dim-click"
                    onClick={() => {
                        setShowHistory(false);
                        setShowDetail(false);
                    }}
                    aria-hidden="true"
                />
            )}

            <div className={cardClassName}>
                {/* === ĹĂDEK 1 â€“ ZĂKLADNĂŤ INFO O ZĂPASE === */}
                <div className="card-body border-bottom">
                    <div className="row align-items-center">
                        <div className="col-md-4 fw-bold">
                            {match.matchNumber != null && (
                                <span className="me-2">#{match.matchNumber}</span>
                            )}
                            <span>{formatDateTime(match.dateTime)}</span>

                            <span className={`badge ms-2 ${badgeClass}`}>
                                {badgeText}
                            </span>
                        </div>

                        <div className="col-md-4">
                            <small className="text-muted d-block">MĂ­sto</small>
                            {match.location || "-"}
                        </div>

                        <div className="col-md-2">
                            <small className="text-muted d-block">Max. hrĂˇÄŤĹŻ</small>
                            {match.maxPlayers ?? "-"}
                        </div>

                        <div className="col-md-2">
                            <small className="text-muted d-block">Cena</small>
                            {match.price != null ? `${match.price} KÄŤ` : "-"}
                        </div>
                    </div>
                </div>

                {/* === ĹĂDEK 2 â€“ STAV + AKCE === */}
                <div className="card-body border-bottom bg-light">
                    <div className="row align-items-center">
                        <div className="col-md-4">
                            <small className="text-muted d-block">Stav</small>
                            {statusText || "-"}
                            {match.cancelReason && (
                                <div>
                                    <small className="text-muted d-block">
                                        DĹŻvod zruĹˇenĂ­
                                    </small>
                                    <span>{cancelReasonText}</span>
                                </div>
                            )}
                        </div>

                        <div className="col-md-8">
                            <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                                <div className="d-flex justify-content-end">
                                    <div className="btn-group btn-group-sm flex-wrap">
                                        {/* DETAIL */}
                                        <button
                                            type="button"
                                            className={
                                                "btn btn-outline-info" +
                                                (showDetail ? " active" : "")
                                            }
                                            onClick={toggleDetail}
                                        >
                                            {showDetail ? "SkrĂ˝t detail" : "Detail"}
                                        </button>

                                        {/* UPRAVIT */}
                                        <button
                                            type="button"
                                            className="btn btn-primary"
                                            disabled={!onEdit}
                                            onClick={() => onEdit && onEdit(match)}
                                        >
                                            Upravit
                                        </button>

                                        {/* HISTORIE */}
                                        <button
                                            type="button"
                                            className={
                                                "btn btn-outline-secondary" +
                                                (showHistory ? " active" : "")
                                            }
                                            onClick={toggleHistory}
                                        >
                                            {showHistory ? "SkrĂ˝t historii" : "Historie"}
                                        </button>

                                        {/* ZRUĹ IT */}
                                        {!isCanceled && (
                                            <button
                                                type="button"
                                                className="btn btn-warning"
                                                disabled={!onCancel}
                                                onClick={() => onCancel && onCancel(match)}
                                            >
                                                ZruĹˇit
                                            </button>
                                        )}

                                        {/* OBNOVIT */}
                                        {isCanceled && (
                                            <button
                                                type="button"
                                                className="btn btn-success"
                                                disabled={!onUnCancel}
                                                onClick={() => onUnCancel && onUnCancel(match.id)}
                                            >
                                                Obnovit
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </RoleGuard>
                        </div>
                    </div>
                </div>

                {/* === ĹĂDEK 3 â€“ DETAIL ZĂPASU === */}
                {showDetail && (
                    <div className="card-body bg-white border-top">
                        <h6 className="mb-2">
                            Detail zĂˇpasu #{match.matchNumber ?? match.id}
                        </h6>
                        <AdminMatchDetailInline matchId={match.id} />
                    </div>
                )}

                {/* === ĹĂDEK 4 â€“ HISTORIE ZĂPASU === */}
                {showHistory && (
                    <div className="card-body bg-white border-top">
                        <h6 className="mb-2">
                            Historie zĂˇpasu #{match.matchNumber ?? match.id}
                        </h6>
                        <AdminMatchHistory matchId={match.id} />
                    </div>
                )}
            </div>
        </>
    );
};

export default AdminMatchCard;


==================================================
src\components\admin\AdminMatchDetailInline.jsx
==================================================

// src/components/admin/AdminMatchDetailInline.jsx
import MatchHeader from "../matches/MatchHeader";
import AdminMatchInfo from "../admin/AdminMatchInfo";
import { useMatchDetail } from "../../hooks/useMatchDetail";

const AdminMatchDetailInline = ({ matchId }) => {
    const { match, loading, error, reload } = useMatchDetail(matchId);

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm detail zĂˇpasuâ€¦</p>;
    }

    if (error) {
        return <p className="text-danger">{error}</p>;
    }

    if (!match) {
        return <p>Detail zĂˇpasu nebyl nalezen.</p>;
    }

    return (
        <div>            
            <AdminMatchInfo match={match} onRefresh={reload}/>
        </div>
    );
};

export default AdminMatchDetailInline;


==================================================
src\components\admin\AdminMatchesTable.jsx
==================================================

// src/components/admin/AdminMatchesTable.jsx
import { useState } from "react";
import AdminMatchCard from "./AdminMatchCard";

const FILTERS = {
    ALL: "ALL",
    FUTURE: "FUTURE",
    PAST: "PAST",
    CANCELED: "CANCELED",
    UNCANCELED: "UNCANCELED",
    UPDATED: "UPDATED",
};

const parseDateTime = (dt) => {
    if (!dt) return null;
    const safe = dt.includes("T") ? dt : dt.replace(" ", "T");
    const d = new Date(safe);
    return Number.isNaN(d.getTime()) ? null : d;
};

const isPastMatch = (match) => {
    if (!match || !match.dateTime) return false;
    const d = parseDateTime(match.dateTime);
    if (!d) return false;
    const now = new Date();
    return d < now;
};

/**
 * VrĂˇtĂ­ true, pokud zĂˇpas odpovĂ­dĂˇ zvolenĂ©mu filtru.
 */
const matchPassesFilter = (match, filter) => {
    const status = match.matchStatus; 
    const past = isPastMatch(match);


    switch (filter) {
        case FILTERS.FUTURE:
            return !past;

        case FILTERS.PAST:
            return past;

        case FILTERS.CANCELED:
            return status === "CANCELED";

        case FILTERS.UNCANCELED:
            return status === "UNCANCELED";

        case FILTERS.UPDATED:
            return status === "UPDATED";

        case FILTERS.ALL:
        default:
            return true;
    }
};

const AdminMatchesTable = ({
    matches,
    loading,
    error,
    onEdit,
    onDelete,
    onCancel,
    onUnCancel,
}) => {
    const [filter, setFilter] = useState(FILTERS.ALL);

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm zĂˇpasyâ€¦</p>;
    }

    if (error) {
        return (
            <div className="alert alert-danger" role="alert">
                {error}
            </div>
        );
    }

    if (!matches || matches.length === 0) {
        return <p>V systĂ©mu zatĂ­m nejsou ĹľĂˇdnĂ© zĂˇpasy.</p>;
    }

    // ĹazenĂ­ â€“ nejnovÄ›jĹˇĂ­ nahoĹ™e (dle matchNumber, fallback dle data)
    const sortedMatches = matches.slice().sort((a, b) => {
        if (a.matchNumber != null && b.matchNumber != null) {
            return b.matchNumber - a.matchNumber;
        }

        if (!a.dateTime || !b.dateTime) return 0;

        const safeA = a.dateTime.replace(" ", "T");
        const safeB = b.dateTime.replace(" ", "T");
        return new Date(safeB) - new Date(safeA);
    });

    // poÄŤty pro badge u jednotlivĂ˝ch filtrĹŻ
    const counts = {
        all: sortedMatches.length,
        future: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.FUTURE)
        ).length,
        past: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.PAST)
        ).length,
        canceled: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.CANCELED)
        ).length,
        uncanceled: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.UNCANCELED)
        ).length,
        updated: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.UPDATED)
        ).length,
    };

    const filteredMatches = sortedMatches.filter((m) =>
        matchPassesFilter(m, filter)
    );

    return (
        <div className="d-flex flex-column gap-3">
            {/* FiltrovacĂ­ tlaÄŤĂ­tka â€“ podobnÄ› jako u PastMatches */}
            <div className="d-flex justify-content-center mb-3">
                <div
                    className="btn-group"
                    role="group"
                    aria-label="Filtr zĂˇpasĹŻ"
                >
                    <button
                        type="button"
                        className={
                            filter === FILTERS.ALL
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.ALL)}
                    >
                        VĹˇe{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.all}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.FUTURE
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.FUTURE)}
                    >
                        BudoucĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.future}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.PAST
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.PAST)}
                    >
                        UplynulĂ©{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.past}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.CANCELED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.CANCELED)}
                    >
                        ZruĹˇenĂ©{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.canceled}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.UNCANCELED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.UNCANCELED)}
                    >
                        ObnovenĂ©{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.uncanceled}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.UPDATED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.UPDATED)}
                    >
                        ZmÄ›nÄ›nĂ©{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.updated}
                        </span>
                    </button>
                </div>
            </div>

            {/* Info, kdyĹľ nic neodpovĂ­dĂˇ filtru */}
            {filteredMatches.length === 0 && (
                <p className="text-center mb-3">
                    Pro zvolenĂ˝ filtr nemĂˇte ĹľĂˇdnĂ© zĂˇpasy.
                </p>
            )}

            {filteredMatches.map((match) => (
                <AdminMatchCard
                    key={match.id}
                    match={match}
                    onEdit={onEdit}
                    onDelete={onDelete}
                    onCancel={onCancel}
                    onUnCancel={onUnCancel}
                />
            ))}
        </div>
    );
};

export default AdminMatchesTable;


==================================================
src\components\admin\AdminMatchHistory.jsx
==================================================

// src/components/admin/AdminMatchHistory.jsx
import { useMatchHistoryAdmin } from "../../hooks/useMatchHistoryAdmin";
import AdminMatchHistoryCard from "./AdminMatchHistoryCard";

const AdminMatchHistory = ({ matchId }) => {
    const { history, loading, error } = useMatchHistoryAdmin(matchId);

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm historii zĂˇpasuâ€¦</p>;
    }

    if (error) {
        return <p className="text-danger">{error}</p>;
    }

    if (!history || history.length === 0) {
        return <p>Ĺ˝ĂˇdnĂˇ historie zmÄ›n zĂˇpasu.</p>;
    }

    const sortedHistory = history
        .slice()
        .sort(
            (a, b) =>
                new Date(b.changedAt) - new Date(a.changedAt)
        );

    return (
        <div className="d-flex flex-column gap-2">
            {sortedHistory.map((item) => (
                <AdminMatchHistoryCard
                    key={item.id}
                    item={item}
                />
            ))}
        </div>
    );
};

export default AdminMatchHistory;


==================================================
src\components\admin\AdminMatchHistoryCard.jsx
==================================================

// src/components/admin/AdminMatchHistoryCard.jsx
import {
    formatDateTime,
    matchStatusLabel,
    matchCancelReasonLabel,
    matchActionLabel,
} from "../../utils/matchFormatter";

const AdminMatchHistoryCard = ({ item }) => {
    const statusText = matchStatusLabel(item.matchStatus);
    const cancelReasonText = matchCancelReasonLabel(item.cancelReason);
    const actionText = matchActionLabel(item.action);

    return (
        <div className="card shadow-sm">
            {/* === HLAVIÄŚKA â€“ datum zmÄ›ny, akce, stav === */}
            <div className="card-body border-bottom py-2 py-md-3">
                <div className="d-flex flex-column flex-md-row justify-content-between gap-2">
                    <div>
                        <small className="text-muted d-block">Datum zmÄ›ny</small>
                        <strong>{formatDateTime(item.changedAt)}</strong>
                    </div>

                    <div>
                        <small className="text-muted d-block">Akce</small>
                        <span>{actionText}</span>
                    </div>

                    <div className="text-md-end">
                        <small className="text-muted d-block">Stav zĂˇpasu</small>
                        {statusText ? (
                            <span className="badge bg-primary">
                                {statusText}
                            </span>
                        ) : (
                            "-"
                        )}
                    </div>
                </div>
            </div>

            {/* === DETAILY ZĂPASU === */}
            <div className="card-body py-2 py-md-3">
                <div className="row">
                    <div className="col-md-6 mb-2">
                        <small className="text-muted d-block">Datum zĂˇpasu</small>
                        <span>{formatDateTime(item.dateTime)}</span>
                    </div>

                    <div className="col-md-6 mb-2">
                        <small className="text-muted d-block">MĂ­sto</small>
                        <span>{item.location || "-"}</span>
                    </div>

                    <div className="col-6 col-md-3 mb-2">
                        <small className="text-muted d-block">
                            Max. hrĂˇÄŤĹŻ
                        </small>
                        <span>{item.maxPlayers ?? "-"}</span>
                    </div>

                    <div className="col-6 col-md-3 mb-2">
                        <small className="text-muted d-block">Cena</small>
                        <span>
                            {item.price != null ? `${item.price} KÄŤ` : "-"}
                        </span>
                    </div>

                    <div className="col-6 col-md-3 mb-2">
                        <small className="text-muted d-block">SezĂłna (ID)</small>
                        <span>{item.seasonId ?? "-"}</span>
                    </div>

                    <div className="col-12 col-md-3 mb-2">
                        <small className="text-muted d-block">
                            DĹŻvod zruĹˇenĂ­
                        </small>
                        <span>{cancelReasonText || "-"}</span>
                    </div>
                </div>
            </div>

            {/* === METADATA === */}
            <div className="card-body border-top bg-light py-2 py-md-3">
                <div className="row">
                    <div className="col-md-6 mb-1">
                        <small className="text-muted d-block">
                            VytvoĹ™il (uĹľivatel ID)
                        </small>
                        <span>{item.createdByUserId ?? "-"}</span>
                    </div>

                    <div className="col-md-6 mb-1">
                        <small className="text-muted d-block">
                            Naposledy zmÄ›nil (uĹľivatel ID)
                        </small>
                        <span>{item.lastModifiedByUserId ?? "-"}</span>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default AdminMatchHistoryCard;


==================================================
src\components\admin\AdminMatchInfo.jsx
==================================================

// src/components/admin/AdminMatchInfo.jsx
import { useState } from "react";
import AdminMatchRegistrationInfo from "./AdminMatchRegistrationInfo";
import RoleGuard from "../RoleGuard";
import { useNotification } from "../../context/NotificationContext";
import {
    markNoExcusedAdmin,
    cancelNoExcusedAdmin,
} from "../../api/matchRegistrationApi";
import AdminPlayerRegistrationHistoryModal from "./AdminPlayerRegistrationHistoryModal";

const parseDateTime = (dt) => {
    if (!dt) return null;
    const safe = dt.replace(" ", "T");
    const d = new Date(safe);
    return Number.isNaN(d.getTime()) ? null : d;
};

const AdminMatchInfo = ({ match, onRefresh }) => {
    const { showNotification } = useNotification();

    const [saving, setSaving] = useState(false);
    const [historyPlayer, setHistoryPlayer] = useState(null);

    const matchDate = parseDateTime(match?.dateTime);
    const now = new Date();
    const isPastMatch = matchDate ? matchDate < now : false;

    const handleMarkNoExcuse = async (playerId, adminNote) => {
        try {
            setSaving(true);
            await markNoExcusedAdmin(
                match.id,
                playerId,
                adminNote && adminNote.trim()
                    ? adminNote.trim()
                    : "Admin: bez omluvy"
            );
            showNotification("HrĂˇÄŤ byl oznaÄŤen jako bez omluvy.", "success");
            if (onRefresh) {
                await onRefresh();
            }
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                err?.message ||
                "NeomluvenĂ­ hrĂˇÄŤe se nezdaĹ™ilo.";
            showNotification(msg, "danger");
        } finally {
            setSaving(false);
        }
    };

    const handleCancelNoExcuse = async (playerId, excuseNote) => {
        try {
            setSaving(true);
            await cancelNoExcusedAdmin(
                match.id,
                playerId,
                excuseNote && excuseNote.trim()
                    ? excuseNote.trim()
                    : "Admin: omluven - JINĂ‰"
            );
            showNotification(
                "NeomluvenĂ­ bylo zruĹˇeno (hrĂˇÄŤ omluven - JINĂ‰).",
                "success"
            );
            if (onRefresh) {
                await onRefresh();
            }
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                err?.message ||
                "ZruĹˇenĂ­ neomluvenĂ­ se nezdaĹ™ilo.";
            showNotification(msg, "danger");
        } finally {
            setSaving(false);
        }
    };

    // obaly pro aktuĂˇlnÄ› vybranĂ©ho hrĂˇÄŤe v modalu
    const handleMarkNoExcuseForHistoryPlayer = async (adminNote) => {
        if (!historyPlayer) return;
        await handleMarkNoExcuse(historyPlayer.id, adminNote);
    };

    const handleCancelNoExcuseForHistoryPlayer = async (excuseNote) => {
        if (!historyPlayer) return;
        await handleCancelNoExcuse(historyPlayer.id, excuseNote);
    };

    return (
        <div className="card">
            <div className="card-body">
                {/* HLAVIÄŚKA */}
                <div className="d-flex justify-content-between align-items-start mb-3">
                    <div>
                        {match.description && (
                            <p className="card-text mb-2">
                                <strong>Popis: </strong>
                                {match.description}
                            </p>
                        )}

                        <p className="card-text mb-2">
                            <strong>HrĂˇÄŤi celkem: </strong>
                            {match.inGamePlayers} / {match.maxPlayers}
                        </p>

                        <p className="card-text mb-2">
                            <strong>RozdÄ›lenĂ­ tĂ˝mĹŻ: </strong>
                            {match.inGamePlayersDark} /{" "}
                            {match.inGamePlayersLight}
                        </p>

                        {match.price != null && (
                            <p className="card-text mb-2">
                                <strong>Cena zĂˇpasu: </strong>
                                {match.price} KÄŤ
                            </p>
                        )}

                        {match.pricePerRegisteredPlayer != null && (
                            <p className="card-text mb-2">
                                <strong>Cena / hrĂˇÄŤ: </strong>
                                {match.pricePerRegisteredPlayer.toFixed(0)} KÄŤ
                            </p>
                        )}

                        <p className="card-text mb-0">
                            <small className="text-muted">
                                {isPastMatch
                                    ? "UkonÄŤenĂ˝ zĂˇpas â€“ lze pracovat s neomluvenĂ˝mi hrĂˇÄŤi."
                                    : "BudoucĂ­ zĂˇpas â€“ neomluvenĂ­ se typicky Ĺ™eĹˇĂ­ aĹľ po zĂˇpase."}
                            </small>
                        </p>
                    </div>

                    {/* MĹŻĹľeĹˇ tady nechat RoleGuard jen jako info, ale akce jsou aĹľ v modalu */}
                    <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                        <span className="badge bg-info-subtle text-dark">
                            Admin pĹ™ehled
                        </span>
                    </RoleGuard>
                </div>

                <h4 className="mt-4">Sestava:</h4>
                <AdminMatchRegistrationInfo
                    match={match}
                    onPlayerClick={setHistoryPlayer}
                />
            </div>

            {/* MODAL â€“ HISTORIE REGISTRACĂŤ HRĂÄŚE + akce bez omluvy */}
            {historyPlayer && (
                <AdminPlayerRegistrationHistoryModal
                    match={match}
                    player={historyPlayer}
                    saving={saving}
                    onClose={() => setHistoryPlayer(null)}
                    onMarkNoExcuse={handleMarkNoExcuseForHistoryPlayer}
                    onCancelNoExcuse={handleCancelNoExcuseForHistoryPlayer}
                />
            )}
        </div>
    );
};

export default AdminMatchInfo;


==================================================
src\components\admin\AdminMatchModal.jsx
==================================================

// src/components/admin/AdminMatchModal.jsx
import { useEffect, useState } from "react";
import MatchForm from "../matches/MatchForm";
import { validateMatch } from "../../validation/matchValidation";
import { tryClearDemoNotifications } from "../../api/demoApi";

// backend "yyyy-MM-dd HH:mm:ss" -> picker "YYYY-MM-DDTHH:mm"
const toPickerValue = (value) => {
    if (!value) return "";

    const s = String(value);

    // ISO
    if (s.includes("T")) {
        return s.slice(0, 16);
    }

    // backend "yyyy-MM-dd HH:mm:ss"
    return s.replace(" ", "T").slice(0, 16);
};

// picker "YYYY-MM-DDTHH:mm" -> backend "yyyy-MM-dd HH:mm:ss"
const toBackendDateTime = (valueString) => {
    if (!valueString) return null;

    // oÄŤekĂˇvĂˇme "YYYY-MM-DDTHH:mm"
    if (String(valueString).includes("T")) {
        const [date, time] = String(valueString).split("T");
        const [hh = "00", mm = "00"] = String(time).split(":");
        return `${date} ${hh}:${mm}:00`;
    }

    // fallback
    return String(valueString);
};

const AdminMatchModal = ({ match, show, onClose, onSave, saving, serverError }) => {
    if (!show) return null;

    const [values, setValues] = useState({
        id: match?.id ?? null,
        dateTime: match?.dateTime ? toPickerValue(match.dateTime) : "", // âś… string
        location: match?.location || "",
        description: match?.description || "",
        maxPlayers:
            match?.maxPlayers !== undefined && match?.maxPlayers !== null
                ? match.maxPlayers
                : "",
        price: match?.price !== undefined && match?.price !== null ? match.price : "",
        matchStatus: match?.matchStatus || null,
        cancelReason: match?.cancelReason || null,
        matchNumber: match?.matchNumber || null,
        seasonId: match?.seasonId || null,
    });

    const [errors, setErrors] = useState({});
    const isNew = !values.id;

    useEffect(() => {
        if (match) {
            setValues({
                id: match.id ?? null,
                dateTime: match?.dateTime ? toPickerValue(match.dateTime) : "",
                location: match.location || "",
                description: match.description || "",
                maxPlayers:
                    match.maxPlayers !== undefined && match.maxPlayers !== null
                        ? match.maxPlayers
                        : "",
                price: match.price !== undefined && match.price !== null ? match.price : "",
                matchStatus: match.matchStatus || null,
                cancelReason: match.cancelReason || null,
                matchNumber: match.matchNumber || null,
                seasonId: match.seasonId || null,
            });
        } else {
            setValues({
                id: null,
                dateTime: "",
                location: "",
                description: "",
                maxPlayers: "",
                price: "",
                matchStatus: null,
                cancelReason: null,
                matchNumber: null,
                seasonId: null,
            });
        }
        setErrors({});
    }, [match]);

    const handleChange = (patch) => {
        setValues((prev) => ({ ...prev, ...patch }));

        const key = Object.keys(patch)[0];
        setErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handleSubmit = async (e) => {
        e.preventDefault();

        const validationErrors = validateMatch(values);
        setErrors(validationErrors);

        if (Object.keys(validationErrors).length > 0) return;

        await tryClearDemoNotifications();

        const payload = {
            id: values.id,
            dateTime: toBackendDateTime(values.dateTime), // âś… string -> backend string
            location: values.location?.trim(),
            description:
                values.description && values.description.trim() !== ""
                    ? values.description.trim()
                    : null,
            maxPlayers:
                values.maxPlayers === "" || values.maxPlayers === null
                    ? null
                    : Number(values.maxPlayers),
            price:
                values.price === "" || values.price === null ? null : Number(values.price),
        };

        onSave(payload);
    };

    const handleClose = () => {
        if (!saving) onClose();
    };

    return (
        <>
            <div className="modal fade show d-block" tabIndex="-1" role="dialog" aria-modal="true">
                <div className="modal-dialog modal-lg" role="document">
                    <div className="modal-content">
                        <form onSubmit={handleSubmit} noValidate>
                            <div className="modal-header">
                                <div>
                                    <h5 className="modal-title">
                                        {isNew
                                            ? "VytvoĹ™it novĂ˝ zĂˇpas"
                                            : `Upravit zĂˇpas #${values.id}${values.matchNumber ? ` (ÄŤ. ${values.matchNumber} v sezĂłnÄ›)` : ""
                                            }`}
                                    </h5>
                                    {!isNew && values.seasonId && (
                                        <small className="text-muted">SezĂłna ID: {values.seasonId}</small>
                                    )}
                                </div>

                                <button
                                    type="button"
                                    className="btn-close"
                                    aria-label="Close"
                                    onClick={handleClose}
                                    disabled={saving}
                                />
                            </div>

                            <div className="modal-body">
                                {serverError && <div className="alert alert-danger">{serverError}</div>}

                                <MatchForm values={values} onChange={handleChange} errors={errors} />

                                {!isNew && (
                                    <div className="mt-3">
                                        <small className="text-muted">
                                            Stav zĂˇpasu: {values.matchStatus || "NENASTAVEN"}
                                            {values.cancelReason &&
                                                ` (dĹŻvod zruĹˇenĂ­: ${values.cancelReason})`}
                                        </small>
                                    </div>
                                )}
                            </div>

                            <div className="modal-footer">
                                <button
                                    type="button"
                                    className="btn btn-secondary"
                                    onClick={handleClose}
                                    disabled={saving}
                                >
                                    ZavĹ™Ă­t
                                </button>

                                <button type="submit" className="btn btn-primary" disabled={saving}>
                                    {saving
                                        ? isNew
                                            ? "VytvĂˇĹ™Ă­m zĂˇpasâ€¦"
                                            : "UklĂˇdĂˇm zmÄ›nyâ€¦"
                                        : isNew
                                            ? "VytvoĹ™it zĂˇpas"
                                            : "UloĹľit zmÄ›ny zĂˇpasu"}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div className="modal-backdrop fade show"></div>
        </>
    );
};

export default AdminMatchModal;


==================================================
src\components\admin\AdminMatchRegistrationInfo.jsx
==================================================

import React from "react";
import {
    RegisteredIcon,
    UnregisteredIcon,
    ExcusedIcon,
    ReservedIcon,
    NoResponseIcon,
    NoExcusedIcon,
    UserIcon,
    MoneyIcon,
} from "../../icons";
import { TeamDarkIcon, TeamLightIcon } from "../../icons";
import "../MatchRegistration/MatchRegistrationInfo.css";

const AdminMatchRegistrationInfo = ({ match, onPlayerClick }) => {
    const darkPlayers = match?.registeredDarkPlayers ?? [];
    const lightPlayers = match?.registeredLightPlayers ?? [];
    const reservedPlayers = match?.reservedPlayers ?? [];
    const excusedPlayers = match?.excusedPlayers ?? [];
    const unregisteredPlayers = match?.unregisteredPlayers ?? [];
    const substitudedPlayers = match?.substitutedPlayers ?? [];
    const noExcusedPlayers = match?.noExcusedPlayers ?? [];
    const noResponsePlayers = match?.noResponsePlayers ?? [];
    const noActionPlayers = match?.noActionPlayers ?? 0;

    const handlePlayerClick = (player) => {
        if (onPlayerClick) {
            onPlayerClick(player);
        }
    };

    return (
        <div className="match-reg-info">
                 {/* DARK */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <TeamDarkIcon className="match-reg-team-icon-dark" />
                    <span className="match-reg-team-count">
                        {match.inGamePlayersDark}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {darkPlayers.length === 0 && (
                        <li className="match-reg-player-empty">Ĺ˝ĂˇdnĂ­ hrĂˇÄŤi</li>
                    )}
                    {darkPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            {/* LIGHT */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <TeamLightIcon className="match-reg-team-icon-light" />
                    <span className="match-reg-team-count">
                        {match.inGamePlayersLight}
                    </span>
                </div>

                <ul className="match-reg-player-list mb-1">
                    {lightPlayers.length === 0 && (
                        <li className="match-reg-player-empty">Ĺ˝ĂˇdnĂ­ hrĂˇÄŤi</li>
                    )}
                    {lightPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            <div className="match-reg-other-col"></div>
            <h5>OstatnĂ­ statusy:</h5>
            <div className="match-reg-other-col"></div>

            {/* OdhlĂˇĹˇenĂ­ */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <UnregisteredIcon className="match-unregistered-r" />
                    OdhlĂˇĹˇenĂ­ -
                    <span className="match-reg-team-count">
                        {unregisteredPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {unregisteredPlayers.length === 0 && (
                        <li className="match-reg-player-empty">
                            nikdo se neodhlĂˇsil
                        </li>
                    )}
                    {unregisteredPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            {/* OMLUVENĂŤ */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <ExcusedIcon className="match-excused-r" />
                    OmluvenĂ­ -
                    <span className="match-reg-team-count">
                        {excusedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {excusedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">
                            nikdo se neomluvil
                        </li>
                    )}
                    {excusedPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            {/* NĂˇhradnĂ­ci */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <ReservedIcon className="match-reserved-r" />
                    NĂˇhradnĂ­cĂ­ -
                    <span className="match-reg-team-count">
                        {reservedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {reservedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">
                            ĹľĂˇdnĂ˝ nĂˇhradnĂ­k
                        </li>
                    )}
                    {reservedPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            <div className="match-reg-other-col"></div>

            {/* MoĹľnĂˇ */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <NoResponseIcon className="match-no-response-r" />
                    MoĹľnĂˇ budou -
                    <span className="match-reg-team-count">
                        {substitudedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {substitudedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">
                            ĹľĂˇdnĂ˝ nĂˇhradnĂ­k
                        </li>
                    )}
                    {substitudedPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            {/* Bez reakce */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <NoResponseIcon className="match-no-response-r" />
                    ZatĂ­m nereagovali -
                    <span className="match-reg-team-count">
                        {noActionPlayers}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {noActionPlayers === 0 && (
                        <li className="match-reg-player-empty">
                            vĹˇichni reagovali
                        </li>
                    )}

                    {noResponsePlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>

            {/* Bez omluvy */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <NoExcusedIcon className="match-no-excused-r" />
                    Bez omluvy -
                    <span className="match-reg-team-count">
                        {noExcusedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {noExcusedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">vĹˇe OK</li>
                    )}
                    {noExcusedPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-primary match-reg-player-button"
                                onClick={() => handlePlayerClick(p)}
                            >
                                {p.fullName}
                            </button>
                        </li>
                    ))}
                </ul>
            </div>
        </div>
    );
};

export default AdminMatchRegistrationInfo;


==================================================
src\components\admin\AdminNoExcuseModal.jsx
==================================================

import React, { useState } from "react";
import { useGlobalModal } from "../../hooks/useGlobalModal";

const AdminNoExcuseModal = ({ match, saving, onConfirm, onClose }) => {

    const [selectedPlayerId, setSelectedPlayerId] = useState("");
    const [note, setNote] = useState("NepĹ™iĹˇel bez omluvy");
    const registered = match?.registeredPlayers ?? [];

    const handleSubmit = (e) => {
        e.preventDefault();
        if (!selectedPlayerId) return;
        onConfirm(Number(selectedPlayerId), note);
    };

    return (
        <div className="modal d-block" tabIndex="-1">
            <div className="modal-dialog">
                <div className="modal-content">
                    <form onSubmit={handleSubmit}>
                        <div className="modal-header">
                            <h5 className="modal-title">Neomluvit hrĂˇÄŤe</h5>
                            <button
                                type="button"
                                className="btn-close"
                                onClick={onClose}
                                disabled={saving}
                            />
                        </div>
                        <div className="modal-body">
                            <p>
                                Vyber hrĂˇÄŤe, kterĂ©ho chceĹˇ oznaÄŤit jako{" "}
                                <strong>bez omluvy</strong> pro tento zĂˇpas.
                            </p>

                            <div className="mb-3">
                                <label className="form-label">HrĂˇÄŤ</label>
                                <select
                                    className="form-select"
                                    value={selectedPlayerId}
                                    onChange={(e) =>
                                        setSelectedPlayerId(e.target.value)
                                    }
                                    disabled={saving || registered.length === 0}
                                >
                                    <option value="">Vyber hrĂˇÄŤeâ€¦</option>
                                    {registered.map((p) => (
                                        <option key={p.id} value={p.id}>
                                            {p.fullName ??
                                                `${p.name} ${p.surname}`}
                                        </option>
                                    ))}
                                </select>
                            </div>
                            <div className="mb-3">
                                <label className="form-label">
                                    PoznĂˇmka (volitelnĂ©)
                                </label>
                                <textarea
                                    className="form-control"
                                    rows="2"
                                    value={note}
                                    onChange={(e) => setNote(e.target.value)}
                                    disabled={saving}
                                    placeholder="DĹŻvod neomluvenĂ­ hrĂˇÄŤeâ€¦"
                                />
                                <div className="form-text">
                                    PoznĂˇmka se uloĹľĂ­ k tomuto neomluvenĂ­ hrĂˇÄŤe.
                                </div>
                            </div>

                            {registered.length === 0 && (
                                <div className="alert alert-info">
                                    Pro tento zĂˇpas nejsou k dispozici ĹľĂˇdnĂ­
                                    registrovanĂ­ hrĂˇÄŤi.
                                </div>
                            )}
                        </div>
                        <div className="modal-footer">
                            <button
                                type="button"
                                className="btn btn-secondary"
                                onClick={onClose}
                                disabled={saving}
                            >
                                ZavĹ™Ă­t
                            </button>
                            <button
                                type="submit"
                                className="btn btn-danger"
                                disabled={
                                    saving ||
                                    !selectedPlayerId ||
                                    registered.length === 0
                                }
                            >
                                {saving
                                    ? "UklĂˇdĂˇmâ€¦"
                                    : "OznaÄŤit jako bez omluvy"}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    );
};

export default AdminNoExcuseModal;


==================================================
src\components\admin\AdminPlayerCard.jsx
==================================================

// src/components/admin/AdminPlayerCard.jsx
import { useState } from "react";
import RoleGuard from "../RoleGuard";
import AdminPlayerHistory from "./AdminPlayerHistory";
import AdminPlayerInactivityModal from "./AdminPlayerInactivityModal";
import { useGlobalDim } from "../../hooks/useGlobalDim";

import PlayerStats from "../players/PlayerStats";
import { usePlayerStatsAdmin } from "../../hooks/usePlayerStatsAdmin";

const statusTextMap = {
    PENDING: "ÄŤekĂˇ na schvĂˇlenĂ­",
    REJECTED: "zamĂ­tnuto",
    APPROVED: "schvĂˇleno",
};

const statusBadgeClassMap = {
    PENDING: "bg-warning text-dark",
    REJECTED: "bg-danger",
    APPROVED: "bg-success",
};

const AdminPlayerCard = ({
    player,
    isInactive,
    onApprove,
    onReject,
    onEdit,
    onDelete,
    onChangeUser,
    onInactivityChanged,
}) => {
    const [showHistory, setShowHistory] = useState(false);
    const [showInactivity, setShowInactivity] = useState(false);

    // âś… NOVÄš â€“ statistiky
    const [showStats, setShowStats] = useState(false);

    // dimujeme kdyĹľ je otevĹ™enĂˇ historie nebo statistiky
    const dimActive = showHistory || showStats;
    useGlobalDim(dimActive);

    const playerStatus = player.playerStatus ?? "PENDING";
    const statusText = statusTextMap[playerStatus] ?? playerStatus;
    const statusBadgeClass = statusBadgeClassMap[playerStatus] ?? "bg-secondary";

    const user = player.user || null;

    const canApproveByStatus =
        playerStatus === "PENDING" || playerStatus === "REJECTED";
    const canRejectByStatus =
        playerStatus === "PENDING" || playerStatus === "APPROVED";

    const toggleHistory = () => {
        setShowHistory((prev) => !prev);
        // aĹĄ nejsou otevĹ™enĂ© obÄ› sekce zĂˇroveĹ
        setShowStats(false);
    };

    const toggleStats = () => {
        setShowStats((prev) => !prev);
        setShowHistory(false);
    };

    // âś… statistiky naÄŤĂ­tĂˇme jen kdyĹľ jsou otevĹ™enĂ©
    const {
        stats,
        loading: statsLoading,
        error: statsError,
        reload: reloadStats,
    } = usePlayerStatsAdmin(player.id, { enabled: showStats });

    const cardClassName =
        "card shadow-sm mb-3 " +
        (dimActive ? "bg-white dim-keep " : "") +
        (showHistory ? "border border-3 border-info " : "") +
        (showStats ? "border border-3 border-primary " : "") +
        (isInactive ? "border-start border-4 border-warning" : "");

    const closeOverlays = () => {
        setShowHistory(false);
        setShowStats(false);
    };

    return (
        <>
            {dimActive && (
                <div
                    className="global-dim-click"
                    onClick={closeOverlays}
                    aria-hidden="true"
                />
            )}

            <div className={cardClassName}>
                {/* === ĹĂDEK 1 â€“ HRĂÄŚ === */}
                <div className="card-body border-bottom">
                    <div className="row align-items-center">
                        <div className="col-md-3 fw-bold">
                            {player.name} {player.surname?.toUpperCase()}
                            {player.nickname && (
                                <span className="text-muted ms-2">
                                    ({player.nickname})
                                </span>
                            )}
                        </div>

                        <div className="col-md-2">
                            <small className="text-muted d-block">TĂ˝m</small>
                            {player.team || "-"}
                        </div>

                        <div className="col-md-2">
                            <small className="text-muted d-block">Typ</small>
                            {player.type || "-"}
                        </div>

                        <div className="col-md-3">
                            <small className="text-muted d-block">Status</small>
                            <span className={`badge ${statusBadgeClass}`}>
                                {statusText}
                            </span>
                        </div>

                        <div className="col-md-2">
                            <small className="text-muted d-block">Neaktivita</small>
                            {isInactive ? (
                                <span className="badge bg-dark">NEAKTIVNĂŤ</span>
                            ) : (
                                <span className="text-muted">aktivnĂ­</span>
                            )}
                        </div>
                    </div>
                </div>

                {/* === ĹĂDEK 2 â€“ UĹ˝IVATEL === */}
                <div className="card-body border-bottom bg-light">
                    {user ? (
                        <div className="row">
                            <div className="col-md-4">
                                <small className="text-muted d-block">
                                    UĹľivatel
                                </small>
                                {user.name} {user.surname}
                            </div>

                            <div className="col-md-4">
                                <small className="text-muted d-block">
                                    E-mail
                                </small>
                                {user.email}
                            </div>

                            <div className="col-md-4">
                                <small className="text-muted d-block">
                                    ID uĹľivatele
                                </small>
                                {user.id}
                            </div>
                        </div>
                    ) : (
                        <span className="text-muted">
                            HrĂˇÄŤ nemĂˇ pĹ™iĹ™azenĂ©ho uĹľivatele.
                        </span>
                    )}
                </div>

                {/* === ĹĂDEK 3 â€“ AKCE === */}
                <div className="card-footer bg-white">
                    <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                        <div className="d-flex justify-content-end">
                            <div className="btn-group btn-group-sm flex-wrap">
                                <button
                                    type="button"
                                    className="btn btn-success"
                                    disabled={!onApprove || !canApproveByStatus}
                                    onClick={() => onApprove && onApprove(player.id)}
                                >
                                    SchvĂˇlit
                                </button>

                                <button
                                    type="button"
                                    className="btn btn-warning"
                                    disabled={!onReject || !canRejectByStatus}
                                    onClick={() => onReject && onReject(player.id)}
                                >
                                    ZamĂ­tnout
                                </button>

                                <button
                                    type="button"
                                    className="btn btn-primary"
                                    disabled={!onEdit}
                                    onClick={() => onEdit && onEdit(player)}
                                >
                                    Upravit
                                </button>

                                <button
                                    type="button"
                                    className="btn btn-outline-primary"
                                    disabled={!onChangeUser}
                                    onClick={() => onChangeUser && onChangeUser(player)}
                                >
                                    PĹ™evĂ©st
                                </button>

                                <button
                                    type="button"
                                    className="btn btn-outline-info"
                                    onClick={() => setShowInactivity(true)}
                                >
                                    Neaktivita
                                </button>

                                {/* âś… NOVĂ‰ â€“ STATISTIKY */}
                                <button
                                    type="button"
                                    className={
                                        "btn btn-outline-primary" +
                                        (showStats ? " active" : "")
                                    }
                                    onClick={toggleStats}
                                >
                                    {showStats ? "SkrĂ˝t statistiku" : "Statistika"}
                                </button>

                                <button
                                    type="button"
                                    className={
                                        "btn btn-outline-secondary" +
                                        (showHistory ? " active" : "")
                                    }
                                    onClick={toggleHistory}
                                >
                                    {showHistory ? "SkrĂ˝t historii" : "Historie"}
                                </button>

                                <button
                                    type="button"
                                    className="btn btn-danger"
                                    disabled={!onDelete}
                                    onClick={() => onDelete && onDelete(player.id)}
                                >
                                    Smazat
                                </button>
                            </div>
                        </div>
                    </RoleGuard>
                </div>

                {showStats && (
                    <div className="card-body bg-white">
                        <div className="d-flex justify-content-between align-items-center mb-2">
                            <h6 className="mb-0">Statistiky hrĂˇÄŤe #{player.id}</h6>
                            <button
                                type="button"
                                className="btn btn-sm btn-outline-secondary"
                                onClick={reloadStats}
                                disabled={statsLoading}
                                title="Obnovit statistiky"
                            >
                                Obnovit
                            </button>
                        </div>

                        <PlayerStats
                            stats={stats}
                            loading={statsLoading}
                            error={statsError}
                            onReload={reloadStats}
                        />
                    </div>
                )}

                {showHistory && (
                    <div className="card-body bg-white">
                        <h6 className="mb-2">Historie hrĂˇÄŤe #{player.id}</h6>
                        <AdminPlayerHistory playerId={player.id} />
                    </div>
                )}

                {showInactivity && (
                    <AdminPlayerInactivityModal
                        player={player}
                        onClose={() => setShowInactivity(false)}
                        onSaved={() => {
                            setShowInactivity(false);
                            onInactivityChanged && onInactivityChanged();
                        }}
                    />
                )}
            </div>
        </>
    );
};

export default AdminPlayerCard;


==================================================
src\components\admin\AdminPlayerEditModal.jsx
==================================================

// src/components/admin/AdminPlayerEditModal.jsx
import { useEffect, useState } from "react";
import PlayerProfileForm from "../settings/PlayerProfileForm";
import { validatePlayerProfile } from "../../validation/playerValidation";


const AdminPlayerEditModal = ({ player, show, onClose, onSave, saving }) => {
    

    if (!show || !player) {
        return null;
    }

    const [values, setValues] = useState({
        id: player.id ?? null,
        name: player.name || "",
        surname: player.surname || "",
        nickname: player.nickname || "",
        phoneNumber: player.phoneNumber || "",
        team: player.team || "",   
        type: player.type || "",
    });

    const [errors, setErrors] = useState({});

    // kdyĹľ se zmÄ›nĂ­ player, naÄŤti hodnoty znovu
    useEffect(() => {
        if (player) {
            setValues({
                id: player.id ?? null,
                name: player.name || "",
                surname: player.surname || "",
                nickname: player.nickname || "",
                phoneNumber: player.phoneNumber || "",
                team: player.team || "",
                type: player.type || "",
            });
            setErrors({});
        }
    }, [player]);

    const handleChange = (patch) => {
        setValues((prev) => ({ ...prev, ...patch }));

        const key = Object.keys(patch)[0];
        setErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handleSubmit = (e) => {
        e.preventDefault();

        const validationErrors = validatePlayerProfile(values);
        setErrors(validationErrors);

        if (Object.keys(validationErrors).length > 0) {
            return;
        }

        const payload = {
            id: values.id,
            name: values.name?.trim(),
            surname: values.surname?.trim(),
            nickname: values.nickname?.trim() || null,
            phoneNumber:
                values.phoneNumber && values.phoneNumber.trim() !== ""
                    ? values.phoneNumber.trim()
                    : null,
            team: values.team || null,
            type: values.type || null, 
        };

        onSave(payload);
    };

    const handleClose = () => {
        if (!saving) {
            onClose();
        }
    };

    return (
        <>
            <div
                className="modal fade show d-block"
                tabIndex="-1"
                role="dialog"
                aria-modal="true"
            >
                <div className="modal-dialog modal-lg" role="document">
                    <div className="modal-content">
                        <form onSubmit={handleSubmit} noValidate>
                            <div className="modal-header">
                                <h5 className="modal-title">
                                    Upravit hrĂˇÄŤe #{player.id}
                                </h5>
                                <button
                                    type="button"
                                    className="btn-close"
                                    aria-label="Close"
                                    onClick={handleClose}
                                    disabled={saving}
                                ></button>
                            </div>

                            <div className="modal-body">
                                <PlayerProfileForm
                                    values={values}      // đź‘ values uĹľ obsahuje team
                                    onChange={handleChange}
                                    errors={errors}
                                />
                            </div>

                            <div className="modal-footer">
                                <button
                                    type="button"
                                    className="btn btn-secondary"
                                    onClick={handleClose}
                                    disabled={saving}
                                >
                                    ZavĹ™Ă­t
                                </button>
                                <button
                                    type="submit"
                                    className="btn btn-primary"
                                    disabled={saving}
                                >
                                    {saving
                                        ? "UklĂˇdĂˇm zmÄ›nyâ€¦"
                                        : "UloĹľit zmÄ›ny hrĂˇÄŤe"}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div className="modal-backdrop fade show"></div>
        </>
    );
};

export default AdminPlayerEditModal;


==================================================
src\components\admin\AdminPlayerHistory.jsx
==================================================

// src/components/admin/AdminPlayerHistory.jsx
import { usePlayerHistoryAdmin } from "../../hooks/usePlayerHistoryAdmin";
import AdminPlayerHistoryCard from "./AdminPlayerHistoryCard";

const AdminPlayerHistory = ({ playerId }) => {
    const { history, loading, error } = usePlayerHistoryAdmin(playerId);

    if (!playerId) {
        return <p className="text-muted">HrĂˇÄŤ nenĂ­ vybrĂˇn.</p>;
    }

    if (loading) return <p>NaÄŤĂ­tĂˇm historii hrĂˇÄŤeâ€¦</p>;
    if (error) return <p className="text-danger">{error}</p>;

    if (!history || history.length === 0) {
        return <p>Ĺ˝ĂˇdnĂˇ historie zmÄ›n hrĂˇÄŤe.</p>;
    }

    // backend uĹľ vracĂ­ seĹ™azenĂ©, ale pro jistotu:
    const sortedHistory = [...history].sort(
        (a, b) => new Date(b.changedAt) - new Date(a.changedAt)
    );

    return (
        <div className="d-flex flex-column">
            {sortedHistory.map((item) => (
                <AdminPlayerHistoryCard key={item.id} item={item} />
            ))}
        </div>
    );
};

export default AdminPlayerHistory;


==================================================
src\components\admin\AdminPlayerHistoryCard.jsx
==================================================

// src/components/admin/AdminPlayerHistoryCard.jsx

const formatDateTime = (dt) => {
    if (!dt) return "-";
    const safe = dt.replace(" ", "T");
    const d = new Date(safe);
    if (Number.isNaN(d.getTime())) return dt;
    return d.toLocaleString("cs-CZ");
};

const playerStatusLabel = (status) => {
    switch (status) {
        case "PENDING":
            return "ÄŤekĂˇ na schvĂˇlenĂ­";
        case "APPROVED":
            return "schvĂˇleno";
        case "REJECTED":
            return "zamĂ­tnuto";
        default:
            return status || "-";
    }
};

const playerTypeLabel = (type) => {
    switch (type) {
        case "ADULT":
            return "DospÄ›lĂ˝";
        case "JUNIOR":
            return "Junior";
        default:
            return type || "-";
    }
};

const teamLabel = (team) => {
    switch (team) {
        case "DARK":
            return "DARK";
        case "LIGHT":
            return "LIGHT";
        default:
            return team || "-";
    }
};

const AdminPlayerHistoryCard = ({ item }) => {
    return (
        <div className="card mb-2 shadow-sm border border-2 border-secondary-subtle">
            <div className="card-body py-3 px-4">
                <div className="d-flex justify-content-between align-items-start">
                    {/* LEVĂ STRANA â€“ Ăşdaje hrĂˇÄŤe v ÄŤase zmÄ›ny */}
                    <div>
                        <div className="fw-bold fs-6 mb-1">
                            {item.name} {item.surname?.toUpperCase()}{" "}
                            {item.nickname && (
                                <span className="text-muted">
                                    ({item.nickname})
                                </span>
                            )}
                        </div>

                        <div className="small text-muted mb-2">
                            {formatDateTime(item.changedAt)}{" "}
                            {item.action && `â€˘ ${item.action}`}
                        </div>

                        {item.fullName && (
                            <div className="small mb-1">
                                <strong>CelĂ© jmĂ©no:</strong>{" "}
                                {item.fullName}
                            </div>
                        )}

                        <div className="small mb-1">
                            <strong>Telefon:</strong>{" "}
                            {item.phoneNumber || "-"}
                        </div>

                        <div className="small mb-1">
                            <strong>Typ:</strong>{" "}
                            {playerTypeLabel(item.type)}
                        </div>

                        <div className="small mb-1">
                            <strong>TĂ˝m:</strong>{" "}
                            {teamLabel(item.team)}
                        </div>

                        <div className="small mb-1">
                            <strong>Status hrĂˇÄŤe:</strong>{" "}
                            {playerStatusLabel(item.playerStatus)}
                        </div>

                        {item.originalTimestamp && (
                            <div className="small text-muted mt-2">
                                <strong>PĹŻvodnĂ­ zaloĹľenĂ­:</strong>{" "}
                                {formatDateTime(item.originalTimestamp)}
                            </div>
                        )}
                    </div>

                    {/* PRAVĂ STRANA â€“ audit info */}
                    <div className="text-end small text-muted ps-4 border-start">
                        <div>
                            <strong>User ID:</strong>{" "}
                            {item.userId ?? "-"}
                        </div>
                        <div>
                            <strong>Player ID:</strong>{" "}
                            {item.playerId ?? "-"}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default AdminPlayerHistoryCard;

==================================================
src\components\admin\AdminPlayerInactivityModal.jsx
==================================================

// src/components/admin/AdminPlayerInactivityModal.jsx
import { useEffect, useMemo, useState } from "react";
import {
    getInactivityByPlayerAdmin,
    createInactivityAdmin,
    updateInactivityAdmin,
    deleteInactivityAdmin,
} from "../../api/playerInactivityApi";
import { useNotification } from "../../context/NotificationContext";
import { useGlobalModal } from "../../hooks/useGlobalModal";
import DatePicker from "../forms/DatePicker";

// z backendu "yyyy-MM-dd HH:mm:ss" nebo ISO -> "YYYY-MM-DD"
const toLocalDateValue = (value) => {
    if (!value) return "";
    const s = String(value);
    return s.slice(0, 10);
};

// "YYYY-MM-DD" -> Date (LOCAL, bez timezone posunu)
const parseLocalDate = (val) => {
    if (!val) return null;
    const s = String(val).trim();
    const m = /^(\d{4})-(\d{2})-(\d{2})$/.exec(s);
    if (!m) return null;
    const y = Number(m[1]);
    const mo = Number(m[2]) - 1;
    const d = Number(m[3]);
    const date = new Date(y, mo, d, 0, 0, 0, 0);
    return Number.isNaN(date.getTime()) ? null : date;
};

// "YYYY-MM-DD" -> "YYYY-MM-DDTHH:mm:ss" (LocalDateTime pro backend)

const toBackendStartOfDay = (dateStr) => (dateStr ? `${dateStr}T00:00:00` : null);
const toBackendEndOfDay = (dateStr) => (dateStr ? `${dateStr}T23:59:59` : null);


const AdminPlayerInactivityModal = ({ player, onClose, onSaved }) => {
    useGlobalModal(true);

    const { showNotification } = useNotification();

    const [periods, setPeriods] = useState([]);
    const [loading, setLoading] = useState(true);
    const [saving, setSaving] = useState(false);
    const [error, setError] = useState(null);

    const [editing, setEditing] = useState(null);
    const [formValues, setFormValues] = useState({
        inactiveFrom: "", // "YYYY-MM-DD"
        inactiveTo: "",   // "YYYY-MM-DD"
        inactivityReason: "",
    });

    const [touched, setTouched] = useState({
        inactiveFrom: false,
        inactiveTo: false,
        inactivityReason: false,
    });

    const [fieldErrors, setFieldErrors] = useState({
        inactiveFrom: "",
        inactiveTo: "",
        inactivityReason: "",
    });

    useEffect(() => {
        if (!player?.id) return;

        const load = async () => {
            try {
                setLoading(true);
                setError(null);
                const data = await getInactivityByPlayerAdmin(player.id);
                setPeriods(data || []);
            } catch (err) {
                console.error(err);
                setError(
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st obdobĂ­ neaktivity hrĂˇÄŤe."
                );
            } finally {
                setLoading(false);
            }
        };

        load();
    }, [player?.id]);

    const resetValidation = () => {
        setTouched({
            inactiveFrom: false,
            inactiveTo: false,
            inactivityReason: false,
        });
        setFieldErrors({
            inactiveFrom: "",
            inactiveTo: "",
            inactivityReason: "",
        });
    };

    const startCreate = () => {
        setEditing(null);
        setFormValues({
            inactiveFrom: "",
            inactiveTo: "",
            inactivityReason: "",
        });
        resetValidation();
    };

    const startEdit = (period) => {
        setEditing(period);
        setFormValues({
            inactiveFrom: toLocalDateValue(period.inactiveFrom),
            inactiveTo: toLocalDateValue(period.inactiveTo),
            inactivityReason: period.inactivityReason || "",
        });
        resetValidation();
    };

    const handleTextChange = (e) => {
        const { name, value } = e.target;
        setFormValues((prev) => ({ ...prev, [name]: value }));
        setFieldErrors((prev) => ({ ...prev, [name]: "" }));
    };

    const handleBlur = (e) => {
        const { name } = e.target;
        setTouched((prev) => ({ ...prev, [name]: true }));
    };

    const handleDateChange = (name) => (valueString) => {
        setFormValues((prev) => ({ ...prev, [name]: valueString }));
        setFieldErrors((prev) => ({ ...prev, [name]: "" }));
    };

    const validate = useMemo(() => {
        return (values, allPeriods, editingPeriod) => {
            const nextErrors = {
                inactiveFrom: "",
                inactiveTo: "",
                inactivityReason: "",
            };

            const from = String(values.inactiveFrom ?? "").trim();
            const to = String(values.inactiveTo ?? "").trim();
            const reason = String(values.inactivityReason ?? "").trim();

            if (!from) nextErrors.inactiveFrom = "VyplĹte zaÄŤĂˇtek neaktivity.";
            if (!to) nextErrors.inactiveTo = "VyplĹte konec neaktivity.";
            if (!reason) nextErrors.inactivityReason = "DĹŻvod neaktivity je povinnĂ˝.";

            const fromDate = parseLocalDate(from);
            const toDate = parseLocalDate(to);

            if (from && !fromDate) nextErrors.inactiveFrom = "NeplatnĂ˝ formĂˇt data.";
            if (to && !toDate) nextErrors.inactiveTo = "NeplatnĂ˝ formĂˇt data.";

            // date-only: povolĂ­me stejnĂ˝ den (od 00:00 do 23:59:59)
            if (fromDate && toDate && fromDate > toDate) {
                nextErrors.inactiveTo = "Konec musĂ­ bĂ˝t stejnĂ˝ den nebo po zaÄŤĂˇtku.";
            }

            if (reason && reason.length > 255) {
                nextErrors.inactivityReason = "MaximĂˇlnĂ­ dĂ©lka je 255 znakĹŻ.";
            }

            // pĹ™ekryvy intervalĹŻ â€” porovnĂˇvĂˇme date-only, ale logiku drĹľĂ­me jako [from, to]
            // protoĹľe do backendu jde do konce dne, pĹ™ekryv date-only je ok.
            if (fromDate && toDate && !nextErrors.inactiveFrom && !nextErrors.inactiveTo) {
                const overlaps = (aFrom, aTo, bFrom, bTo) => aFrom <= bTo && bFrom <= aTo;

                const hasOverlap = (allPeriods || []).some((p) => {
                    if (editingPeriod && p.id === editingPeriod.id) return false;

                    const pFrom = parseLocalDate(toLocalDateValue(p.inactiveFrom));
                    const pTo = parseLocalDate(toLocalDateValue(p.inactiveTo));
                    if (!pFrom || !pTo) return false;

                    return overlaps(fromDate, toDate, pFrom, pTo);
                });

                if (hasOverlap) {
                    nextErrors.inactiveFrom = "ObdobĂ­ se pĹ™ekrĂ˝vĂˇ s existujĂ­cĂ­m zĂˇznamem.";
                    nextErrors.inactiveTo = "ObdobĂ­ se pĹ™ekrĂ˝vĂˇ s existujĂ­cĂ­m zĂˇznamem.";
                }
            }

            return nextErrors;
        };
    }, []);

    const hasAnyError = (errs) => Object.values(errs).some((v) => !!v);

    const handleSubmit = async (e) => {
        e.preventDefault();

        setTouched({
            inactiveFrom: true,
            inactiveTo: true,
            inactivityReason: true,
        });

        const errs = validate(formValues, periods, editing);
        setFieldErrors(errs);

        if (hasAnyError(errs)) {
            showNotification("Zkontrolujte prosĂ­m vyplnÄ›nĂˇ pole.", "warning");
            return;
        }

        try {
            setSaving(true);
            setError(null);

            const payload = {
                playerId: player.id,
                inactiveFrom: toBackendStartOfDay(formValues.inactiveFrom), // âś… 00:00:00
                inactiveTo: toBackendEndOfDay(formValues.inactiveTo),       // âś… 23:59:59
                inactivityReason: formValues.inactivityReason.trim(),
            };

            let result;
            if (editing) {
                result = await updateInactivityAdmin(editing.id, payload);
                showNotification("ObdobĂ­ neaktivity bylo upraveno.", "success");
            } else {
                result = await createInactivityAdmin(payload);
                showNotification("ObdobĂ­ neaktivity bylo vytvoĹ™eno.", "success");
            }

            setPeriods((prev) =>
                editing ? prev.map((p) => (p.id === result.id ? result : p)) : [...prev, result]
            );

            startCreate();
            onSaved && onSaved();
        } catch (err) {
            console.error(err);
            setError(err?.response?.data?.message || "UloĹľenĂ­ obdobĂ­ neaktivity se nezdaĹ™ilo.");
        } finally {
            setSaving(false);
        }
    };

    const handleDelete = async (id) => {
        if (!window.confirm("Opravdu chceĹˇ smazat toto obdobĂ­ neaktivity?")) return;

        try {
            setSaving(true);
            setError(null);
            await deleteInactivityAdmin(id);
            showNotification("ObdobĂ­ neaktivity bylo smazĂˇno.", "success");

            setPeriods((prev) => prev.filter((p) => p.id !== id));
            onSaved && onSaved();
        } catch (err) {
            console.error(err);
            setError(err?.response?.data?.message || "SmazĂˇnĂ­ obdobĂ­ neaktivity se nezdaĹ™ilo.");
        } finally {
            setSaving(false);
        }
    };

    const formatDate = (dt) => {
        const v = toLocalDateValue(dt);
        const d = parseLocalDate(v);
        return d ? d.toLocaleDateString("cs-CZ") : v;
    };

    // âś… ĹľĂˇdnĂ© zelenĂ© fajfky
    const inputClass = (name) => {
        const base = "form-control";
        if (!touched[name]) return base;
        return fieldErrors[name] ? `${base} is-invalid` : base;
    };

    return (
        <div className="modal d-block" tabIndex="-1">
            <div className="modal-dialog modal-lg">
                <div className="modal-content">
                    <div className="modal-header">
                        <h5 className="modal-title">
                            Neaktivita hrĂˇÄŤe â€“ {player.name} {player.surname}
                        </h5>
                        <button type="button" className="btn-close" onClick={onClose} disabled={saving} />
                    </div>

                    <div className="modal-body">
                        {loading && <p>NaÄŤĂ­tĂˇm obdobĂ­ neaktivityâ€¦</p>}
                        {error && <div className="alert alert-danger">{error}</div>}

                        {!loading && (
                            <>
                                <h6 className="mb-2">
                                    {editing ? "Upravit obdobĂ­ neaktivity" : "PĹ™idat novĂ© obdobĂ­ neaktivity"}
                                </h6>

                                <form className="row g-3 mb-4" onSubmit={handleSubmit} noValidate>
                                    <div className="col-md-6">
                                        <label className="form-label" htmlFor="inactiveFrom">ZaÄŤĂˇtek</label>
                                        <DatePicker
                                            id="inactiveFrom"
                                            name="inactiveFrom"
                                            value={formValues.inactiveFrom}
                                            onChange={handleDateChange("inactiveFrom")}
                                            onBlur={handleBlur}
                                            disabled={saving}
                                            className={inputClass("inactiveFrom")}
                                            required
                                        />
                                        {touched.inactiveFrom && fieldErrors.inactiveFrom && (
                                            <div className="invalid-feedback d-block">{fieldErrors.inactiveFrom}</div>
                                        )}
                                    </div>

                                    <div className="col-md-6">
                                        <label className="form-label" htmlFor="inactiveTo">Konec</label>
                                        <DatePicker
                                            id="inactiveTo"
                                            name="inactiveTo"
                                            value={formValues.inactiveTo}
                                            onChange={handleDateChange("inactiveTo")}
                                            onBlur={handleBlur}
                                            disabled={saving}
                                            className={inputClass("inactiveTo")}
                                            required
                                        />
                                        {touched.inactiveTo && fieldErrors.inactiveTo && (
                                            <div className="invalid-feedback d-block">{fieldErrors.inactiveTo}</div>
                                        )}
                                    </div>

                                    <div className="col-12">
                                        <label className="form-label">DĹŻvod neaktivity</label>
                                        <input
                                            type="text"
                                            name="inactivityReason"
                                            className={inputClass("inactivityReason")}
                                            value={formValues.inactivityReason}
                                            onChange={handleTextChange}
                                            onBlur={handleBlur}
                                            disabled={saving}
                                            maxLength={255}
                                        />
                                        {touched.inactivityReason && fieldErrors.inactivityReason && (
                                            <div className="invalid-feedback d-block">{fieldErrors.inactivityReason}</div>
                                        )}
                                        {!fieldErrors.inactivityReason && (
                                            <div className="form-text">MaximĂˇlnÄ› 255 znakĹŻ.</div>
                                        )}
                                    </div>

                                    <div className="col-12 d-flex gap-2">
                                        <button type="submit" className="btn btn-primary" disabled={saving}>
                                            {saving ? "UklĂˇdĂˇmâ€¦" : editing ? "UloĹľit zmÄ›ny" : "PĹ™idat obdobĂ­"}
                                        </button>

                                        {editing && (
                                            <button type="button" className="btn btn-secondary" onClick={startCreate} disabled={saving}>
                                                ZruĹˇit Ăşpravu
                                            </button>
                                        )}
                                    </div>
                                </form>

                                <hr />

                                <h6>ExistujĂ­cĂ­ obdobĂ­</h6>
                                {periods.length === 0 && (
                                    <p className="text-muted">HrĂˇÄŤ nemĂˇ ĹľĂˇdnĂˇ obdobĂ­ neaktivity.</p>
                                )}

                                {periods.length > 0 && (
                                    <div className="table-responsive">
                                        <table className="table table-sm table-striped">
                                            <thead>
                                                <tr>
                                                    <th>Od</th>
                                                    <th>Do</th>
                                                    <th>DĹŻvod</th>
                                                    <th className="text-end">Akce</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {periods.map((p) => (
                                                    <tr key={p.id}>
                                                        <td>{formatDate(p.inactiveFrom)}</td>
                                                        <td>{formatDate(p.inactiveTo)}</td>
                                                        <td>{p.inactivityReason || <span className="text-muted">neuveden</span>}</td>
                                                        <td className="text-end">
                                                            <button
                                                                className="btn btn-sm btn-outline-primary me-2"
                                                                onClick={() => startEdit(p)}
                                                                disabled={saving}
                                                            >
                                                                Upravit
                                                            </button>
                                                            <button
                                                                className="btn btn-sm btn-outline-danger"
                                                                onClick={() => handleDelete(p.id)}
                                                                disabled={saving}
                                                            >
                                                                Smazat
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                )}
                            </>
                        )}
                    </div>

                    <div className="modal-footer">
                        <button type="button" className="btn btn-secondary" onClick={onClose} disabled={saving}>
                            ZavĹ™Ă­t
                        </button>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default AdminPlayerInactivityModal;


==================================================
src\components\admin\AdminPlayerRegistrationHistory.jsx
==================================================

// src/components/admin/AdminPlayerRegistationHistory.jsx

import { usePlayerRegistrationHistoryAdmin } from "../../hooks/usePlayerRegistrationHistoryAdmin";
import {
    excuseReasonLabel,
    formatDateTime,
    statusLabel,
    teamLabel,
} from "../../utils/registrationFormatter";

const AdminPlayerRegistrationHistory = ({ matchId, playerId }) => {
    const { history, loading, error } =
        usePlayerRegistrationHistoryAdmin(matchId, playerId);

    if (loading) return <p>NaÄŤĂ­tĂˇm historiiâ€¦</p>;
    if (error) return <p className="text-danger">{error}</p>;

    if (!history || history.length === 0) {
        return <p>Ĺ˝ĂˇdnĂˇ historie registracĂ­.</p>;
    }

    const sortedHistory = [...history].sort(
        (a, b) => new Date(b.changedAt) - new Date(a.changedAt)
    );

    return (
        <div className="table-responsive">
            <table className="table table-sm table-striped table-hover align-middle">
                <thead className="table-light">
                    <tr>
                        <th>Datum zmÄ›ny</th>
                        <th>Status</th>
                        <th>TĂ˝m</th>
                        <th>ZmÄ›nil</th>
                        <th>PoznĂˇmka</th>
                    </tr>
                </thead>
                <tbody>
                    {sortedHistory.map((item) => (
                        <tr key={item.id}>
                            <td>{formatDateTime(item.changedAt)}</td>
                            <td>
                                <span className="text">
                                    <strong>{statusLabel(item.status)}</strong>
                                </span>
                            </td>
                            <td>{teamLabel(item.team)}</td>
                            <td>{item.createdBy}</td>
                            <td>
                                {excuseReasonLabel(item.excuseReason)}{" "}
                                {" - "}
                                {item.adminNote || item.excuseNote}
                            </td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    );
};

export default AdminPlayerRegistrationHistory;


==================================================
src\components\admin\AdminPlayerRegistrationHistoryModal.jsx
==================================================

// src/components/admin/AdminPlayerRegistrationHistoryModal.jsx
import React, { useState } from "react";
import AdminPlayerRegistrationHistory from "./AdminPlayerRegistrationHistory";
import { useGlobalModal } from "../../hooks/useGlobalModal";

const AdminPlayerRegistrationHistoryModal = ({
    match,
    player,
    saving,
    onClose,
    onMarkNoExcuse,
    onCancelNoExcuse,
}) => {

    if (!player || !match) return null;

    const registeredPlayers = match.registeredPlayers ?? [];
    const noExcusedPlayers = match.noExcusedPlayers ?? [];

    const isRegistered = registeredPlayers.some((p) => p.id === player.id);
    const isNoExcused = noExcusedPlayers.some((p) => p.id === player.id);

    const [showCancelNote, setShowCancelNote] = useState(false);
    const [cancelNote, setCancelNote] = useState(
        "Omluven - nakonec opravdu nemohl"
    );

    const handleMarkNoExcuseClick = () => {
        if (!onMarkNoExcuse) return;
        // poznĂˇmku mĹŻĹľeĹˇ kdykoli pĹ™edÄ›lat na vlastnĂ­ textarea
        onMarkNoExcuse("Admin: bez omluvy");
    };

    const handleStartCancel = () => {
        setShowCancelNote(true);
    };

    const handleConfirmCancel = () => {
        if (!onCancelNoExcuse) return;
        onCancelNoExcuse(cancelNote);
        setShowCancelNote(false);
    };

    const playerName = player.fullName ?? `${player.name} ${player.surname}`;

    return (
        <div className="modal d-block" tabIndex="-1">
            <div className="modal-dialog modal-lg">
                <div className="modal-content">
                    <div className="modal-header">
                        <h5 className="modal-title">
                            Historie registracĂ­ â€“ {playerName}
                        </h5>
                        <button
                            type="button"
                            className="btn-close"
                            onClick={onClose}
                            disabled={saving}
                        />
                    </div>
                    <div className="modal-body">
                        {/* đź”ą AkÄŤnĂ­ tlaÄŤĂ­tka pro tohoto hrĂˇÄŤe */}
                        <div className="mb-3">
                            {isRegistered && !isNoExcused && (
                                <button
                                    type="button"
                                    className="btn btn-sm btn-outline-danger me-2"
                                    disabled={saving}
                                    onClick={handleMarkNoExcuseClick}
                                >
                                    OznaÄŤit jako bez omluvy
                                </button>
                            )}

                            {isNoExcused && (
                                <div className="d-flex flex-column flex-md-row align-items-start gap-2">
                                    {!showCancelNote && (
                                        <button
                                            type="button"
                                            className="btn btn-sm btn-outline-secondary"
                                            disabled={saving}
                                            onClick={handleStartCancel}
                                        >
                                            ZruĹˇit neomluvenĂ­
                                        </button>
                                    )}

                                    {showCancelNote && (
                                        <div className="d-flex flex-column flex-md-row align-items-start gap-2 flex-grow-1">
                                            <textarea
                                                className="form-control"
                                                rows={2}
                                                value={cancelNote}
                                                onChange={(e) =>
                                                    setCancelNote(
                                                        e.target.value
                                                    )
                                                }
                                                disabled={saving}
                                            />
                                            <button
                                                type="button"
                                                className="btn btn-sm btn-primary mt-2 mt-md-0"
                                                disabled={saving}
                                                onClick={handleConfirmCancel}
                                            >
                                                Potvrdit
                                            </button>
                                        </div>
                                    )}
                                </div>
                            )}

                            {!isRegistered && !isNoExcused && (
                                <p className="text-muted mb-0">
                                    Pro tohoto hrĂˇÄŤe nenĂ­ aktuĂˇlnÄ› k dispozici
                                    akce â€žbez omluvyâ€ś / â€žzruĹˇit neomluvenĂ­â€ś.
                                </p>
                            )}
                        </div>

                        {/* đź”ą Tabulka historie */}
                        <AdminPlayerRegistrationHistory
                            matchId={match.id}
                            playerId={player.id}
                        />
                    </div>
                    <div className="modal-footer">
                        <button
                            type="button"
                            className="btn btn-secondary"
                            onClick={onClose}
                            disabled={saving}
                        >
                            ZavĹ™Ă­t
                        </button>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default AdminPlayerRegistrationHistoryModal;


==================================================
src\components\admin\AdminPlayerRow.jsx
==================================================

// src/components/admin/AdminPlayerRow.jsx
import RoleGuard from "../RoleGuard";

/**
 * Jeden Ĺ™Ăˇdek v admin tabulce hrĂˇÄŤĹŻ.
 *
 * OdpovÄ›dnost:
 *  - zobrazit zĂˇkladnĂ­ informace o hrĂˇÄŤi
 *  - VĹ˝DY zobrazit vĹˇechna akÄŤnĂ­ tlaÄŤĂ­tka
 *  - podle stavu hrĂˇÄŤe pouze povolit / zakĂˇzat akce (disabled)
 *  - akce jsou dostupnĂ© pouze pro roli ADMIN
 *
 * TlaÄŤĂ­tka:
 *  - SchvĂˇlit (approve)   â†’ onApprove(player.id)
 *  - ZamĂ­tnout (reject)   â†’ onReject(player.id)
 *  - Upravit (edit)       â†’ onEdit(player)
 *  - ZmÄ›nit uĹľivatele     â†’ onChangeUser(player)
 *  - Smazat (delete)      â†’ onDelete(player.id)
 *
 * Pokud handler nenĂ­ pĹ™edĂˇn, tlaÄŤĂ­tko se zobrazĂ­, ale je disabled.
 */
const statusTextMap = {
    PENDING: "ÄŤekĂˇ na schvĂˇlenĂ­",
    REJECTED: "zamĂ­tnuto",
    APPROVED: "schvĂˇleno",
};

const AdminPlayerRow = ({
    player,
    onApprove,
    onReject,
    onEdit,
    onDelete,
    onChangeUser,
}) => {
    const playerStatus = player.playerStatus ?? "PENDING";
    const statusText = statusTextMap[playerStatus] ?? playerStatus;

    // PovolenĂ­ akcĂ­ dle stavu hrĂˇÄŤe
    const canApproveByStatus =
        playerStatus === "PENDING" || playerStatus === "REJECTED";

    const canRejectByStatus =
        playerStatus === "PENDING" || playerStatus === "APPROVED";

    return (
        <tr>
            <td>{player.id}</td>
            <td>
                {player.name} {player.surname?.toUpperCase()}
            </td>
            <td>{player.nickname || "-"}</td>
            <td>{player.team || "-"}</td>
            <td>{player.type || "-"}</td>
            <td>{statusText}</td>
            <td>{player.phoneNumber || "-"}</td>

            <td>
                {/* Akce jsou viditelnĂ© pouze pro ADMIN */}
                <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                    <div className="btn-group btn-group-sm" role="group">
                        {/* SCHVĂLIT */}
                        <button
                            type="button"
                            className="btn btn-success"
                            disabled={!onApprove || !canApproveByStatus}
                            title={
                                !canApproveByStatus
                                    ? "HrĂˇÄŤe nelze v tomto stavu schvĂˇlit"
                                    : undefined
                            }
                            onClick={() =>
                                onApprove && onApprove(player.id)
                            }
                        >
                            SchvĂˇlit
                        </button>

                        {/* ZAMĂŤTNOUT */}
                        <button
                            type="button"
                            className="btn btn-warning"
                            disabled={!onReject || !canRejectByStatus}
                            title={
                                !canRejectByStatus
                                    ? "HrĂˇÄŤe nelze v tomto stavu zamĂ­tnout"
                                    : undefined
                            }
                            onClick={() =>
                                onReject && onReject(player.id)
                            }
                        >
                            ZamĂ­tnout
                        </button>

                        {/* UPRAVIT */}
                        <button
                            type="button"
                            className="btn btn-primary"
                            disabled={!onEdit}
                            onClick={() => onEdit && onEdit(player)}
                        >
                            Upravit
                        </button>

                        {/* ZMÄšNIT UĹ˝IVATELE */}
                        <button
                            type="button"
                            className="btn btn-outline-secondary"
                            disabled={!onChangeUser}
                            onClick={() =>
                                onChangeUser && onChangeUser(player)
                            }
                        >
                            ZmÄ›nit uĹľivatele
                        </button>

                        {/* SMAZAT */}
                        <button
                            type="button"
                            className="btn btn-danger"
                            disabled={!onDelete}
                            onClick={() =>
                                onDelete && onDelete(player.id)
                            }
                        >
                            Smazat
                        </button>
                    </div>
                </RoleGuard>
            </td>
        </tr>
    );
};

export default AdminPlayerRow;


==================================================
src\components\admin\AdminPlayersTable.css
==================================================

/* AdminPlayersTable.css
/* MobilnĂ­ rozbitĂ­ tabulky na "karty" */
@media (max-width: 768px) {

    .admin-players-table table,
    .admin-players-table thead,
    .admin-players-table tbody,
    .admin-players-table th,
    .admin-players-table td,
    .admin-players-table tr {
        display: block;
        width: 100%;
    }

    /* Schovat hlaviÄŤku tabulky na mobilech */
    .admin-players-table thead {
        display: none;
    }

    /* KaĹľdĂ˝ <tr> jako karta */
    .admin-players-table tr {
        margin-bottom: 1rem;
        border: 1px solid #dee2e6;
        border-radius: 0.5rem;
        padding: 0.5rem 0.75rem;
        background-color: #fff;
    }

    /* ZruĹˇit pĹŻvodnĂ­ bordery bunÄ›k */
    .admin-players-table td {
        border: none !important;
        padding: 0.25rem 0;
    }

    /* PoslednĂ­ <td> = akce â€“ trochu odsazenĂ­ nahoĹ™e */
    .admin-players-table td:last-child {
        margin-top: 0.5rem;
    }

    /* TlaÄŤĂ­tka pĹ™es celou ĹˇĂ­Ĺ™ku, hezÄŤĂ­ zalomenĂ­ */
    .admin-players-table td:last-child .btn-group {
        width: 100%;
        flex-wrap: wrap;
        gap: 0.25rem;
    }

    .admin-players-table td:last-child .btn-group .btn {
        flex: 1 1 48%;
    }
}

==================================================
src\components\admin\AdminPlayersTable.jsx
==================================================

// src/components/admin/AdminPlayersTable.jsx
import { useState } from "react";
import AdminPlayerCard from "./AdminPlayerCard";
import { usePlayerInactivityPeriodsAdmin } from "../../hooks/usePlayerInactivityPeriodsAdmin";

const FILTERS = {
    ALL: "ALL",
    APPROVED: "APPROVED",
    PENDING: "PENDING",
    REJECTED: "REJECTED",
    INACTIVE: "INACTIVE",
};

// PomocnĂˇ funkce â€“ filtr podle statusu + neaktivity
const playerPassesFilter = (player, isInactive, filter) => {
    const status = player.playerStatus;

    switch (filter) {
        case FILTERS.APPROVED:
            // aktivnĂ­ = schvĂˇlenĂ˝ a prĂˇvÄ› nenĂ­ v neaktivitÄ›
            return status === "APPROVED" && !isInactive;

        case FILTERS.INACTIVE:
            // filtr ÄŤistÄ› na aktuĂˇlnÄ› neaktivnĂ­ hrĂˇÄŤe
            return isInactive === true;

        case FILTERS.PENDING:
            return status === "PENDING" || status === "NEW";

        case FILTERS.REJECTED:
            return status === "REJECTED";

        case FILTERS.ALL:
        default:
            return true;
    }
};

const AdminPlayersTable = ({
    players,
    loading,
    error,
    onApprove,
    onReject,
    onEdit,
    onDelete,
    onChangeUser,
}) => {
    const [filter, setFilter] = useState(FILTERS.ALL);

    // naÄŤtenĂ­ vĹˇech obdobĂ­ neaktivity
    const {
        periods,
        loading: inactivityLoading,
        error: inactivityError,
        reload: reloadInactivity,       // đź‘ DĹ®LEĹ˝ITĂ‰: pĹ™idĂˇme reload z hooku
    } = usePlayerInactivityPeriodsAdmin();

    // kdyĹľ se naÄŤĂ­tajĂ­ hrĂˇÄŤi nebo neaktivita â†’ loader
    if (loading || inactivityLoading) {
        return <p>NaÄŤĂ­tĂˇm hrĂˇÄŤeâ€¦</p>;
    }

    if (error) {
        return (
            <div className="alert alert-danger" role="alert">
                {error}
            </div>
        );
    }

    if (inactivityError) {
        return (
            <div className="alert alert-danger" role="alert">
                {inactivityError}
            </div>
        );
    }

    if (!players || players.length === 0) {
        return <p>V systĂ©mu zatĂ­m nejsou ĹľĂˇdnĂ­ hrĂˇÄŤi.</p>;
    }

    // pĹ™ipravĂ­me mapu playerId -> isInactiveNow (abychom to nepoÄŤĂ­tali dokola)
    const now = new Date();
    const inactivityMap = new Map();

    if (periods && periods.length > 0) {
        periods.forEach((p) => {
            const playerId = p.playerId;
            if (!playerId) return;

            const rawFrom = p.inactiveFrom;
            const rawTo = p.inactiveTo;
            if (!rawFrom || !rawTo) return;

            // LocalDateTime mĹŻĹľe bĂ˝t "2026-02-10T10:00:00" nebo "2026-02-10 10:00:00"
            const from = new Date(
                typeof rawFrom === "string"
                    ? rawFrom.replace(" ", "T")
                    : rawFrom
            );
            const to = new Date(
                typeof rawTo === "string"
                    ? rawTo.replace(" ", "T")
                    : rawTo
            );

            if (isNaN(from.getTime()) || isNaN(to.getTime())) return;

            const isInThisInterval = from <= now && to >= now;

            if (isInThisInterval) {
                inactivityMap.set(playerId, true);
            }
        });
    }

    const isPlayerInactiveNow = (playerId) =>
        inactivityMap.get(playerId) === true;

    // zĂˇkladnĂ­ Ĺ™azenĂ­ podle pĹ™Ă­jmenĂ­
    const sortedPlayers = players
        .slice()
        .sort((a, b) =>
            (a.surname || "").localeCompare(b.surname || "", "cs", {
                sensitivity: "base",
            })
        );

    // poÄŤty pro badge u jednotlivĂ˝ch filtrĹŻ
    const counts = {
        all: sortedPlayers.length,
        active: sortedPlayers.filter((p) =>
            playerPassesFilter(p, isPlayerInactiveNow(p.id), FILTERS.APPROVED)
        ).length,
        inactive: sortedPlayers.filter((p) =>
            playerPassesFilter(p, isPlayerInactiveNow(p.id), FILTERS.INACTIVE)
        ).length,
        pending: sortedPlayers.filter((p) =>
            playerPassesFilter(p, isPlayerInactiveNow(p.id), FILTERS.PENDING)
        ).length,
        rejected: sortedPlayers.filter((p) =>
            playerPassesFilter(p, isPlayerInactiveNow(p.id), FILTERS.REJECTED)
        ).length,
    };

    const filteredPlayers = sortedPlayers.filter((p) =>
        playerPassesFilter(p, isPlayerInactiveNow(p.id), filter)
    );

    return (
        <div className="d-flex flex-column gap-3">
            {/* FiltrovacĂ­ tlaÄŤĂ­tka â€“ stejnĂ© chovĂˇnĂ­ jako u PastMatches */}
            <div className="d-flex justify-content-center mb-3">
                <div
                    className="btn-group"
                    role="group"
                    aria-label="Filtr hrĂˇÄŤĹŻ"
                >
                    <button
                        type="button"
                        className={
                            filter === FILTERS.ALL
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.ALL)}
                    >
                        VĹˇichni{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.all}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.APPROVED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.APPROVED)}
                    >
                        AktivnĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.active}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.PENDING
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.PENDING)}
                    >
                        ÄŚekĂˇ na schvĂˇlenĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.pending}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.INACTIVE
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.INACTIVE)}
                    >
                        NeaktivnĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.inactive}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.REJECTED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.REJECTED)}
                    >
                        ZamĂ­tnutĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.rejected}
                        </span>
                    </button>
                </div>
            </div>

            {/* Info, kdyĹľ filtr nic nevrĂˇtĂ­ */}
            {filteredPlayers.length === 0 && (
                <p className="text-center mb-3">
                    Pro zvolenĂ˝ filtr nejsou ĹľĂˇdnĂ­ hrĂˇÄŤi.
                </p>
            )}

            {filteredPlayers.map((player) => (
                <AdminPlayerCard
                    key={player.id}
                    player={player}
                    isInactive={isPlayerInactiveNow(player.id)}
                    onApprove={onApprove}
                    onReject={onReject}
                    onEdit={onEdit}
                    onDelete={onDelete}
                    onChangeUser={onChangeUser}
                    onInactivityChanged={reloadInactivity}   // đź‘ TADY â€“ po zmÄ›nÄ› znovu naÄŤteme
                />
            ))}
        </div>
    );
};

export default AdminPlayersTable;


==================================================
src\components\admin\AdminSeasonCard.jsx
==================================================

// src/components/admin/AdminSeasonCard.jsx
import RoleGuard from "../RoleGuard";

const formatDate = (value) => {
    if (!value) return "-";
    try {
        return new Date(value).toLocaleDateString("cs-CZ");
    } catch {
        return value;
    }
};

const AdminSeasonCard = ({ season, onEdit, onSetActive }) => {
    const isActive = season.active === true;

    return (
        <div className="card shadow-sm">
            <div className="card-body">
                <div className="row align-items-center">
                    <div className="col-md-4 fw-bold">
                        {season.name || "Bez nĂˇzvu"}
                        {isActive && (
                            <span className="badge bg-success ms-2">
                                aktivnĂ­
                            </span>
                        )}
                    </div>

                    <div className="col-md-4">
                        <small className="text-muted d-block">
                            ObdobĂ­ sezĂłny
                        </small>
                        {formatDate(season.startDate)} â€“{" "}
                        {formatDate(season.endDate)}
                    </div>

                    <div className="col-md-4">
                        <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                            <div className="d-flex justify-content-end">
                                <div className="btn-group btn-group-sm">
                                    {/* UPRAVIT */}
                                    <button
                                        type="button"
                                        className="btn btn-primary"
                                        disabled={!onEdit}
                                        onClick={() =>
                                            onEdit && onEdit(season)
                                        }
                                    >
                                        Upravit
                                    </button>

                                    {/* NASTAVIT AKTIVNĂŤ */}
                                    <button
                                        type="button"
                                        className={
                                            "btn btn-outline-success" + (isActive ? " disabled" : "")
                                        }
                                        disabled={isActive || !onSetActive}
                                        title={
                                            isActive
                                                ? "Tato sezĂłna je jiĹľ aktivnĂ­"
                                                : "Nastavit tuto sezĂłnu jako aktivnĂ­"
                                        }
                                        onClick={() =>
                                            !isActive && onSetActive && onSetActive(season.id)
                                        }
                                    >
                                        Nastavit aktivnĂ­
                                    </button>

                                </div>
                            </div>
                        </RoleGuard>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default AdminSeasonCard;


==================================================
src\components\admin\AdminSeasonModal.jsx
==================================================

// src/components/admin/AdminSeasonModal.jsx
import { useEffect, useState } from "react";
import SeasonForm from "../seasons/SeasonForm";
import { validateSeason } from "../../validation/seasonValidation";
import { useGlobalModal } from "../../hooks/useGlobalModal";


const AdminSeasonModal = ({
    season,
    show,
    onClose,
    onSave,
    saving,
    allSeasons = [],
    serverError, 
}) => {
   
    if (!show) {
        return null;
    }

    const [values, setValues] = useState({
        id: season?.id ?? null,
        name: season?.name || "",
        startDate: season?.startDate || "",
        endDate: season?.endDate || "",
        active: season?.active ?? false, 
    });

    const [errors, setErrors] = useState({});

    const isNew = !values.id;

    useEffect(() => {
        if (season) {
            setValues({
                id: season.id ?? null,
                name: season.name || "",
                startDate: season.startDate || "",
                endDate: season.endDate || "",
                active: season.active ?? false, 
            });
        } else {
            setValues({
                id: null,
                name: "",
                startDate: "",
                endDate: "",
                active: false, 
            });
        }
        setErrors({});
    }, [season]);

    const handleChange = (patch) => {
        setValues((prev) => ({ ...prev, ...patch }));

        const key = Object.keys(patch)[0];
        setErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handleSubmit = (e) => {
        e.preventDefault();

        const validationErrors = validateSeason(values, allSeasons);
        setErrors(validationErrors);

        if (Object.keys(validationErrors).length > 0) {
            return;
        }

        const payload = {
            id: values.id,
            name: values.name?.trim(),
            startDate: values.startDate,
            endDate: values.endDate,
            active: values.active, 
        };

        onSave(payload);
    };

    const handleClose = () => {
        if (!saving) {
            onClose();
        }
    };

    return (
        <>
            <div
                className="modal fade show d-block"
                tabIndex="-1"
                role="dialog"
                aria-modal="true"
            >
                <div className="modal-dialog" role="document">
                    <div className="modal-content">
                        <form onSubmit={handleSubmit} noValidate>
                            <div className="modal-header">
                                <h5 className="modal-title">
                                    {isNew
                                        ? "VytvoĹ™it novou sezĂłnu"
                                        : `Upravit sezĂłnu #${values.id}`}
                                </h5>
                                <button
                                    type="button"
                                    className="btn-close"
                                    aria-label="Close"
                                    onClick={handleClose}
                                    disabled={saving}
                                ></button>
                            </div>

                            <div className="modal-body">
                                {/* Server-side chyba (napĹ™. InvalidSeasonStateException,
                                    DuplicateSeasonNameException atd.) */}
                                {serverError && (
                                    <div className="alert alert-danger">
                                        {serverError}
                                    </div>
                                )}

                                <SeasonForm
                                    values={values}
                                    onChange={handleChange}
                                    errors={errors}
                                />
                            </div>

                            <div className="modal-footer">
                                <button
                                    type="button"
                                    className="btn btn-secondary"
                                    onClick={handleClose}
                                    disabled={saving}
                                >
                                    ZavĹ™Ă­t
                                </button>
                                <button
                                    type="submit"
                                    className="btn btn-primary"
                                    disabled={saving}
                                >
                                    {saving
                                        ? isNew
                                            ? "VytvĂˇĹ™Ă­m sezĂłnuâ€¦"
                                            : "UklĂˇdĂˇm zmÄ›nyâ€¦"
                                        : isNew
                                            ? "VytvoĹ™it sezĂłnu"
                                            : "UloĹľit zmÄ›ny sezĂłny"}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div className="modal-backdrop fade show"></div>
        </>
    );
};

export default AdminSeasonModal;


==================================================
src\components\admin\AdminSeasonsTable.jsx
==================================================

// src/components/admin/AdminSeasonsTable.jsx
import AdminSeasonCard from "./AdminSeasonCard";

const AdminSeasonsTable = ({
    seasons,
    loading,
    error,
    onEdit,
    onSetActive,
}) => {
    if (loading) {
        return <p>NaÄŤĂ­tĂˇm sezĂłnyâ€¦</p>;
    }

    if (error) {
        return (
            <div className="alert alert-danger" role="alert">
                {error}
            </div>
        );
    }

    if (!seasons || seasons.length === 0) {
        return <p>V systĂ©mu zatĂ­m nejsou ĹľĂˇdnĂ© sezĂłny.</p>;
    }

    // SeĹ™adĂ­me podle zaÄŤĂˇtku sezĂłny (nejnovÄ›jĹˇĂ­ nahoĹ™e)
    const sortedSeasons = seasons
        .slice()
        .sort((a, b) => {
            const aDate = a.startDate || "";
            const bDate = b.startDate || "";
            if (aDate < bDate) return 1;
            if (aDate > bDate) return -1;
            return 0;
        });

    return (
        <div className="d-flex flex-column gap-3">
            {sortedSeasons.map((season) => (
                <AdminSeasonCard
                    key={season.id}
                    season={season}
                    onEdit={onEdit}
                    onSetActive={onSetActive}
                />
            ))}
        </div>
    );
};

export default AdminSeasonsTable;


==================================================
src\components\admin\AdminUserCard.jsx
==================================================

// src/components/admin/AdminUserCard.jsx
import RoleGuard from "../RoleGuard";

const AdminUserCard = ({
    user,
    onEdit,
    onResetPassword,
    onActivate,
    onDeactivate,
}) => {

    const roleLabelMap = {
        ROLE_ADMIN: "AdministrĂˇtor",
        ROLE_MANAGER: "ManaĹľer",
        ROLE_PLAYER: "HrĂˇÄŤ",
    };

    const isActive =
        user.active ?? user.enabled ?? false; // podle toho, jak se to u tebe jmenuje

    // sjednotĂ­me si role na pole stringĹŻ
    let rolesArray = [];

    if (Array.isArray(user.roles)) {
        rolesArray = user.roles;
    } else if (typeof user.roles === "string" && user.roles) {
        rolesArray = [user.roles];
    } else if (Array.isArray(user.role)) {
        rolesArray = user.role;
    } else if (typeof user.role === "string" && user.role) {
        rolesArray = [user.role];
    }

    // pĹ™emapujeme na ÄŤeskĂ© nĂˇzvy
    const rolesText =
        rolesArray.length > 0
            ? rolesArray
                .map((r) => roleLabelMap[r] || r) // fallback na pĹŻvodnĂ­ string
                .join(", ")
            : "-";

    const isAdminUser = rolesArray.includes("ROLE_ADMIN");


    const hasPlayers = Array.isArray(user.players) && user.players.length > 0;

    return (
        <div className="card shadow-sm">
            {/* === ĹĂDEK 1 â€“ UĹ˝IVATEL === */}
            <div className="card-body border-bottom">
                <div className="row align-items-center">
                    <div className="col-md-4 fw-bold">
                        {user.name} {user.surname?.toUpperCase()}
                        {isActive ? (
                            <span className="badge bg-success ms-2">
                                aktivnĂ­
                            </span>
                        ) : (
                            <span className="badge bg-secondary ms-2">
                                neaktivnĂ­
                            </span>
                        )}
                    </div>

                    <div className="col-md-4">
                        <small className="text-muted d-block">E-mail</small>
                        {user.email}
                    </div>

                    <div className="col-md-4">
                        <small className="text-muted d-block">Role</small>
                        {rolesText}
                    </div>
                </div>
            </div>

            {/* === ĹĂDEK 2 â€“ AKCE === */}
            <div className="card-body border-bottom bg-light">
                <RoleGuard roles={["ROLE_ADMIN"]}>
                    <div className="d-flex justify-content-end">
                        <div className="btn-group btn-group-sm flex-wrap">
                            
                                                      
                            {/* RESET HESLA */}
                            <button
                                type="button"
                                className="btn btn-warning"
                                disabled={!onResetPassword}
                                onClick={() =>
                                    onResetPassword && onResetPassword(user.id)
                                }
                            >
                                Reset hesla
                            </button>

                            {/* AKTIVOVAT */}
                            <button
                                type="button"
                                className="btn btn-success"
                                disabled={!onActivate || isActive || isAdminUser}
                                title={
                                    isAdminUser
                                        ? "AdministrĂˇtora nelze deaktivovat ani znovu aktivovat"
                                        : undefined
                                }
                                onClick={() => onActivate && onActivate(user.id)}
                            >
                                Aktivovat
                            </button>

                            {/* DEAKTIVOVAT */}
                            <button
                                type="button"
                                className="btn btn-outline-danger"
                                disabled={!onDeactivate || !isActive || isAdminUser}
                                title={
                                    isAdminUser
                                        ? "AdministrĂˇtora nelze deaktivovat"
                                        : undefined
                                }
                                onClick={() => onDeactivate && onDeactivate(user.id)}
                            >
                                Deaktivovat
                            </button>

                        </div>
                    </div>
                </RoleGuard>
            </div>

            {/* === ĹĂDKY 3+ â€“ HRĂÄŚI U UĹ˝IVATELE === */}
            <div className="card-body">
                <small className="text-muted d-block mb-2">
                    HrĂˇÄŤi pĹ™iĹ™azenĂ­ k uĹľivateli:
                </small>

                {hasPlayers ? (
                    <div className="d-flex flex-column gap-1">
                        {user.players.map((player) => (
                            <div
                                key={player.id}
                                className="d-flex justify-content-between border-bottom py-1"
                            >
                                
                                <div>
                                    <strong>
                                        {player.name}{" "}
                                        {player.surname?.toUpperCase()}{" "} {"- id: "} {player.id}
                                    </strong>
                                    {player.nickname && (
                                        <span className="text-muted ms-2">
                                            ({player.nickname})
                                        </span>
                                    )}
                                </div>
                                <div className="text-end">
                                    <small className="text-muted d-block">
                                        TĂ˝m
                                    </small>
                                    <span>{player.team || "-"}</span>
                                </div>
                            </div>
                        ))}
                    </div>
                ) : (
                    <span className="text-muted">
                        UĹľivatel zatĂ­m nemĂˇ pĹ™iĹ™azenĂ© ĹľĂˇdnĂ© hrĂˇÄŤe.
                    </span>
                )}
            </div>
        </div>
    );
};

export default AdminUserCard;


==================================================
src\components\admin\AdminUserEditModal.jsx
==================================================

// src/components/admin/AdminUserEditModal.jsx
import { useEffect, useState } from "react";
import { useGlobalModal } from "../../hooks/useGlobalModal";


const AdminUserEditModal = ({ user, show, onClose, onSave, saving }) => {
  

    if (!show || !user) {
        return null;
    }

    const [values, setValues] = useState({
        id: user.id ?? null,
        name: user.name || "",
        surname: user.surname || "",
        email: user.email || "",
    });

    const [errors, setErrors] = useState({});

    useEffect(() => {
        if (user) {
            setValues({
                id: user.id ?? null,
                name: user.name || "",
                surname: user.surname || "",
                email: user.email || "",
            });
            setErrors({});
        }
    }, [user]);

    const handleChange = (e) => {
        const { name, value } = e.target;
        setValues((prev) => ({ ...prev, [name]: value }));

        setErrors((prev) => {
            const copy = { ...prev };
            delete copy[name];
            return copy;
        });
    };

    const validate = () => {
        const errs = {};

        if (!values.name || !values.name.trim()) {
            errs.name = "JmĂ©no je povinnĂ©.";
        }
        if (!values.surname || !values.surname.trim()) {
            errs.surname = "PĹ™Ă­jmenĂ­ je povinnĂ©.";
        }
        if (!values.email || !values.email.trim()) {
            errs.email = "E-mail je povinnĂ˝.";
        } else if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(values.email.trim())) {
            errs.email = "E-mail nemĂˇ platnĂ˝ formĂˇt.";
        }

        return errs;
    };

    const handleSubmit = (e) => {
        e.preventDefault();

        const validationErrors = validate();
        setErrors(validationErrors);

        if (Object.keys(validationErrors).length > 0) {
            return;
        }

        const payload = {
            id: values.id,
            name: values.name.trim(),
            surname: values.surname.trim(),
            email: values.email.trim(),
        };

        onSave(payload);
    };

    const handleClose = () => {
        if (!saving) {
            onClose();
        }
    };

    const nameClass =
        "form-control" + (errors.name ? " is-invalid" : "");
    const surnameClass =
        "form-control" + (errors.surname ? " is-invalid" : "");
    const emailClass =
        "form-control" + (errors.email ? " is-invalid" : "");

    return (
        <>
            <div
                className="modal fade show d-block"
                tabIndex="-1"
                role="dialog"
                aria-modal="true"
            >
                <div className="modal-dialog modal-lg" role="document">
                    <div className="modal-content">
                        <form onSubmit={handleSubmit} noValidate>
                            <div className="modal-header">
                                <h5 className="modal-title">
                                    Upravit uĹľivatele #{user.id}
                                </h5>
                                <button
                                    type="button"
                                    className="btn-close"
                                    aria-label="Close"
                                    onClick={handleClose}
                                    disabled={saving}
                                ></button>
                            </div>

                            <div className="modal-body">
                                <div className="mb-3">
                                    <label
                                        className="form-label"
                                        htmlFor="name"
                                    >
                                        JmĂ©no
                                    </label>
                                    <input
                                        type="text"
                                        id="name"
                                        name="name"
                                        className={nameClass}
                                        value={values.name}
                                        onChange={handleChange}
                                    />
                                    {errors.name && (
                                        <div className="invalid-feedback">
                                            {errors.name}
                                        </div>
                                    )}
                                </div>

                                <div className="mb-3">
                                    <label
                                        className="form-label"
                                        htmlFor="surname"
                                    >
                                        PĹ™Ă­jmenĂ­
                                    </label>
                                    <input
                                        type="text"
                                        id="surname"
                                        name="surname"
                                        className={surnameClass}
                                        value={values.surname}
                                        onChange={handleChange}
                                    />
                                    {errors.surname && (
                                        <div className="invalid-feedback">
                                            {errors.surname}
                                        </div>
                                    )}
                                </div>

                                <div className="mb-3">
                                    <label
                                        className="form-label"
                                        htmlFor="email"
                                    >
                                        E-mail
                                    </label>
                                    <input
                                        type="email"
                                        id="email"
                                        name="email"
                                        className={emailClass}
                                        value={values.email}
                                        onChange={handleChange}
                                    />
                                    {errors.email && (
                                        <div className="invalid-feedback">
                                            {errors.email}
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="modal-footer">
                                <button
                                    type="button"
                                    className="btn btn-secondary"
                                    onClick={handleClose}
                                    disabled={saving}
                                >
                                    ZavĹ™Ă­t
                                </button>
                                <button
                                    type="submit"
                                    className="btn btn-primary"
                                    disabled={saving}
                                >
                                    {saving
                                        ? "UklĂˇdĂˇm zmÄ›nyâ€¦"
                                        : "UloĹľit zmÄ›ny uĹľivatele"}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div className="modal-backdrop fade show"></div>
        </>
    );
};

export default AdminUserEditModal;


==================================================
src\components\admin\AdminUsersTable.jsx
==================================================

// src/components/admin/AdminUsersTable.jsx
import AdminUserCard from "./AdminUserCard";

const AdminUsersTable = ({
    users,
    loading,
    error,
    onEdit,
    onResetPassword,
    onActivate,
    onDeactivate,
}) => {
    if (loading) {
        return <p>NaÄŤĂ­tĂˇm uĹľivateleâ€¦</p>;
    }

    if (error) {
        return (
            <div className="alert alert-danger" role="alert">
                {error}
            </div>
        );
    }

    if (!users || users.length === 0) {
        return <p>V systĂ©mu zatĂ­m nejsou ĹľĂˇdnĂ­ uĹľivatelĂ©.</p>;
    }

    // ĹAZENĂŤ PODLE PĹĂŤJMENĂŤ (vzestupnÄ›, CZ locale)
    const sortedUsers = users
        .slice()
        .sort((a, b) =>
            (a.surname || "").localeCompare(b.surname || "", "cs", {
                sensitivity: "base",
            })
        );

    return (
        <div className="d-flex flex-column gap-3">
            {sortedUsers.map((user) => (
                <AdminUserCard
                    key={user.id}
                    user={user}
                    onEdit={onEdit}
                    onResetPassword={onResetPassword}
                    onActivate={onActivate}
                    onDeactivate={onDeactivate}
                />
            ))}
        </div>
    );
};

export default AdminUsersTable;


==================================================
src\components\admin\CancelMatchModal.jsx
==================================================

// src/components/admin/CancelMatchModal.jsx

import { useState, useEffect } from "react";
import { MATCH_CANCEL_REASON_OPTIONS } from "../../constants/matchCancelReason";

const CancelMatchModal = ({
    match,
    show,
    onClose,
    onConfirm,
    saving,
    serverError,
}) => {
    const [reason, setReason] = useState("");
    const [error, setError] = useState(null);

    useEffect(() => {
        if (show) {
            setReason("");
            setError(null);
        }
    }, [show]);

    if (!show || !match) {
        return null;
    }

    const formatDateTime = (dt) => {
        if (!dt) return "-";
        try {
            const safe = dt.replace(" ", "T");
            const d = new Date(safe);
            if (Number.isNaN(d.getTime())) return dt;
            return d.toLocaleString("cs-CZ");
        } catch {
            return dt;
        }
    };

    const handleSubmit = (e) => {
        e.preventDefault();

        if (!reason) {
            setError("Vyberte dĹŻvod zruĹˇenĂ­ zĂˇpasu.");
            return;
        }

        onConfirm(match.id, reason);
    };

    const handleChangeReason = (e) => {
        setReason(e.target.value);
        setError(null);
    };

    return (
        <>
            <div className="modal fade show d-block" tabIndex="-1">
                <div className="modal-dialog">
                    <div className="modal-content">
                        <form onSubmit={handleSubmit} noValidate>
                            <div className="modal-header">
                                <h5 className="modal-title">
                                    ZruĹˇit zĂˇpas #{match.id}
                                </h5>
                                <button
                                    type="button"
                                    className="btn-close"
                                    onClick={onClose}
                                    disabled={saving}
                                />
                            </div>

                            <div className="modal-body">
                                <p className="mb-2">
                                    Opravdu chceĹˇ zruĹˇit zĂˇpas?
                                </p>
                                <p className="small text-muted mb-3">
                                    Datum a ÄŤas:{" "}
                                    <strong>
                                        {formatDateTime(match.dateTime)}
                                    </strong>
                                    <br />
                                    MĂ­sto:{" "}
                                    <strong>{match.location || "-"}</strong>
                                </p>

                                {serverError && (
                                    <div className="alert alert-danger">
                                        {serverError}
                                    </div>
                                )}

                                <div className="mb-3">
                                    <label className="form-label">
                                        DĹŻvod zruĹˇenĂ­
                                    </label>
                                    <select
                                        className={
                                            "form-select" +
                                            (error ? " is-invalid" : "")
                                        }
                                        value={reason}
                                        onChange={handleChangeReason}
                                    >
                                        <option value="">
                                            -- vyberte dĹŻvod --
                                        </option>
                                        {MATCH_CANCEL_REASON_OPTIONS.map(
                                            (opt) => (
                                                <option
                                                    key={opt.value}
                                                    value={opt.value}
                                                >
                                                    {opt.label}
                                                </option>
                                            )
                                        )}
                                    </select>
                                    {error && (
                                        <div className="invalid-feedback">
                                            {error}
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="modal-footer">
                                <button
                                    type="button"
                                    className="btn btn-secondary"
                                    onClick={onClose}
                                    disabled={saving}
                                >
                                    ZavĹ™Ă­t
                                </button>
                                <button
                                    type="submit"
                                    className="btn btn-danger"
                                    disabled={saving}
                                >
                                    {saving
                                        ? "RuĹˇĂ­m zĂˇpasâ€¦"
                                        : "ZruĹˇit zĂˇpas"}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div className="modal-backdrop fade show" />
        </>
    );
};

export default CancelMatchModal;


==================================================
src\components\demo\DemoNotificationsModal.css
==================================================

/* TyrkysovĂ˝ styl pro DEMO modal */



.demo-modal {
    border: 2px solid #17c3b2;
    border-radius: 0.75rem;
}

.demo-modal-header {
    background: linear-gradient(135deg, #17c3b2, #0fa3b1);
    color: white;
    border-bottom: none;
}

.demo-modal-header .modal-title {
    font-weight: 600;
    letter-spacing: 0.5px;
}

.demo-modal .modal-footer {
    background-color: #f1fffd;
}

.demo-modal .list-group-item {
    border-left: 4px solid #17c3b2;
}
.demo-modal .modal-body {
    max-height: calc(100vh - 220px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}
/* aby Ĺˇel obsah modalu rolovat na mobilu */
.demo-modal-body {
    max-height: calc(100vh - 220px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* pÄ›knÄ›jĹˇĂ­ varovĂˇnĂ­ v HTML prefixu */
.demo-warning-box {
    background: #fff3cd;
    border: 1px solid #ffeeba;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 6px;
    font-weight: 600;
}

/* fullscreen modal na mobilu â€“ header/footer zĹŻstanou, scrolluje body */
@media (max-width: 576px) {
    .demo-modal-body {
        max-height: calc(100vh - 180px);
    }
}

.modal-backdrop {
    position: fixed;
    inset: 0;
}
.modal {
    position: fixed;
    inset: 0;
    overflow-x: hidden;
    overflow-y: auto;
}


==================================================
src\components\demo\DemoNotificationsModal.jsx
==================================================

// src/components/demo/DemoNotificationsModal.jsx
import "./DemoNotificationsModal.css";
import { useGlobalModal } from "../../hooks/useGlobalModal";

const DemoNotificationsModal = ({
    show,
    onClose,
    notifications,
    loading = false,
    error = null,
}) => {
    useGlobalModal(show);

    if (!show) return null;

    const emails = notifications?.emails ?? [];
    const sms = notifications?.sms ?? [];

    return (
        <>
            {/* Klik mimo obsah zavĹ™e modal */}
            <div
                className="modal fade show d-block"
                tabIndex="-1"
                role="dialog"
                aria-modal="true"
                aria-labelledby="demo-notifications-title"
                onClick={onClose}
            >
                <div
                    className="modal-dialog modal-lg modal-dialog-scrollable modal-fullscreen-sm-down"
                    role="document"
                    onClick={(e) => e.stopPropagation()}
                >
                    <div className="modal-content demo-modal">
                        <div className="modal-header demo-modal-header">
                            <h5 className="modal-title" id="demo-notifications-title">
                                DEMO - odeslanĂ© notifikace - pouze zobrazenĂ­ - email se neodesĂ­lĂˇ
                            </h5>

                            <button
                                type="button"
                                className="btn-close"
                                onClick={onClose}
                                aria-label="ZavĹ™Ă­t"
                            />
                        </div>

                        <div className="modal-body demo-modal-body">
                            {loading && <p>NaÄŤĂ­tĂˇm notifikaceâ€¦</p>}

                            {error && <div className="alert alert-danger">{error}</div>}

                            {!loading && !error && (
                                <>
                                    {emails.length === 0 && sms.length === 0 && (
                                        <p>Ĺ˝ĂˇdnĂ© demo notifikace k zobrazenĂ­.</p>
                                    )}

                                    {emails.length > 0 && (
                                        <>
                                            <h6>E-maily</h6>
                                            <div className="list-group mb-3">
                                                {emails.map((mail, idx) => {
                                                    let demoPrefixHtml = "";

                                                    if (mail.type === "FORGOTTEN_PASSWORD_RESET_COMPLETED") {
                                                        demoPrefixHtml = `
                              <div class="demo-warning-box">
                                âš ď¸Ź DEMO reĹľim - zmÄ›na hesla u tohoto uĹľivatele byla pouze simulovĂˇna. U uĹľivatele, kterĂ©ho si sami vytvoĹ™Ă­te bude heslo opravdu zmÄ›nÄ›no.
                              </div>
                            `;
                                                    }

                                                    if (mail.type === "USER_CREATED") {
                                                        demoPrefixHtml = `
                              <div class="demo-warning-box">
                                âš ď¸Ź DEMO reĹľim - registrace uĹľivatele byla ĂşspÄ›ĹˇnÄ› provedena. AktivaÄŤnĂ­ e-mail nebyl ve skuteÄŤnosti odeslĂˇn. ĂšÄŤet je moĹľnĂ© aktivovat pouze u uĹľivatelĹŻ, kterĂ© si sami vytvoĹ™Ă­te.
                              </div>
                            `;
                                                    }

                                                    if (mail.type === "USER_ACTIVATED") {
                                                        demoPrefixHtml = `
                              <div class="demo-warning-box">
                                âš ď¸Ź DEMO reĹľim - registrace uĹľivatele byla ĂşspÄ›ĹˇnÄ› provedena. AktivaÄŤnĂ­ e-mail nebyl ve skuteÄŤnosti odeslĂˇn. NynĂ­ se mĹŻĹľete pĹ™ihlĂˇsit.
                              </div>
                            `;
                                                    }

                                                    return (
                                                        <div key={mail.id ?? idx} className="list-group-item">
                                                            <div className="small text-muted mb-1">
                                                                Typ: <strong>{mail.type ?? "-"}</strong> | KanĂˇl:{" "}
                                                                <strong>{mail.recipientKind ?? "-"}</strong>
                                                            </div>

                                                            <div>
                                                                <strong>Komu:</strong> {mail.to ?? "-"}
                                                            </div>

                                                            <div>
                                                                <strong>PĹ™edmÄ›t:</strong> {mail.subject ?? "-"}
                                                            </div>

                                                            <div className="mt-2">
                                                                <strong>Text:</strong>
                                                                <div
                                                                    className="border rounded p-2 bg-light mt-1"
                                                                    style={{ maxHeight: "200px", overflow: "auto" }}
                                                                    dangerouslySetInnerHTML={{
                                                                        __html: demoPrefixHtml + (mail.body ?? ""),
                                                                    }}
                                                                />
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </>
                                    )}

                                    {sms.length > 0 && (
                                        <>
                                            <h6>SMS</h6>
                                            <div className="list-group">
                                                {sms.map((s, idx) => (
                                                    <div key={s.id ?? idx} className="list-group-item">
                                                        <div className="small text-muted mb-1">
                                                            Typ: <strong>{s.type ?? "-"}</strong>
                                                        </div>

                                                        <div>
                                                            <strong>Komu:</strong> {s.to ?? "-"}
                                                        </div>

                                                        <div className="mt-2">
                                                            <strong>Text:</strong>
                                                            <div
                                                                className="border rounded p-2 bg-light mt-1"
                                                                style={{
                                                                    maxHeight: "400px",
                                                                    overflow: "auto",
                                                                    whiteSpace: "pre-wrap",
                                                                }}
                                                            >
                                                                {s.text ?? ""}
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </>
                                    )}
                                </>
                            )}
                        </div>

                        <div className="modal-footer">
                            <button type="button" className="btn btn-secondary" onClick={onClose}>
                                ZavĹ™Ă­t
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            {/* Backdrop â€“ bez onClick (klik mimo obsah Ĺ™eĹˇĂ­ wrapper .modal) */}
            <div className="modal-backdrop fade show" />
        </>
    );
};

export default DemoNotificationsModal;


==================================================
src\components\forms\DatePicker.jsx
==================================================

// src/components/forms/DatePicker.jsx
import React, { useMemo, useRef } from "react";
import Flatpickr from "react-flatpickr";
import "flatpickr/dist/flatpickr.min.css";
import "flatpickr/dist/themes/material_blue.css";
import { Czech } from "flatpickr/dist/l10n/cs.js";

/**
 * Date picker pro Bootstrap formulĂˇĹ™e.
 *
 * value: string ve formĂˇtu "YYYY-MM-DD"
 * onChange: (valueString) => void
 */
const DatePicker = ({
    id = "date",
    name,
    value,
    onChange,
    onBlur,
    placeholder = "Vyber datumâ€¦",
    required = false,
    disabled = false,
    minDate,
    maxDate,
    className = "form-control",
}) => {
    const fpRef = useRef(null);

    const options = useMemo(
        () => ({
            locale: Czech,
            enableTime: false,
            dateFormat: "Y-m-d",

            altInput: true,
            altFormat: "d.m.Y",
            altInputClass: className,

            allowInput: true,
            clickOpens: true,
            closeOnSelect: true,
            disableMobile: true,

            minDate: minDate || null,
            maxDate: maxDate || null,
        }),
        [minDate, maxDate, className]
    );

    return (
        <Flatpickr
            options={options}
            value={value || ""}
            onReady={(_, __, fp) => {
                fpRef.current = fp;

                if (fp?.altInput) {
                    fp.altInput.id = id;
                    if (name) fp.altInput.name = name;
                    fp.altInput.placeholder = placeholder;
                    fp.altInput.disabled = disabled;
                    fp.altInput.required = required;

                    if (onBlur) {
                        fp.altInput.onblur = onBlur;
                    }
                }
            }}
            onChange={(dates) => {
                const d = dates && dates.length ? dates[0] : null;
                if (!d) return onChange?.("");

                const fp = fpRef.current;
                const formatted = fp ? fp.formatDate(d, "Y-m-d") : "";
                onChange?.(formatted);

                // jistota zavĹ™enĂ­ po vĂ˝bÄ›ru (eliminace "2 klikĹŻ" u nÄ›kterĂ˝ch kombinacĂ­)
                fp?.close?.();
            }}
            // âś… originĂˇlnĂ­ input schovĂˇme (viditelnĂ˝ je jen altInput)
            render={({ defaultValue }, ref) => (
                <input
                    ref={ref}
                    defaultValue={defaultValue}
                    type="hidden"
                    aria-hidden="true"
                    tabIndex={-1}
                />
            )}
        />
    );
};

export default DatePicker;


==================================================
src\components\forms\DateTimePicker.jsx
==================================================

// src/components/forms/DateTimePicker.jsx
import React, { useMemo, useRef } from "react";
import Flatpickr from "react-flatpickr";
import "flatpickr/dist/flatpickr.min.css";
import "flatpickr/dist/themes/material_blue.css";
import { Czech } from "flatpickr/dist/l10n/cs.js";

/**
 * DateTime picker pro Bootstrap formulĂˇĹ™e.
 *
 * value: string ve formĂˇtu "YYYY-MM-DDTHH:mm" (stejnÄ› jako datetime-local)
 * onChange: (valueString) => void
 */
const DateTimePicker = ({
    id = "dateTime",
    name,
    value,
    onChange,
    onBlur,
    placeholder = "Vyber datum a ÄŤasâ€¦",
    required = false,
    disabled = false,
    minDate,
    maxDate,
    className = "form-control",
    minuteIncrement = 5,
}) => {
    const fpRef = useRef(null);

    // âś… string -> Date pro zobrazenĂ­ ve flatpickru
    const parsedValue = useMemo(() => {
        if (!value) return null;

        // value je "YYYY-MM-DDTHH:mm" -> JS to bere jako "local"
        const d = new Date(value);
        return Number.isNaN(d.getTime()) ? null : d;
    }, [value]);

    const options = useMemo(
        () => ({
            locale: Czech,
            enableTime: true,
            time_24hr: true,

            // âś… zobrazujeme ÄŤesky pĹ™Ă­mo v inputu (bez altInput => ĹľĂˇdnĂ˝ druhĂ˝ input)
            dateFormat: "d.m.Y H:i",

            minuteIncrement,
            allowInput: true,
            disableMobile: true,

            minDate: minDate || null,
            maxDate: maxDate || null,
        }),
        [minuteIncrement, minDate, maxDate]
    );

    return (
        <Flatpickr
            options={options}
            value={parsedValue}
            onReady={(_, __, fp) => {
                fpRef.current = fp;
            }}
            onChange={(dates) => {
                const d = dates && dates.length ? dates[0] : null;
                if (!d) {
                    onChange?.("");
                    return;
                }

                const fp = fpRef.current;

                // âś… do stavu posĂ­lĂˇme stabilnĂ­ ISO-local string (datetime-local)
                const formatted = fp ? fp.formatDate(d, "Y-m-d\\TH:i") : "";
                onChange?.(formatted);
            }}
            render={(_, ref) => (
                <input
                    id={id}
                    name={name}
                    ref={ref}
                    className={className}
                    placeholder={placeholder}
                    disabled={disabled}
                    required={required}
                    onBlur={onBlur}
                    autoComplete="off"
                />
            )}
        />
    );
};

export default DateTimePicker;


==================================================
src\components\inactivity\PlayerInactivityCards.jsx
==================================================

// src/components/inactivity/PlayerInactivityCards.jsx
import React from "react";

const formatDateTime = (iso) => {
    if (!iso) return "";
    try {
        const d = new Date(iso);
        return d.toLocaleString("cs-CZ", {
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
        });
    } catch {
        return iso;
    }
};

const PlayerInactivityCards = ({ periods, loading, error }) => {
    if (loading) {
        return <p>NaÄŤĂ­tĂˇm obdobĂ­ neaktivityâ€¦</p>;
    }

    if (error) {
        return <div className="alert alert-danger">{error}</div>;
    }

    if (!periods || periods.length === 0) {
        return <p>NemĂˇte evidovĂˇna ĹľĂˇdnĂˇ obdobĂ­ neaktivity.</p>;
    }

    return (
        <div className="mt-4">
            <h2 className="h5 mb-3">ObdobĂ­ neaktivity</h2>
            <div className="row g-3">
                {periods.map((p) => (
                    <div className="col-md-6" key={p.id}>
                        <div className="card shadow-sm h-100">
                            <div className="card-body">
                                <h5 className="card-title mb-2">
                                    NeaktivnĂ­
                                </h5>
                                <p className="mb-1">
                                    <strong>Od:</strong>{" "}
                                    {formatDateTime(p.inactiveFrom)}
                                </p>
                                <p className="mb-1">
                                    <strong>Do:</strong>{" "}
                                    {formatDateTime(p.inactiveTo)}
                                </p>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

export default PlayerInactivityCards;


==================================================
src\components\matches\MatchActions.css
==================================================

/* spoleÄŤnĂ˝ styl akÄŤnĂ­ch tlaÄŤĂ­tek */
.action-btn {
    min-width: 140px;
    /* stejnĂˇ ĹˇĂ­Ĺ™ka */
    font-size: 1.2rem;
    /* vÄ›tĹˇĂ­ pĂ­smo */
    font-weight: 600;
    padding: 0.6rem 1rem;
    /* lehce vÄ›tĹˇĂ­ vĂ˝Ĺˇka */
}

@media (max-width: 576px) {
    .action-btn {
        min-width: 0;
        width: 100%;
    }
}

==================================================
src\components\matches\MatchActions.jsx
==================================================

// src/components/MatchActions.jsx
import "./MatchActions.css";

const MatchActions = ({
    playerMatchStatus,
    onRegister,
    onUnregister,
    onExcuse,
    onSubstitute,
    disabled,
}) => {
    console.log(
        "MatchActions status:",
        playerMatchStatus,
        "disabled:",
        disabled
    );

    const renderButtons = () => {
        switch (playerMatchStatus) {
            case "NO_RESPONSE":
                // ĹľĂˇdnĂˇ registrace â€“ Budu / Nemohu (omluva) / moĹľnĂˇ
                return (
                    <div className="d-flex gap-2 justify-content-center">
                        <button
                            type="button"
                            className="btn btn-success action-btn"
                            onClick={onRegister}
                            disabled={disabled}
                        >
                            PĹ™ijdu
                        </button>

                        <button
                            type="button"
                            className="btn btn-outline-danger action-btn"
                            onClick={onExcuse}
                            disabled={disabled}
                        >
                            NemĹŻĹľu
                        </button>

                        <button
                            type="button"
                            className="btn btn-outline-warning action-btn"
                            onClick={onSubstitute}
                            disabled={disabled}
                        >
                            MoĹľnĂˇ
                        </button>
                      
                    </div>
                );

            case "REGISTERED":
            case "RESERVED":
                // pĹ™ihlĂˇĹˇen nebo nĂˇhradnĂ­k â€“ mĹŻĹľe se jen odhlĂˇsit
                return (
                    <div className="d-flex justify-content-center">
                        <button
                            type="button"
                            className="btn btn-outline-danger action-btn"
                            onClick={onUnregister}
                            disabled={disabled}
                        >
                            Nakonec nepĹ™Ă­jdu
                        </button>
                    </div>
                );

            case "EXCUSED":
            case "UNREGISTERED":
                // omluven / odhlĂˇĹˇen â€“ mĹŻĹľe se znova pĹ™ihlĂˇsit
                return (
                    <div className="d-flex justify-content-center">
                        <button
                            type="button"
                            className="btn btn-success action-btn"
                            onClick={onRegister}
                            disabled={disabled}
                        >
                            Tak pĹ™Ă­jdu
                        </button>
                    </div>
                );

            case "SUBSTITUTE":
            // moĹľnĂˇ - nĂˇhradnĂ­k â€“ mĹŻĹľe se znova pĹ™ihlĂˇsit
                return (
                    <div className="d-flex justify-content-center">
                        <button
                            type="button"
                            className="btn btn-success action-btn"
                            onClick={onRegister}
                            disabled={disabled}
                        >
                            Tak pĹ™Ă­jdu
                        </button>

                        <button
                            type="button"
                            className="btn btn-danger action-btn"
                            onClick={onExcuse}
                            disabled={disabled}
                        >
                            NemĹŻĹľu
                        </button>
                    </div>
                );

            case "NO_EXCUSED":
                // neomluven â€“ stav uzavĹ™en
                return null;

            default:
                console.warn(
                    "NeznĂˇmĂ˝ status v MatchActions:",
                    playerMatchStatus
                );
                return null;
        }
    };

    return (
        <div className="d-flex flex-column flex-sm-row gap-2">
            {renderButtons()}
        </div>
    );
};

export default MatchActions;


==================================================
src\components\matches\MatchCard.css
==================================================

.match-card {
    position: relative;
    padding: 16px;
    border: 2px solid #dee2e6;
    border-radius: 12px;
   
    width: 100%;
    max-width: 100%;

    overflow: hidden;
    /* aby nic nevylezlo z karty */
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

@media (min-width: 768px) {
    .match-card {
        width: 240px;
    }
}

/* condensed varianta â€“ pouĹľĂ­vĂˇ se pro uplynulĂ© zĂˇpasy v seznamu */
.match-card--condensed {
    width: 100%;
    /* karta pĹ™es celou ĹˇĂ­Ĺ™ku Ĺ™Ăˇdku */
    max-width: 100%;
}

/* klikatelnost karty */
.match-card.clickable {
    cursor: pointer;
}

.match-card.clickable:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

/* zakĂˇzanĂˇ karta (tooltip overlay) */
.match-card--disabled {
    opacity: 1;
    cursor: not-allowed;
}

.match-card--disabled:hover {
    transform: none;
    box-shadow: none;
}

.match-card-tooltip {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: rgba(0, 0, 0, 0.65);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 0.9rem;
    text-align: center;
    padding: 0 12px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.match-card--disabled:hover .match-card-tooltip {
    opacity: 1;
}

.match-id {
    font-size: 1.1rem;
}

.match-day {
    font-size: 1.25rem;
    font-weight: 600;
}

.match-date {
    font-size: 1.2rem;
}

.player-icon {
    font-size: 1.3rem;
    margin-right: 15px;
}

.player-price-icon {
    font-size: 0.9rem;
    margin-right: 0;
}

.money-icon {
    font-size: 1.5rem;
    margin-right: 15px;
}

/* =========================================
   STAV HRĂÄŚE V ZĂPASE â€“ IKONA + TEXT
   ========================================= */

.player-match-status {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    white-space: nowrap;
    max-width: 100%;
}

.player-match-status-icon {
    font-size: 1.5rem;
}

.player-match-status-text {
    font-size: 1.3rem;
    font-weight: 600;
    margin: 0;
}

/* =========================================
   BARVY KARTY DLE PLAYER_MATCH_STATUS
   ========================================= */

/* đźź˘ REGISTERED */
.match-registered {
    background-color: #29d158;
    border-color: #09772f;
}

/* âšŞ UNREGISTERED */
.match-unregistered {
    background-color: #fff9db;
    border-color: #ffe066;
}

/* đź”µ EXCUSED */
.match-excused {
    background-color: #27c3f39c;
    border-color: #b6d4fe;
}

/* đźź  RESERVED */
.match-reserved {
    background-color: #fff4e5;
    border-color: #ffd8a8;
}

/* đźźˇ NO_RESPONSE */
.match-no-response {
    background-color: #f8f9fa;
    border-color: #dee2e6;
}

/* đź”´ NO_EXCUSED */
.match-no-excused {
    background-color: #fdecea;
    border-color: #f5c2c7;
}

/* ===== BARVY DLE PLAYER_MATCH_STATUS (modifier) ===== */

.player-match-status--registered .player-match-status-icon {
    color: #018520;
}

.player-match-status--registered .player-match-status-text {
    color: #030303;
}

.player-match-status--unregistered .player-match-status-icon {
    color: #f17108;
}

.player-match-status--unregistered .player-match-status-text {
    color: #030303;
}

.player-match-status--excused .player-match-status-icon {
    color: #ffc107;
}

.player-match-status--excused .player-match-status-text {
    color: #030303;
}

.player-match-status--reserved .player-match-status-icon {
    color: #0d6efd;
}

.player-match-status--reserved .player-match-status-text {
    color: #030303;
}

.player-match-status--no_response .player-match-status-icon {
    color: #f8f9fa;
}

.player-match-status--no_response .player-match-status-text {
    color: #030303;
}

.player-match-status--no_excused .player-match-status-icon {
    color: #dc3545;
}

.player-match-status--no_excused .player-match-status-text {
    color: #750b16;
}

/* zĂˇklad â€“ na mobilu jsou bloky pod sebou */
.match-card__body {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

/* =========================
   CONDENSED â€“ TABLET (768â€“991)
   grid v Ĺ™Ăˇdku, ikona nad textem, menĹˇĂ­ status
   ========================= */
@media (min-width: 768px) and (max-width: 991px) {
    .match-card--condensed .match-card__body {
        display: grid;
        grid-template-columns:
            110px
            /* PĂˇtek - X */
            150px
            /* datum+ÄŤas */
            1fr
            /* arĂ©na */
            110px
            /* hrĂˇÄŤi */
            130px;
        /* status */
        align-items: center;
        column-gap: 0.75rem;
        text-align: left;
    }

    .match-card--condensed .match-card__body>* {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* hrĂˇÄŤi â€“ ikona + poÄŤet vedle sebe, centrovanĂ© */
    .match-card--condensed .players-count {
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 0.4rem;
        text-align: center;
    }

    /* status buĹka vycentrovanĂˇ v poslednĂ­m sloupci */
    .match-card--condensed .status-cell {
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
    }

    /* na tabletu: ikona NAD textem + menĹˇĂ­ pĂ­smo */
    .match-card--condensed .player-match-status {
        flex-direction: column;
        gap: 0.15rem;
    }

    .match-card--condensed .player-match-status-icon {
        font-size: 1.1rem;
    }

    .match-card--condensed .player-match-status-text {
        font-size: 0.9rem;
        font-weight: 600;
    }

    /* bez pĹ™ebyteÄŤnĂ˝ch spodnĂ­ch mezer */
    .match-card--condensed p,
    .match-card--condensed .match-day,
    .match-card--condensed .match-date {
        margin-bottom: 0;
    }
}

/* =========================
   CONDENSED â€“ DESKTOP (â‰Ą 992)
   grid v jednom Ĺ™Ăˇdku, status klasicky vedle sebe
   ========================= */
@media (min-width: 992px) {
    .match-card--condensed .match-card__body {
        display: grid;
        grid-template-columns:
            110px
            /* PĂˇtek - X */
            160px
            /* datum+ÄŤas */
            1fr
            /* arĂ©na */
            120px
            /* hrĂˇÄŤi */
            180px;
        /* status */
        align-items: center;
        column-gap: 1rem;
        text-align: left;
    }

    .match-card--condensed .match-card__body>* {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .match-card--condensed .players-count {
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .match-card--condensed .status-cell {
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
    }

    /* na desktopu: ikona + text vedle sebe, vÄ›tĹˇĂ­ */
    .match-card--condensed .player-match-status {
        flex-direction: row;
        gap: 0.35rem;
    }

    .match-card--condensed .player-match-status-icon {
        font-size: 1.5rem;
    }

    .match-card--condensed .player-match-status-text {
        font-size: 1.3rem;
    }

    .match-card--condensed p,
    .match-card--condensed .match-day,
    .match-card--condensed .match-date {
        margin-bottom: 0;
    }

    .match-card--condensed .status-cell .player-match-status {
        max-width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
}

==================================================
src\components\matches\MatchCard.jsx
==================================================

// src/components/MatchCard.jsx
import {
    RegisteredIcon,
    UnregisteredIcon,
    ExcusedIcon,
    ReservedIcon,
    NoResponseIcon,
    NoExcusedIcon,
    UserIcon,
    MoneyIcon,
} from "../../icons";

import "./MatchCard.css";

const statusClassMap = {
    REGISTERED: "match-registered",
    UNREGISTERED: "match-unregistered",
    EXCUSED: "match-excused",
    RESERVED: "match-reserved",
    SUBSTITUTE: "match-substitute",
    NO_RESPONSE: "match-no-response",
    NO_EXCUSED: "match-no-excused",
};

const statusTextUpcomingMap = {
    REGISTERED: "BUDU",
    UNREGISTERED: "ODHLĂĹ EN",
    EXCUSED: "NEMĹ®Ĺ˝U",
    RESERVED: "ÄŚEKĂM",
    SUBSTITUTE: "MOĹ˝NĂ",
    NO_RESPONSE: "",
    NO_EXCUSED: "NEOMLUVEN",
};

const statusTextPastMap = {
    REGISTERED: "",
    NO_RESPONSE: "NEREAGOVAL",
    NO_EXCUSED: "NEPĹIĹ EL",
    UNREGISTERED: "ODHLĂĹ EN",
    SUBSTITUTE: "ZADAL MOĹ˝NĂ",
    EXCUSED: "NEMOHL",
    RESERVED: "ÄŚEKAL",
};

const statusIconMap = {
    REGISTERED: RegisteredIcon,
    UNREGISTERED: UnregisteredIcon,
    EXCUSED: ExcusedIcon,
    RESERVED: ReservedIcon,
    SUBSTITUTE: NoResponseIcon,
    NO_RESPONSE: NoResponseIcon,
    NO_EXCUSED: NoExcusedIcon,
};

const formatDateTime = (dateTime) => {
    if (!dateTime) return null;

    const iso = dateTime.replace(" ", "T");
    const d = new Date(iso);

    const dayName = new Intl.DateTimeFormat("cs-CZ", {
        weekday: "long",
    }).format(d);

    const datePart = new Intl.DateTimeFormat("cs-CZ", {
        day: "2-digit",
        month: "2-digit",
        year: "numeric",
    }).format(d);

    const timePart = d.toLocaleTimeString("cs-CZ", {
        hour: "2-digit",
        minute: "2-digit",
    });

    return {
        day: dayName.charAt(0).toUpperCase() + dayName.slice(1),
        dateTime: `${datePart} ${"  "} ${timePart}`,
    };
};

const MatchCard = ({ match, onClick, disabledTooltip, condensed = false }) => {
    // đź”ą vĹľdy pracujme s jednou promÄ›nnou
    const playerMatchStatus = match.playerMatchStatus ?? "NO_RESPONSE";

    const statusText = condensed
        ? statusTextPastMap[playerMatchStatus] ?? playerMatchStatus
        : statusTextUpcomingMap[playerMatchStatus] ?? playerMatchStatus;

    const statusClass = statusClassMap[playerMatchStatus] ?? "";
    const StatusIcon = statusIconMap[playerMatchStatus] || null;

    const hasDisabledTooltip = !!disabledTooltip;
    const isRegistered = playerMatchStatus === "REGISTERED";

    const isDisabledByTooltip = hasDisabledTooltip && !isRegistered;
    const isClickable = !!onClick && !isDisabledByTooltip;

    const formatted = formatDateTime(match.dateTime);

    // pro BEM modifier â€“ REGISTERED -> "registered", NO_RESPONSE -> "no_response"
    const statusModifier = playerMatchStatus.toLowerCase();

    const cardLayoutClass = condensed
        ? "match-card--condensed"
        : "match-card--default";


    const handleClick = () => {
        if (isClickable && onClick) {
            onClick();
        }
    };

    return (
        <div
            className={`match-card ${statusClass} ${cardLayoutClass} ${isClickable ? "clickable" : ""
                } ${isDisabledByTooltip ? "match-card--disabled" : ""}`}
            role={isClickable ? "button" : undefined}
            tabIndex={isClickable ? 0 : -1}
            onClick={isClickable ? handleClick : undefined}
            onKeyDown={
                isClickable
                    ? (e) => e.key === "Enter" && handleClick()
                    : undefined
            }
        >
            <div className="card-body match-card__body">
                {formatted && (
                    <>
                        <h4 className="card-title text-muted text-center match-day">
                            {formatted.day} {"  #"}{match.matchNumber}
                        </h4>

                        <h3 className="text-center match-date">
                            {formatted.dateTime}
                        </h3>
                    </>
                )}

                <p className="card-text text-center">
                    {match.location}
                </p>

                {!condensed && match.description && (
                    <p className="card-text">
                        Popis: <strong>{match.description}</strong>
                    </p>
                )}

                {
                    <p className="card-text text-center  players-count">
                        <UserIcon className="player-icon" />
                        <strong>
                            {match.inGamePlayers} / {match.maxPlayers}

                        </strong>
                    </p>
                }

                {!condensed && (
                    <p className="card-text text-center">
                        <MoneyIcon className="money-icon" />
                        <strong>
                            {match.pricePerRegisteredPlayer.toFixed(0)} KÄŤ /{" "}
                            <UserIcon className="player-price-icon" /> KÄŤ
                        </strong>
                    </p>
                )}

                {/* đź”ą Stav hrĂˇÄŤe v zĂˇpase â€“ ikona + text */}
                <div className="text-center status-cell">
                    <span
                        className={`player-match-status player-match-status--${statusModifier}`}
                    >
                        {StatusIcon && (
                            <StatusIcon className="player-match-status-icon" />
                        )}
                        <strong className="player-match-status-text">
                            {statusText}
                        </strong>
                    </span>
                </div>
            </div>

            {isDisabledByTooltip && (
                <div className="match-card-tooltip">
                    {disabledTooltip}
                </div>
            )}
        </div>
    );
};

export default MatchCard;


==================================================
src\components\matches\MatchDetail.jsx
==================================================

import { useState } from "react";
import MatchHeader from "./MatchHeader";
import PlayerMatchStatus from "../players/PlayerMatchStatus";
import MatchActions from "./MatchActions";
import MatchInfo from "./MatchInfo";
import TeamSelectModal from "../matchRegistration/TeamSelectModal";
import BackButton from "../BackButton";
import MatchRegistrationHistory from "../MatchRegistration/MatchRegistrationHistory";

const isMatchUpcoming = (match) => {
    if (!match || !match.dateTime) {
        // radĹˇi tlaÄŤĂ­tka zobrazit, neĹľ je vĹľdy schovat
        return true;
    }

    const raw = match.dateTime;
    let matchDate;

    if (raw instanceof Date) {
        matchDate = raw;
    } else if (typeof raw === "string") {
        // backend posĂ­lĂˇ "2026-01-23 18:45:00"
        // â†’ udÄ›lĂˇme z toho "2026-01-23T18:45:00"
        const normalized = raw.includes("T") ? raw : raw.replace(" ", "T");
        matchDate = new Date(normalized);
    } else {
        // neznĂˇmĂ˝ formĂˇt â€“ radĹˇi povolit tlaÄŤĂ­tka
        return true;
    }

    if (Number.isNaN(matchDate.getTime())) {
        // ĹˇpatnĂ© datum â€“ radĹˇi povolit tlaÄŤĂ­tka
        return true;
    }

    const now = new Date();
    return matchDate > now;
};

const MatchDetail = ({
    match,
    playerMatchStatus,
    matchStatus,
    loading,
    error,
    actionError,
    onRegister,
    onUnregister,
    onExcuse,
    onSubstitute,
    saving,
    isPast,
    defaultTeam,
    onRefresh,
}) => {
    const [showTeamModal, setShowTeamModal] = useState(false);
    const [showHistory, setShowHistory] = useState(false);

    if (loading) {
        return (
            <div className="container mt-4 text-center">
                <p>NaÄŤĂ­tĂˇm detail zĂˇpasuâ€¦</p>
            </div>
        );
    }

    if (error) {
        return (
            <div className="container mt-4 text-center">
                <p className="text-danger mb-3">{error}</p>
            </div>
        );
    }

    if (!match) {
        return (
            <div className="container mt-4 text-center">
                <p>Detail zĂˇpasu nebyl nalezen.</p>
            </div>
        );
    }

    const isUpcoming = isMatchUpcoming(match);

    const handleRegisterClick = () => {
        // tady uĹľ nesahĂˇme na API â€“ jen otevĹ™eme modal
        console.log("MatchDetail: klik na PĹ™ijdu â†’ otevĂ­rĂˇm modal");
        setShowTeamModal(true);
    };

    const handleSelectTeam = async (team) => {
        console.log("MatchDetail: vybranĂ˝ tĂ˝m z modalu:", team);
        if (onRegister) {
            // do rodiÄŤe (MatchDetailPage) posĂ­lĂˇme tĂ˝m
            await onRegister(team);
        }
        setShowTeamModal(false);
    };

    return (
        <div className="container mt-3">
            <MatchHeader match={match} />


            <PlayerMatchStatus
                playerMatchStatus={match.playerMatchStatus}
                variant={isPast ? "past" : "upcoming"}
            />

            {actionError && (
                <p className="text-danger text-center mb-2">{actionError}</p>
            )}

            {!isPast && isUpcoming && (
                <MatchActions
                    playerMatchStatus={playerMatchStatus}
                    onRegister={handleRegisterClick}  
                    onUnregister={onUnregister}
                    onExcuse={onExcuse}
                    onSubstitute={onSubstitute}
                    disabled={saving}
                />
            )}

            <BackButton />
            <br></br>
            <MatchInfo match={match} onRefresh={onRefresh} />

            <div className="d-flex justify-content-center mt-3 mb-3">
                <button
                    type="button"
                    className="btn btn-outline-secondary btn-lg"
                    onClick={() => setShowHistory((prev) => !prev)}
                >
                    {showHistory
                        ? "SkrĂ˝t historii mĂ© registrace"
                        : "Zobrazit historii mĂ© registrace"}
                </button>
            </div>

            {/* tabulka se vykreslĂ­ jen kdyĹľ je showHistory = true */}
            {showHistory && (
                <MatchRegistrationHistory matchId={match.id} />
            )}

            {/* Modal s vĂ˝bÄ›rem tĂ˝mu */}
            <TeamSelectModal
                isOpen={showTeamModal}
                onClose={() => setShowTeamModal(false)}
                match={match}
                defaultTeam={defaultTeam || "LIGHT"}
                onSelectTeam={handleSelectTeam}
            />
        </div>
    );
};

export default MatchDetail;


==================================================
src\components\matches\MatchForm.jsx
==================================================

// src/components/matches/MatchForm.jsx
import DateTimePicker from "../forms/DateTimePicker";

const MatchForm = ({ values, onChange, errors = {} }) => {
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    const dateTimeClass = "form-control" + (errors.dateTime ? " is-invalid" : "");
    const locationClass = "form-control" + (errors.location ? " is-invalid" : "");
    const descriptionClass = "form-control" + (errors.description ? " is-invalid" : "");
    const maxPlayersClass = "form-control" + (errors.maxPlayers ? " is-invalid" : "");
    const priceClass = "form-control" + (errors.price ? " is-invalid" : "");

    return (
        <div>
            <h2 className="h5 mb-3">ZĂˇpas</h2>

            {/* DATUM + ÄŚAS */}
            <div className="mb-3">
                <label className="form-label" htmlFor="match-dateTime">
                    Datum a ÄŤas zĂˇpasu
                </label>

                <DateTimePicker
                    id="match-dateTime"
                    name="dateTime"
                    value={values.dateTime || ""}
                    onChange={(valueString) => onChange({ dateTime: valueString })}
                    placeholder="Vyber datum a ÄŤasâ€¦"
                    required
                    className={dateTimeClass}
                />

                <div className="form-text">Vyber datum a ÄŤas zaÄŤĂˇtku zĂˇpasu.</div>

                {errors.dateTime && (
                    <div className="invalid-feedback d-block">
                        {errors.dateTime}
                    </div>
                )}
            </div>

            {/* MĂŤSTO */}
            <div className="mb-3">
                <label className="form-label" htmlFor="match-location">
                    MĂ­sto konĂˇnĂ­
                </label>
                <input
                    type="text"
                    id="match-location"
                    name="location"
                    className={locationClass}
                    value={values.location || ""}
                    onChange={handleInputChange}
                    placeholder="NapĹ™. WERK ARĂ‰NA"
                />
                {errors.location && (
                    <div className="invalid-feedback">
                        {errors.location}
                    </div>
                )}
            </div>

            {/* POPIS */}
            <div className="mb-3">
                <label className="form-label" htmlFor="match-description">
                    Popis (volitelnĂ©)
                </label>
                <textarea
                    id="match-description"
                    name="description"
                    className={descriptionClass}
                    value={values.description || ""}
                    onChange={handleInputChange}
                    rows={3}
                    placeholder="NapĹ™. pĹ™ĂˇtelskĂ© utkĂˇnĂ­, vezmÄ›te si svÄ›tlĂ© dresyâ€¦"
                />
                {errors.description && (
                    <div className="invalid-feedback">
                        {errors.description}
                    </div>
                )}
            </div>

            {/* MAX PLAYERS */}
            <div className="mb-3">
                <label className="form-label" htmlFor="match-maxPlayers">
                    MaximĂˇlnĂ­ poÄŤet hrĂˇÄŤĹŻ
                </label>
                <input
                    type="number"
                    id="match-maxPlayers"
                    name="maxPlayers"
                    className={maxPlayersClass}
                    value={values.maxPlayers ?? ""}
                    onChange={handleInputChange}
                    min={1}
                />
                {errors.maxPlayers && (
                    <div className="invalid-feedback">
                        {errors.maxPlayers}
                    </div>
                )}
            </div>

            {/* PRICE */}
            <div className="mb-3">
                <label className="form-label" htmlFor="match-price">
                    Cena (celkem)
                </label>
                <input
                    type="number"
                    id="match-price"
                    name="price"
                    className={priceClass}
                    value={values.price ?? ""}
                    onChange={handleInputChange}
                    min={0}
                />
                {errors.price && (
                    <div className="invalid-feedback">
                        {errors.price}
                    </div>
                )}
            </div>
        </div>
    );
};

export default MatchForm;


==================================================
src\components\matches\MatchHeader.jsx
==================================================

// src/components/MatchHeader.jsx
//import "./MatchHeader.css";

const formatDateTime = (dateTime) => {
    if (!dateTime) return null;

    const iso = dateTime.replace(" ", "T");
    const d = new Date(iso);

    const dayName = new Intl.DateTimeFormat("cs-CZ", {
        weekday: "long",
    }).format(d);

    const datePart = new Intl.DateTimeFormat("cs-CZ", {
        day: "2-digit",
        month: "2-digit",
        year: "numeric",
    }).format(d);

    const timePart = d.toLocaleTimeString("cs-CZ", {
        hour: "2-digit",
        minute: "2-digit",
    });

    return {
        day: dayName.charAt(0).toUpperCase() + dayName.slice(1),
        dateTime: `${datePart}  ${timePart}`,
    };
};

const MatchHeader = ({ match }) => {
    const formatted = formatDateTime(match?.dateTime);

    if (!formatted) return null;

    return (
        <div className="match-header text-center mb-3">
            <h4 className="match-header-day">
                {formatted.day} {"  #"}{match.matchNumber}
            </h4>

            <h5 className="match-header-date">
                {formatted.dateTime}
            </h5>

            <p className="match-header-location">
                {match.location}
            </p>
        </div>
    );
};

export default MatchHeader;


==================================================
src\components\matches\MatchInfo.jsx
==================================================

// src/components/MatchInfo.jsx
import { useState } from "react";
import MatchRegistrationInfo from "../MatchRegistration/MatchRegistrationInfo";
import RoleGuard from "../RoleGuard";
import { useNotification } from "../../context/NotificationContext";
import {
    markNoExcusedAdmin,
    cancelNoExcusedAdmin,
} from "../../api/matchRegistrationApi";

const parseDateTime = (dt) => {
    if (!dt) return null;
    const safe = dt.replace(" ", "T");
    const d = new Date(safe);
    return Number.isNaN(d.getTime()) ? null : d;
};

const MatchInfo = ({ match, onRefresh }) => {
    const { showNotification } = useNotification();

    const [showNoExcuseModal, setShowNoExcuseModal] = useState(false);
    const [showCancelNoExcuseModal, setShowCancelNoExcuseModal] =
        useState(false);
    const [saving, setSaving] = useState(false);

    const matchDate = parseDateTime(match?.dateTime);
    const now = new Date();
    const isPastMatch = matchDate ? matchDate < now : false;

    // seznamy hrĂˇÄŤĹŻ pro vĂ˝bÄ›r
    const registeredPlayers = match?.registeredPlayers ?? [];
    const noExcusedPlayers = match?.noExcusedPlayers ?? [];

    const handleMarkNoExcuse = async (playerId, adminNote) => {
        try {
            setSaving(true);
            await markNoExcusedAdmin(
                match.id,
                playerId,
                adminNote && adminNote.trim()
                    ? adminNote.trim()
                    : "Admin: bez omluvy"
            );
            showNotification("HrĂˇÄŤ byl oznaÄŤen jako bez omluvy.", "success");
            if (onRefresh) {
                await onRefresh();
            }
            setShowNoExcuseModal(false);
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                err?.message ||
                "NeomluvenĂ­ hrĂˇÄŤe se nezdaĹ™ilo.";
            showNotification(msg, "danger");
        } finally {
            setSaving(false);
        }
    };

    const handleCancelNoExcuse = async (playerId, excuseNote) => {
        try {
            setSaving(true);
            await cancelNoExcusedAdmin(
                match.id,
                playerId,
                excuseNote && excuseNote.trim()
                    ? excuseNote.trim()
                    : "Admin: omluven - JINĂ‰"
            );
            showNotification(
                "NeomluvenĂ­ bylo zruĹˇeno (hrĂˇÄŤ omluven - JINĂ‰).",
                "success"
            );
            if (onRefresh) {
                await onRefresh();
            }
            setShowCancelNoExcuseModal(false);
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                err?.message ||
                "ZruĹˇenĂ­ neomluvenĂ­ se nezdaĹ™ilo.";
            showNotification(msg, "danger");
        } finally {
            setSaving(false);
        }
    };

    return (
        <div className="card">
            <div className="card-body">
              {/* HLAVIÄŚKA â€“ vlevo info o zĂˇpase, vpravo admin tlaÄŤĂ­tka */}
                <div className="d-flex justify-content-between align-items-start mb-3">
                    <div>
                        {match.description && (
                            <p className="card-text mb-2">
                                <strong>Popis: </strong>
                                {match.description}
                            </p>
                        )}

                        <p className="card-text mb-2">
                            <strong>HrĂˇÄŤi celkem: </strong>
                            {match.inGamePlayers} / {match.maxPlayers}
                        </p>

                        <p className="card-text mb-2">
                            <strong>RozdÄ›lenĂ­ tĂ˝mĹŻ: </strong>
                            {match.inGamePlayersDark} /{" "}
                            {match.inGamePlayersLight}
                        </p>

                        {match.price != null && (
                            <p className="card-text mb-2">
                                <strong>Cena zĂˇpasu: </strong>
                                {match.price} KÄŤ
                            </p>
                        )}

                        {match.pricePerRegisteredPlayer != null && (
                            <p className="card-text mb-2">
                                <strong>Cena / hrĂˇÄŤ: </strong>
                                {match.pricePerRegisteredPlayer.toFixed(0)} KÄŤ
                            </p>
                        )}
                    </div>

                    {/* PRAVĂť HORNĂŤ ROH â€“ jen pro ADMIN/MANAGER a jen u uplynulĂ©ho zĂˇpasu */}
                    <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                        {isPastMatch && (
                            <div className="d-flex flex-column gap-2 text-end">
                                <button
                                    type="button"
                                    className="btn btn-sm btn-outline-danger"
                                    disabled={
                                        registeredPlayers.length === 0 ||
                                        saving
                                    }
                                    onClick={() => setShowNoExcuseModal(true)}
                                >
                                    Neomluvit hrĂˇÄŤe
                                </button>

                                <button
                                    type="button"
                                    className="btn btn-sm btn-outline-secondary"
                                    disabled={
                                        noExcusedPlayers.length === 0 ||
                                        saving
                                    }
                                    onClick={() =>
                                        setShowCancelNoExcuseModal(true)
                                    }
                                >
                                    ZruĹˇit neomluvenĂ­
                                </button>
                            </div>
                        )}
                    </RoleGuard>
                </div>

                <h4 className="mt-4">Sestava:</h4>
                <MatchRegistrationInfo match={match} />
            </div>

            {/* MODAL â€“ NEOMLUVIT HRĂÄŚE */}
            {showNoExcuseModal && (
                <NoExcuseModal
                    match={match}
                    saving={saving}
                    onConfirm={handleMarkNoExcuse}
                    onClose={() => !saving && setShowNoExcuseModal(false)}
                />
            )}

            {/* MODAL â€“ ZRUĹ IT NEOMLUVENĂŤ */}
            {showCancelNoExcuseModal && (
                <CancelNoExcuseModal
                    match={match}
                    saving={saving}
                    onConfirm={handleCancelNoExcuse}
                    onClose={() =>
                        !saving && setShowCancelNoExcuseModal(false)
                    }
                />
            )}
        </div>
    );
};

// === MODAL: Neomluvit hrĂˇÄŤe ===
const NoExcuseModal = ({ match, saving, onConfirm, onClose }) => {
    const [selectedPlayerId, setSelectedPlayerId] = useState("");
    const [note, setNote] = useState("NepĹ™iĹˇel bez omluvy");
    const registered = match?.registeredPlayers ?? [];

    const handleSubmit = (e) => {
        e.preventDefault();
        if (!selectedPlayerId) return;
        onConfirm(Number(selectedPlayerId), note);
    };

    return (
        <div className="modal d-block" tabIndex="-1">
            <div className="modal-dialog">
                <div className="modal-content">
                    <form onSubmit={handleSubmit}>
                        <div className="modal-header">
                            <h5 className="modal-title">Neomluvit hrĂˇÄŤe</h5>
                            <button
                                type="button"
                                className="btn-close"
                                onClick={onClose}
                                disabled={saving}
                            />
                        </div>
                        <div className="modal-body">
                            <p>
                                Vyber hrĂˇÄŤe, kterĂ©ho chceĹˇ oznaÄŤit jako{" "}
                                <strong>bez omluvy</strong> pro tento zĂˇpas.
                            </p>

                            <div className="mb-3">
                                <label className="form-label">HrĂˇÄŤ</label>
                                <select
                                    className="form-select"
                                    value={selectedPlayerId}
                                    onChange={(e) =>
                                        setSelectedPlayerId(e.target.value)
                                    }
                                    disabled={saving || registered.length === 0}
                                >
                                    <option value="">
                                        Vyber hrĂˇÄŤeâ€¦
                                    </option>
                                    {registered.map((p) => (
                                        <option key={p.id} value={p.id}>
                                            {p.fullName ??
                                                `${p.name} ${p.surname}`}
                                        </option>
                                    ))}
                                </select>
                            </div>
                            <div className="mb-3">
                                <label className="form-label">PoznĂˇmka (volitelnĂ©)</label>
                                <textarea
                                    className="form-control"
                                    rows="2"
                                    value={note}
                                    onChange={(e) => setNote(e.target.value)}
                                    disabled={saving}
                                    placeholder="DĹŻvod neomluvenĂ­ hrĂˇÄŤeâ€¦"
                                />
                                <div className="form-text">
                                    PoznĂˇmka se uloĹľĂ­ k tomuto neomluvenĂ­ hrĂˇÄŤe.
                                </div>
                            </div>


                            {registered.length === 0 && (
                                <div className="alert alert-info">
                                    Pro tento zĂˇpas nejsou k dispozici ĹľĂˇdnĂ­
                                    registrovanĂ­ hrĂˇÄŤi.
                                </div>
                            )}
                        </div>
                        <div className="modal-footer">
                            <button
                                type="button"
                                className="btn btn-secondary"
                                onClick={onClose}
                                disabled={saving}
                            >
                                ZavĹ™Ă­t
                            </button>
                            <button
                                type="submit"
                                className="btn btn-danger"
                                disabled={
                                    saving ||
                                    !selectedPlayerId ||
                                    registered.length === 0
                                }
                            >
                                {saving
                                    ? "UklĂˇdĂˇmâ€¦"
                                    : "OznaÄŤit jako bez omluvy"}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    );
};

// === MODAL: ZruĹˇit neomluvenĂ­ ===
const CancelNoExcuseModal = ({ match, saving, onConfirm, onClose }) => {
    const [selectedPlayerId, setSelectedPlayerId] = useState("");
    const [note, setNote] = useState("Omluven - nakonec opravdu nemohl");

    const noExcused = match?.noExcusedPlayers ?? [];

    const handleSubmit = (e) => {
        e.preventDefault();
        if (!selectedPlayerId) return;
        onConfirm(Number(selectedPlayerId), note);
    };

    return (
        <div className="modal d-block" tabIndex="-1">
            <div className="modal-dialog">
                <div className="modal-content">
                    <form onSubmit={handleSubmit}>
                        <div className="modal-header">
                            <h5 className="modal-title">
                                ZruĹˇit neomluvenĂ­ hrĂˇÄŤe
                            </h5>
                            <button
                                type="button"
                                className="btn-close"
                                onClick={onClose}
                                disabled={saving}
                            />
                        </div>
                        <div className="modal-body">
                            <p>
                                Vyber hrĂˇÄŤe, u kterĂ©ho chceĹˇ zruĹˇit neomluvenĂ­.
                            </p>

                            <div className="mb-3">
                                <label className="form-label">HrĂˇÄŤ</label>
                                <select
                                    className="form-select"
                                    value={selectedPlayerId}
                                    onChange={(e) =>
                                        setSelectedPlayerId(e.target.value)
                                    }
                                    disabled={saving || noExcused.length === 0}
                                >
                                    <option value="">
                                        Vyber hrĂˇÄŤeâ€¦
                                    </option>
                                    {noExcused.map((p) => (
                                        <option key={p.id} value={p.id}>
                                            {p.fullName ??
                                                `${p.name} ${p.surname}`}
                                        </option>
                                    ))}
                                </select>
                            </div>
                            <div className="mb-3">
                                <label className="form-label">PoznĂˇmka k omluvenĂ­ (volitelnĂ©)</label>
                                <textarea
                                    className="form-control"
                                    rows="2"
                                    value={note}
                                    onChange={(e) => setNote(e.target.value)}
                                    disabled={saving}
                                    placeholder="DĹŻvod, proÄŤ je hrĂˇÄŤ dodateÄŤnÄ› omluvenâ€¦"
                                />
                                <div className="form-text">
                                    PoznĂˇmka se uloĹľĂ­ k omluvenĂ­ tohoto hrĂˇÄŤe.
                                </div>
                            </div>
                            {noExcused.length === 0 && (
                                <div className="alert alert-info">
                                    Pro tento zĂˇpas nenĂ­ nikdo oznaÄŤen jako
                                    â€žbez omluvyâ€ś.
                                </div>
                            )}
                        </div>
                        <div className="modal-footer">
                            <button
                                type="button"
                                className="btn btn-secondary"
                                onClick={onClose}
                                disabled={saving}
                            >
                                ZavĹ™Ă­t
                            </button>
                            <button
                                type="submit"
                                className="btn btn-primary"
                                disabled={
                                    saving ||
                                    !selectedPlayerId ||
                                    noExcused.length === 0
                                }
                            >
                                {saving
                                    ? "UklĂˇdĂˇmâ€¦"
                                    : "ZruĹˇit neomluvenĂ­ a omluvit"}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    );
};

export default MatchInfo;


==================================================
src\components\matches\MatchOverview.jsx
==================================================

import React from "react";
import { Link } from "react-router-dom";
import { format } from 'date-fns';


const MatchOverview = ({ match }) => {
    if (!match) return null;

    const formattedDateTime = format(match.dateTime, 'dd.MM.yyyy HH:mm');

    return (
        <section className="mb-3">
            <div className="card h-100">
                <div className="card-body">
                    <h5 className="card-title">
                        Hokej #{match.id} â€“ {match.location}
                    </h5>

                    <h6 className="card-subtitle mb-2 text-muted">
                        {formattedDateTime.toLocaleString()}

                    </h6>

                    {match.description && (
                        <p className="card-text">{match.description}</p>
                    )}

                    <p className="card-text">
                        <strong>MaximĂˇl hrĂˇÄŤi:</strong> {match.maxPlayers}
                    </p>

                    <p className="card-text">
                        <strong>Cena:</strong> {match.price} KÄŤ
                    </p>
                    <p className="card-text">
                        <strong>Cena za hrĂˇÄŤe:</strong> {match.pricePerRegisterdPlayer} KÄŤ
                    </p>


                    <Link
                        to={`/match/${match.id}`}
                        className="btn btn-primary mt-2"
                    >
                        Detail ÄŤehokoliv
                    </Link>
                </div>
            </div>
        </section>
    );
};


export default MatchOverview;

==================================================
src\components\matches\PastMatches.css
==================================================

/* =========================
   KONTEJNER SEZNAMU UPLYNULĂťCH ZĂPASĹ®
   ========================= */
.past-match-list {
    display: flex;
    flex-direction: column;
    /* â¬… mĂ­sto gridu jeden sloupec */
    gap: 12px;
}

/* kaĹľdĂ˝ zĂˇpas pĹ™es celou ĹˇĂ­Ĺ™ku */
.past-match-item {
    width: 100%;
    display: flex;
}



==================================================
src\components\matches\PastMatches.jsx
==================================================

// src/components/matches/PastMatches.jsx
import { useState } from "react";
import { useMyPassedMatches } from "../../hooks/useMyPassedMatches";
import { useCurrentPlayer } from "../../hooks/useCurrentPlayer";
import MatchCard from "./MatchCard";
import { useNavigate } from "react-router-dom";

import "./PastMatches.css";

const FILTERS = {
    ALL: "ALL",
    REGISTERED: "REGISTERED",
    EXCUSED_UNREGISTERED: "EXCUSED_UNREGISTERED",
    NO_RESPONSE_SUBSTITUTE: "NO_RESPONSE_SUBSTITUTE",
};

/**
 * VrĂˇtĂ­ true, pokud danĂ˝ zĂˇpas odpovĂ­dĂˇ zvolenĂ©mu filtru.
 */
const matchPassesFilter = (match, filter) => {
    const status = match.playerMatchStatus;

    switch (filter) {
        case FILTERS.REGISTERED:
            return status === "REGISTERED";

        case FILTERS.EXCUSED_UNREGISTERED:
            return status === "EXCUSED" || status === "UNREGISTERED";

        case FILTERS.NO_RESPONSE_SUBSTITUTE:
            return status === "NO_RESPONSE" || status === "SUBSTITUTE";

        case FILTERS.ALL:
        default:
            return true;
    }
};

const PastMatches = () => {
    const { matches, loading, error } = useMyPassedMatches();
    const { currentPlayer } = useCurrentPlayer();
    const navigate = useNavigate();

    const [filter, setFilter] = useState(FILTERS.ALL);

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm uplynulĂ© zĂˇpasyâ€¦</p>;
    }

    if (error) {
        return (
            <div className="container mt-4 text-center">
                <p className="mb-3 text-danger">{error}</p>
                <button
                    className="btn btn-primary"
                    onClick={() => navigate("/app/players")}
                >
                    Vybrat aktuĂˇlnĂ­ho hrĂˇÄŤe
                </button>
            </div>
        );
    }

    if (!currentPlayer) {
        return (
            <div className="container mt-4 text-center">
                <p className="mb-3">
                    NemĂˇte vybranĂ©ho aktuĂˇlnĂ­ho hrĂˇÄŤe.
                </p>
                <button
                    className="btn btn-primary"
                    onClick={() => navigate("/app/players")}
                >
                    Vybrat hrĂˇÄŤe
                </button>
            </div>
        );
    }

    if (matches.length === 0) {
        return (
            <div className="container mt-3 text-center">
                <h4>UplynulĂ© zĂˇpasy</h4>
                <p>ZatĂ­m nemĂˇte ĹľĂˇdnĂ© uplynulĂ© zĂˇpasy.</p>
            </div>
        );
    }

    const sortedMatches = matches
        .slice()
        .sort((a, b) => new Date(b.dateTime) - new Date(a.dateTime));

    // poÄŤty pro badge u jednotlivĂ˝ch filtrĹŻ
    const counts = {
        all: sortedMatches.length,
        registered: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.REGISTERED)
        ).length,
        excusedUnregistered: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.EXCUSED_UNREGISTERED)
        ).length,
        noResponseSubstitute: sortedMatches.filter((m) =>
            matchPassesFilter(m, FILTERS.NO_RESPONSE_SUBSTITUTE)
        ).length,
    };

    const filteredMatches = sortedMatches.filter((m) =>
        matchPassesFilter(m, filter)
    );

    return (
        <div className="container mt-3">
            <h4 className="mb-3 text-center">
                UplynulĂ© zĂˇpasy:
            </h4>

            {/* FiltrovacĂ­ tlaÄŤĂ­tka */}
            <div className="d-flex justify-content-center mb-3">
                <div
                    className="btn-group"
                    role="group"
                    aria-label="Filtr uplynulĂ˝ch zĂˇpasĹŻ"
                >
                    <button
                        type="button"
                        className={
                            filter === FILTERS.ALL
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.ALL)}
                    >
                        VĹˇe{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.all}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.REGISTERED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.REGISTERED)}
                    >
                        Byl{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.registered}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.EXCUSED_UNREGISTERED
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.EXCUSED_UNREGISTERED)}
                    >
                        OdhlĂˇĹˇen / omluven{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.excusedUnregistered}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.NO_RESPONSE_SUBSTITUTE
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() =>
                            setFilter(FILTERS.NO_RESPONSE_SUBSTITUTE)
                        }
                    >
                        Nereagoval / moĹľnĂˇ{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.noResponseSubstitute}
                        </span>
                    </button>
                </div>
            </div>

            {/* Info, kdyĹľ filtr nic nevrĂˇtĂ­ */}
            {filteredMatches.length === 0 && (
                <p className="text-center mb-3">
                    Pro zvolenĂ˝ filtr nemĂˇte ĹľĂˇdnĂ© uplynulĂ© zĂˇpasy.
                </p>
            )}

            <div className="past-match-list">
                {filteredMatches.map((m) => (
                    <div className="past-match-item" key={m.id}>
                        <MatchCard
                            match={m}
                            onClick={() =>
                                navigate(`/app/matches/${m.id}`, {
                                    state: { isPast: true },
                                })
                            }
                            disabledTooltip="Nebyl jsi, nemĂˇĹˇ oprĂˇvnÄ›nĂ­"
                            condensed
                        />
                    </div>
                ))}
            </div>
        </div>
    );
};

export default PastMatches;


==================================================
src\components\matches\UpcomingMatches.css
==================================================

/* =========================
   KONTEJNER SEZNAMU ZĂPASĹ®
   ========================= */
.match-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
}

.match-item {
    display: flex;
    align-items: flex-start;
}

/* jmĂ©no hrĂˇÄŤe nad seznamem */
.player-name {
    color: #010e5a;
}

/* =========================
   RĂMEÄŚEK PRO NEJBLIĹ˝Ĺ ĂŤ ZĂPAS
   ========================= */


@media (min-width: 768px) {
    .next-match-frame {
        position: relative;
        display: inline-block;
        width: fit-content;
        max-width: 100%;
        border-radius: 16px;
    }

    .next-match-frame--on {
        position: relative;
        display: inline-block;
        width: fit-content;
        max-width: 100%;
        padding: 10px;
        border-radius: 18px;
        border: 2px solid rgba(13, 110, 253, 0.45);
        background: rgba(13, 110, 253, 0.06);
        box-shadow:
            0 14px 28px rgba(0, 0, 0, 0.12),
            0 0 0 6px rgba(13, 110, 253, 0.06);
        transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .next-match-frame--on:hover {
        transform: translateY(-1px);
        box-shadow:
            0 16px 32px rgba(0, 0, 0, 0.14),
            0 0 0 8px rgba(13, 110, 253, 0.08);
    }
}

/* badge */
.next-match-badge {
    position: absolute;
    top: -12px;
    left: 14px;
    z-index: 2;

    padding: 5px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 800;
    letter-spacing: 0.2px;

    color: #0d6efd;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(13, 110, 253, 0.35);
    backdrop-filter: blur(8px);
}

/* =========================
   MOBIL â€“ FULL WIDTH (ĹľĂˇdnĂ© â€ždesktop uprostĹ™edâ€ś)
   ========================= */
@media (max-width: 767.98px) {
    .match-list {
        justify-content: flex-start;
        /* mĂ­sto center */
    }

    .match-item {
        width: 100%;
        justify-content: stretch;
        /* mĂ­sto center */
    }

    .match-item--next {
        width: 100%;
        justify-content: stretch;
        scroll-margin-top: 90px;
        /* aĹĄ scroll neskonÄŤĂ­ pod hlaviÄŤkou */
    }

    
    .next-match-frame,
    .next-match-frame--on {
        position: relative;
        display: block;
        width: 100%;
        max-width: 100%;
        border-radius: 16px;
    }

    
    .next-match-frame--on {
        padding: 10px;
        border-radius: 18px;
        border: 2px solid rgba(13, 110, 253, 0.45);
        background: rgba(13, 110, 253, 0.06);
        box-shadow:
            0 14px 28px rgba(0, 0, 0, 0.12),
            0 0 0 6px rgba(13, 110, 253, 0.06);
        transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
}

==================================================
src\components\matches\UpcomingMatches.jsx
==================================================

// src/components/matches/UpcomingMatches.jsx
import { useEffect, useRef } from "react";
import { useMyUpcomingMatches } from "../../hooks/useMyUpcomingMatches";
import { useCurrentPlayer } from "../../hooks/useCurrentPlayer";
import MatchCard from "./MatchCard";
import { useNavigate } from "react-router-dom";

import "./UpcomingMatches.css";

const UpcomingMatches = () => {
  const { matches, loading, error } = useMyUpcomingMatches();
  const { currentPlayer } = useCurrentPlayer();
  const navigate = useNavigate();

  const firstMatchRef = useRef(null);
  const hasAutoScrolledRef = useRef(false);

  useEffect(() => {
    if (loading || error) return;
    if (!currentPlayer) return;
    if (!Array.isArray(matches) || matches.length === 0) return;

    // jen jednou po naÄŤtenĂ­
    if (hasAutoScrolledRef.current) return;

    const isSmallDevice = window.matchMedia("(max-width: 767.98px)").matches;
    if (!isSmallDevice) return;

    // auto-scroll jen pokud je uĹľivatel "nahoĹ™e" (nezlobĂ­me, kdyĹľ uĹľ scrolluje)
    const isNearTop = window.scrollY < 200;
    if (!isNearTop) return;

    if (firstMatchRef.current) {
      hasAutoScrolledRef.current = true;

      window.setTimeout(() => {
        firstMatchRef.current?.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }, 150);
    }
  }, [loading, error, currentPlayer, matches]);

  if (loading) {
    return <p>NaÄŤĂ­tĂˇm nadchĂˇzejĂ­cĂ­ zĂˇpasyâ€¦</p>;
  }

  if (error) {
    return (
      <div className="container mt-4 text-center">
        <p className="mb-3 text-danger">{error}</p>
        <button
          className="btn btn-primary"
          onClick={() => navigate("/app/players")}
        >
          Vybrat aktuĂˇlnĂ­ho hrĂˇÄŤe
        </button>
      </div>
    );
  }

  if (!currentPlayer) {
    return (
      <div className="container mt-4 text-center">
        <p className="mb-3">
          NemĂˇte vybranĂ©ho aktuĂˇlnĂ­ho hrĂˇÄŤe.
          <br />
          ProsĂ­m vyberte si hrĂˇÄŤe, pro kterĂ©ho chcete zobrazit
          nadchĂˇzejĂ­cĂ­ zĂˇpasy.
        </p>
        <button
          className="btn btn-primary"
          onClick={() => navigate("/app/players")}
        >
          Vybrat hrĂˇÄŤe
        </button>
      </div>
    );
  }

  if (matches.length === 0) {
    return (
      <div className="container mt-3">
        <h3 className="mb-3 text-center">
          NadchĂˇzejĂ­cĂ­ zĂˇpasy pro {currentPlayer.fullName}
        </h3>
        <div className="text-center">
          <p>AktuĂˇlnÄ› nemĂˇte ĹľĂˇdnĂ© nadchĂˇzejĂ­cĂ­ zĂˇpasy.</p>
          <p>MoĹľnĂˇ nejsou v tĂ©to sezĂłnÄ› zatĂ­m ĹľĂˇdnĂ© vytvoĹ™enĂ©, </p>
          <p>nebo jste veden jako dlouhodobÄ› "Mimo Hru".</p>
        </div>
      </div>
    );
  }

  return (
    <div className="container mt-3">
      <h4 className="mb-1 text-center player-name">
        {currentPlayer.fullName}
      </h4>
      <h4 className="mb-3 text-center">
        NadchĂˇzejĂ­cĂ­ zĂˇpasy:
      </h4>

      <div className="match-list">
        {matches.map((m, idx) => {
          const isNext = idx === 0;

          return (
            <div
              className={`match-item ${isNext ? "match-item--next" : ""}`}
              key={m.id}
              ref={isNext ? firstMatchRef : null}
            >
              <div
                className={`next-match-frame ${isNext ? "next-match-frame--on" : ""
                  }`}
                aria-label={isNext ? "NejbliĹľĹˇĂ­ zĂˇpas" : undefined}
              >
                {isNext && (
                  <div className="next-match-badge">
                    NejbliĹľĹˇĂ­ zĂˇpas
                  </div>
                )}

                <MatchCard
                  match={m}
                  onClick={() =>
                    navigate(`/app/matches/${m.id}`, {
                      state: { isPast: false },
                    })
                  }
                />
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
};

export default UpcomingMatches;


==================================================
src\components\matchRegistration\ExcuseModal.jsx
==================================================

// src/components/matchRegistraion/ExcuseModal.jsx
import React from "react";
import { EXCUSE_REASON_OPTIONS } from "../../constants/excuseReason";
import { useGlobalModal } from "../../hooks/useGlobalModal";


const ExcuseModal = ({
    show,
    saving = false,
    isUnregisterFlow = false,
    selectedReason,
    excuseNote,
    onChangeReason,
    onChangeNote,
    onClose,
    onSubmit,
}) => {
 

    if (!show) return null;

    useGlobalModal(show);

    const modalTitle = isUnregisterFlow
        ? "OdhlĂˇsit se ze zĂˇpasu"
        : "Omluvit se ze zĂˇpasu";

    const submitButtonClass = isUnregisterFlow ? "btn btn-info" : "btn btn-warning";

    const submitButtonText = isUnregisterFlow
        ? "Odeslat odhlĂˇĹˇenĂ­"
        : "Odeslat omluvu";

    const handleBackdropClick = () => {
        if (!saving) onClose?.();
    };

    const stopPropagation = (e) => e.stopPropagation();

    return (
        <>
            <div
                className="modal fade show d-block"
                tabIndex="-1"
                role="dialog"
                aria-modal="true"
                onClick={handleBackdropClick}
            >
                <div className="modal-dialog modal-dialog-centered" role="document" onClick={stopPropagation}>
                    <div className="modal-content">
                        <div className="modal-header">
                            <h5 className="modal-title">{modalTitle}</h5>
                            <button
                                type="button"
                                className="btn-close"
                                onClick={onClose}
                                disabled={saving}
                                aria-label="ZavĹ™Ă­t"
                            />
                        </div>

                        <div className="modal-body">
                            <p>Vyberte dĹŻvod:</p>

                            {EXCUSE_REASON_OPTIONS.map((opt) => (
                                <div className="form-check" key={opt.value}>
                                    <input
                                        className="form-check-input"
                                        type="radio"
                                        name="excuseReason"
                                        id={`excuse-${opt.value}`}
                                        value={opt.value}
                                        checked={selectedReason === opt.value}
                                        onChange={(e) => onChangeReason?.(e.target.value)}
                                        disabled={saving}
                                    />
                                    <label
                                        className="form-check-label"
                                        htmlFor={`excuse-${opt.value}`}
                                    >
                                        {opt.label}
                                    </label>
                                </div>
                            ))}

                            <div className="mt-3">
                                <label className="form-label">
                                    PoznĂˇmka (volitelnĂ©):
                                </label>
                                <textarea
                                    className="form-control"
                                    rows={3}
                                    value={excuseNote}
                                    onChange={(e) => onChangeNote?.(e.target.value)}
                                    disabled={saving}
                                />
                            </div>
                        </div>

                        <div className="modal-footer">
                            <button
                                type="button"
                                className="btn btn-secondary"
                                onClick={onClose}
                                disabled={saving}
                            >
                                ZavĹ™Ă­t
                            </button>
                            <button
                                type="button"
                                className={submitButtonClass}
                                onClick={onSubmit}
                                disabled={saving}
                            >
                                {submitButtonText}
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div className="modal-backdrop fade show" />
        </>
    );
};

export default ExcuseModal;


==================================================
src\components\matchRegistration\MatchRegistrationHistory.jsx
==================================================

// src/components/MatchRegistration/MatchRegistrationHistory.jsx
import { useMyMatchRegistrationHistory } from "../..//hooks/useMatchRegistrationHistory";
import {
    excuseReasonLabel,
    formatDateTime,
    statusLabel,
    teamLabel
} from "../../utils/registrationFormatter";

const MatchRegistrationHistory = ({ matchId }) => {
    const { history, loading, error } = useMyMatchRegistrationHistory(matchId);

    if (loading) return <p>NaÄŤĂ­tĂˇm historiiâ€¦</p>;
    if (error) return <p className="text-danger">{error}</p>;

    if (history.length === 0) {
        return <p>Ĺ˝ĂˇdnĂˇ historie registracĂ­.</p>;
    }
    const sortedHistory = [...history].sort(
        (a, b) => new Date(b.changedAt) - new Date(a.changedAt)
    );


    return (
        <div className="table-responsive">
            <table className="table table-sm table-striped table-hover align-middle">
                <thead className="table-light">
                    <tr>
                        <th>Datum zmÄ›ny</th>
                        <th>Status</th>
                        <th>TĂ˝m</th>
                        <th>ZmÄ›nil</th>
                        <th>PoznĂˇmka</th>
                    </tr>
                </thead>
                <tbody>
                    {sortedHistory.map((item) => (
                        <tr key={item.id}>
                            <td>{formatDateTime(item.changedAt)}</td>
                            <td>
                                <span className="text">
                                    <strong>{statusLabel(item.status)}</strong>
                                </span>

                            </td>
                            <td>{teamLabel(item.team)}</td>
                            <td>{item.createdBy}</td>
                            <td>
                                {excuseReasonLabel(item.excuseReason)} {" - "}
                                {item.adminNote || item.excuseNote}
                            </td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    );
};

export default MatchRegistrationHistory;


==================================================
src\components\matchRegistration\MatchRegistrationInfo.css
==================================================

/* wrapper dvou sloupcĹŻ */
.match-reg-info {
    display: flex;
    flex-wrap: wrap;
    /* â† Tohle je to, co ti chybÄ›lo */
    gap: 1rem;
    margin-top: 1rem;
}

/* jednotlivĂ˝ sloupec */
.match-reg-team-col {
    flex: 1;
    border: 1px solid #ddd;
    border-radius: 0.5rem;
    padding: 0.5rem;
    background: #fafafa;
}

/* hlaviÄŤka sloupce â€“ ikona + poÄŤet */
.match-reg-team-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

/* ikona tĂ˝mu â€“ vlastnĂ­ className, aby se to nebilo s .team-icon jinde */
.match-reg-team-icon-dark {
    font-size: 32px;
    flex-shrink: 0;
    color: rgb(4, 59, 163);
}

.match-reg-team-icon-light {
    font-size: 32px;
    flex-shrink: 0;
}

/* poÄŤet hrĂˇÄŤĹŻ */
.match-reg-team-count {
    font-weight: bold;
}

/* seznam hrĂˇÄŤĹŻ pod sebou */
.match-reg-player-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* kaĹľdĂ˝ hrĂˇÄŤ na vlastnĂ­ Ĺ™Ăˇdek */
.match-reg-player-item {
    display: block;
    padding: 0;
    margin: 0;
}

/* text pro prĂˇzdnĂ˝ seznam */
.match-reg-player-empty {
    color: #888;
    font-style: italic;
}

.match-reg-other-col {
    margin-top: 4px;
    width: 100%;
}

/* đźź˘ REGISTERED */
.match-registered-r {
    color: #018520;
}

/* âšŞ UNREGISTERED */
.match-unregistered-r {
    color: #f17108;
}

/* đź”µ EXCUSED */
.match-excused-r {
    color: #ffc107;
}

/* đźź  RESERVED */
.match-reserved-r {
color: #0d6efd;
}

/* đźźˇ NO_RESPONSE */
.match-no-response-r {
color: #ffc107;
}

/* đź”´ NO_EXCUSED */
.match-no-excused-r {
    color: #dc3545;
}
/* đź”´ NO_EXCUSED */
.match-substituted-r {
    color: #ffc107;
}

@media (max-width: 768px) {
    .match-reg-info {
        flex-direction: column;
    }
}

==================================================
src\components\matchRegistration\MatchRegistrationInfo.jsx
==================================================

// src/components/MatchRegistration/MatchRegistrationInfo.jsx
import "./MatchRegistrationInfo.css"
import {
    RegisteredIcon,
    UnregisteredIcon,
    ExcusedIcon,
    ReservedIcon,
    NoResponseIcon,
    NoExcusedIcon,
    UserIcon,
    MoneyIcon,
} from "../../icons";

import React from "react";
import { TeamDarkIcon, TeamLightIcon } from "../../icons";
import "./MatchRegistrationInfo.css";

const MatchRegistrationInfo = ({ match }) => {
    const darkPlayers = match?.registeredDarkPlayers ?? [];
    const lightPlayers = match?.registeredLightPlayers ?? [];
    const reservedPlayers = match?.reservedPlayers ?? [];
    const excusedPlayers = match?.excusedPlayers ?? [];
    const unregisteredPlayers = match?.unregisteredPlayers ?? [];
    const substitudedPlayers = match?.substitutedPlayers ?? [];
    const noExcusedPlayers = match?.noExcusedPlayers ?? [];
    const noResponsePlayers = match?.noResponsePlayers ?? [];
    const noActionPlayers = match?.noActionPlayers ?? 0;

    // registered uĹľ vlastnÄ› ani nepotĹ™ebujeĹˇ, ale kdyĹľ tak:
    const registered = match?.registeredPlayers ?? [];

    return (
        <div className="match-reg-info">

            {/* DARK */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <TeamDarkIcon className="match-reg-team-icon-dark" />
                    <span className="match-reg-team-count">
                        {match.inGamePlayersDark}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {darkPlayers.length === 0 && (
                        <li className="match-reg-player-empty">Ĺ˝ĂˇdnĂ­ hrĂˇÄŤi</li>
                    )}
                    {darkPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            {p.fullName}
                        </li>
                    ))}
                </ul>
            </div>
            {/* LIGHT */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <TeamLightIcon className="match-reg-team-icon-light" />
                    <span className="match-reg-team-count">
                        {match.inGamePlayersLight}
                    </span>
                </div>

                <ul className="match-reg-player-list mb-1">
                    {lightPlayers.length === 0 && (
                        <li className="match-reg-player-empty">Ĺ˝ĂˇdnĂ­ hrĂˇÄŤi</li>
                    )}
                    {lightPlayers.map((p) => (
                        <li key={p.id} className="match-reg-player-item">
                            {p.fullName}
                        </li>
                    ))}
                </ul>
            </div>
          
            
            <div className="match-reg-other-col"></div>
            <h5>OstatnĂ­ statusy:</h5>
            <div className="match-reg-other-col"></div>
            {/* OdhlĂˇĹˇenĂ­ */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <UnregisteredIcon className="match-unregistered-r" />
                OdhlĂˇĹˇenĂ­ - 
                    <span className="match-reg-team-count">
                        {unregisteredPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {unregisteredPlayers.length === 0 && (
                        <li className="match-reg-player-empty">nikdo se neodhlĂˇsil</li>
                    )}
                    {unregisteredPlayers.map((p) => (<li key={p.id} className="match-reg-player-item">
                        {p.fullName}
                    </li>
                    ))}
                </ul>
            </div>
            
            {/* OMLUVENĂŤ */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <ExcusedIcon className="match-excused-r" />
                    OmluvenĂ­ - 
                    <span className="match-reg-team-count">
                        {excusedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {excusedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">nikdo se neomluvil</li>
                    )}
                    {excusedPlayers.map((p) => (<li key={p.id} className="match-reg-player-item">
                        {p.fullName}
                    </li>
                    ))}
                </ul>
            </div>
            {/* NĂˇhradnĂ­ci */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <ReservedIcon className="match-reserved-r" />
                    NĂˇhradnĂ­cĂ­ -
                    <span className="match-reg-team-count">
                        {reservedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {reservedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">ĹľĂˇdnĂ˝ nĂˇhradnĂ­k</li>
                    )}
                    {reservedPlayers.map((p) => (<li key={p.id} className="match-reg-player-item">
                        {p.fullName}
                    </li>
                    ))}
                </ul>
            </div>

         <div className="match-reg-other-col"></div>
            {/* MoĹľnĂˇ */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <NoResponseIcon className="match-no-response-r" />
                    MoĹľnĂˇ budou -
                    <span className="match-reg-team-count">
                        {substitudedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {substitudedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">ĹľĂˇdnĂ˝ nĂˇhradnĂ­k</li>
                    )}
                    {substitudedPlayers.map((p) => (<li key={p.id} className="match-reg-player-item">
                        {p.fullName}
                    </li>
                    ))}
                </ul>
            </div>
           
            {/* Bez reakce */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <NoResponseIcon className="match-no-response-r" />
                    ZatĂ­m nereagovali -
                    <span className="match-reg-team-count">
                        {noActionPlayers}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {noActionPlayers === 0 && (
                        <li className="match-reg-player-empty">vĹˇichni reagovali</li>
                    )}

                    {noResponsePlayers.map((p) => (<li key={p.id} className="match-reg-player-item">
                        {p.fullName}
                    </li>
                    ))}
                </ul>
            </div>
           
            {/* Bez omluvy */}
            <div className="match-reg-team-col">
                <div className="match-reg-team-header">
                    <NoExcusedIcon className="match-no-excused-r" />
                    Bez omluvy -
                    <span className="match-reg-team-count">
                        {noExcusedPlayers.length}
                    </span>
                </div>

                <ul className="match-reg-player-list">
                    {noExcusedPlayers.length === 0 && (
                        <li className="match-reg-player-empty">vĹˇe OK</li>
                    )}                    
                    {noExcusedPlayers.map((p) => (<li key={p.id} className="match-reg-player-item">
                        {p.fullName}
                    </li>
                    ))}
                </ul>
            </div>

            
        </div>
    );
};
export default MatchRegistrationInfo;


==================================================
src\components\matchRegistration\TeamSelectModal.css
==================================================



==================================================
src\components\matchRegistration\TeamSelectModal.jsx
==================================================

// src/components/matchRegistration/TeamSelectModal.jsx
import React from "react";
import { TeamDarkIcon, TeamLightIcon } from "../../icons";
import "./TeamSelectModal.css";
import { useGlobalModal } from "../../hooks/useGlobalModal";

const TeamSelectModal = ({
    isOpen,
    onClose,
    match,
    defaultTeam = "LIGHT",
    onSelectTeam,
    onBeforeSelectTeam,
}) => {
 
    useGlobalModal(isOpen);

    if (!isOpen) return null;

    const lightCount = match?.inGamePlayersLight ?? 0;
    const lightMax = match?.maxPlayersLight ?? match?.maxPlayers ?? 0;

    const darkCount = match?.inGamePlayersDark ?? 0;
    const darkMax = match?.maxPlayersDark ?? match?.maxPlayers ?? 0;

    const isLightDefault = defaultTeam === "LIGHT";
    const isDarkDefault = defaultTeam === "DARK";

    const handleSelect = async (team) => {
        if (!onSelectTeam) return;
       
        if (onBeforeSelectTeam) {
            await onBeforeSelectTeam();
        }

        onSelectTeam(team);
    };

    return (
        <div
            className="modal d-block"
            tabIndex="-1"
            role="dialog"
            style={{ backgroundColor: "rgba(0,0,0,0.5)" }}
        >
            <div className="modal-dialog modal-dialog-centered" role="document">
                <div className="modal-content">
                    <div className="modal-header">
                        <h5 className="modal-title">Vyber tĂ˝m pro tento zĂˇpas</h5>
                        <button type="button" className="btn-close" onClick={onClose}></button>
                    </div>

                    <div className="modal-body">
                        <p className="mb-3 text-center">
                            Po kliknutĂ­ na tĂ˝m se <strong>provede registrace</strong> k zĂˇpasu.
                        </p>

                        <div className="team-cards-row">
                            {/* DARK */}
                            <div
                                className={
                                    "card team-card text-center " +
                                    (isDarkDefault ? "border-primary" : "")
                                }
                                style={{ cursor: "pointer" }}
                                onClick={() => handleSelect("DARK")}
                            >
                                <div className="card-body">
                                    <div className="team-icon-wrapper">
                                        <TeamDarkIcon className="team-icon base" />
                                    </div>

                                    <p className="card-text mb-1">
                                        HrĂˇÄŤi: <strong>{darkCount} / {darkMax / 2}</strong>
                                    </p>
                                    <small className="text-muted">TmavĂ© dresy</small>
                                </div>
                            </div>

                            {/* LIGHT */}
                            <div
                                className={
                                    "card team-card text-center " +
                                    (isLightDefault ? "border-primary" : "")
                                }
                                style={{ cursor: "pointer" }}
                                onClick={() => handleSelect("LIGHT")}
                            >
                                <div className="card-body">
                                    <div className="team-icon-wrapper">
                                        <TeamLightIcon className="team-icon overlay" />
                                    </div>

                                    <p className="card-text mb-1">
                                        HrĂˇÄŤi: <strong>{lightCount} / {lightMax / 2}</strong>
                                    </p>
                                    <small className="text-muted">SvÄ›tlĂ© dresy</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="modal-footer">
                        <button type="button" className="btn btn-secondary" onClick={onClose}>
                            ZruĹˇit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default TeamSelectModal;


==================================================
src\components\players\CreatePlayerForm.jsx
==================================================

import { useState } from "react";
import RoleGuard from "../RoleGuard";

const CreatePlayerForm = ({ onSubmit, onCancel, submitting }) => {
    const [name, setName] = useState("");
    const [surname, setSurname] = useState("");
    const [nickName, setNickName] = useState("");
    const [phoneNumber, setPhoneNumber] = useState("");
    const [team, setTeam] = useState("DARK");
    const [type, setType] = useState("BASIC");

    const handleSubmit = (e) => {
        e.preventDefault();

        onSubmit({
            name,
            surname,
            nickName: nickName || null,
            phoneNumber: phoneNumber || null,
            team,
            type,
        });
    };

    return (
        <form onSubmit={handleSubmit}>
            <div className="mb-3">
                <label className="form-label">JmĂ©no *</label>
                <input
                    type="text"
                    className="form-control"
                    value={name}
                    onChange={(e) => setName(e.target.value)}
                    required
                    minLength={2}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">PĹ™Ă­jmenĂ­ *</label>
                <input
                    type="text"
                    className="form-control"
                    value={surname}
                    onChange={(e) => setSurname(e.target.value)}
                    required
                    minLength={2}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">
                    PĹ™ezdĂ­vka (nepovinnĂ©)
                </label>
                <input
                    type="text"
                    className="form-control"
                    value={nickName}
                    onChange={(e) => setNickName(e.target.value)}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">
                    Telefon (nepovinnĂ©)
                </label>
                <input
                    type="tel"
                    className="form-control"
                    value={phoneNumber}
                    onChange={(e) => setPhoneNumber(e.target.value)}
                />
            </div>

            <div className="mb-3">
                <label className="form-label">TĂ˝m</label>
                <select
                    className="form-select"
                    value={team}
                    onChange={(e) => setTeam(e.target.value)}
                >
                    <option value="DARK">DARK</option>
                    <option value="LIGHT">LIGHT</option>
                </select>
            </div>
            <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER", "ROLE_PLAYER"]}>
                <div className="mb-3">
                    <label className="form-label">Typ</label>
                        <select                            
                            className="form-select"
                            value={type}
                        onChange={(e) => setType(e.target.value)}
                        >
                            <option value="BASIC">zĂˇkladnĂ­</option>
                            <option value="STANDARD">standardnĂ­</option>
                            <option value="VIP">VIP</option>
                        </select>
                        <div className="form-text">
                            Typ hrĂˇÄŤe - pro zobrazenĂ­ nadchĂˇzejĂ­cĂ­ch zĂˇpasĹŻ (odpovĂ­dĂˇ enumu Typ).
                                        </div>
                </div>
            </RoleGuard> 

            <div className="d-flex justify-content-between mt-4">
                <button
                    type="button"
                    className="btn btn-outline-secondary"
                    onClick={onCancel}
                    disabled={submitting}
                >
                    ZruĹˇit
                </button>

                <button
                    type="submit"
                    className="btn btn-primary"
                    disabled={submitting}
                >
                    {submitting ? "UklĂˇdĂˇmâ€¦" : "VytvoĹ™it hrĂˇÄŤe"}
                </button>
            </div>
        </form>
    );
};

export default CreatePlayerForm;


==================================================
src\components\players\PlayerCard.css
==================================================

/* =========================
   KARTA HRĂÄŚE â€“ ZĂKLAD
   ========================= */
.player-card {
    position: relative;

    width: 100%;
    max-width: 250px;
    flex: 1 1 250px;

    margin-top: 20px;
    padding: 20px;

    display: flex;
    flex-direction: column;

    background-color: #ffffff;
    border: 2px solid #dee2e6;
    border-radius: 12px;

    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.1);

    transition:
        transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.player-card--active {
    border: 3px solid #0d6efd;
    /* Bootstrap primary */
    box-shadow: 0 0 0 4px #0e489e;
}

/* =========================
   OVERLAY TOOLTIP
   ========================= */
.player-card-tooltip {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: rgba(0, 0, 0, 0.65);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 0.9rem;
    text-align: center;
    padding: 0 12px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

/* zobrazit overlay po najetĂ­ */
.player-card--disabled:hover .player-card-tooltip {
    opacity: 1;
}

/* =========================
   KoleÄŤko u vybranĂ©ho hrĂˇÄŤe
   ========================= */
.active-indicator {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 1.5rem;
}

/* aktivnĂ­ hrĂˇÄŤ */
.active-indicator.active {
    color: #1329a1;
}

/* neaktivnĂ­ hrĂˇÄŤ */
.active-indicator.inactive {
    color: #a0a5aa;
}

/* =========================
   INTERAKCE â€“ JEN APPROVED
   ========================= */
.player-card.clickable {
    cursor: pointer;
}

.player-card.clickable:hover {
    transform: translateY(-4px) scale(1.02);
}

.player-card.clickable:active {
    transform: scale(1.01);
}

.player-card.clickable:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.4);
}

/* =========================
   ZAKĂZANĂ‰ KARTY
   ========================= */
.player-card--disabled {
    cursor: not-allowed;
    opacity: 0.85;
}

.player-card--disabled:hover,
.player-card--disabled:active,
.player-card--disabled:focus-visible {
    transform: none;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
}

/* =========================
   STAVY HRĂÄŚE (BARVY)
   ========================= */
.player-approved {
    background-color: #64e98a;
    border-color: #3da361;
}

.player-pending {
    background-color: #fff4e5;
    border-color: #ffd8a8;
}

.player-rejected {
    background-color: #fdecea;
    border-color: #f5c2c7;
}

/* =========================
   IKONA TĂťMU (OVERLAY)
   ========================= */
.team-icon-wrapper {
    position: relative;
    display: inline-block;
    width: 42px;
    height: 42px;
}

.team-icon {
    position: absolute;
    top: 0;
    left: 0;
    font-size: 42px;
    line-height: 1;
    background: transparent;
}

.team-icon.base {
    color: #045ee6;
}

.team-icon.overlay {
    color: #001833;
}

/* DARK tĂ˝m */
.team-icon-wrapper.team-dark .team-icon.base {
    color: #045ee6;
}

/* LIGHT tĂ˝m */
.team-icon-wrapper.team-light .team-icon.base {
    color: #ffffff;
}

/* =========================
   TELEFON
   ========================= */
.phone-icon {
    color: #0d6efd;
    margin-right: 6px;
}

/* =========================
   RESPONSIVE
   ========================= */
@media (max-width: 576px) {
    .player-card {
            .player-card {
                    width: 100% !important;
                    max-width: 100% !important;
                }
            flex: 1 1 100%;
        }
}

==================================================
src\components\players\PlayerCard.jsx
==================================================

// src/components/PlayerCard.jsx
import RoleGuard from "../RoleGuard";
import { PhoneIcon, TeamDarkIcon, TeamLightIcon, PlayerIcon } from "../../icons";
import { formatPhoneNumber } from "../../utils/formatPhoneNumber";
import "./PlayerCard.css";

const statusClassMap = {
    APPROVED: "player-approved",
    PENDING: "player-pending",
    REJECTED: "player-rejected",
};

const statusTextMap = {
    PENDING: "ÄŤekĂˇ na schvĂˇlenĂ­",
    REJECTED: "zamĂ­tnuto",
    APPROVED: "schvĂˇleno",
};

const PlayerCard = ({ player, onSelect, isActive, disabledTooltip }) => {
    const playerStatus = player.playerStatus ?? "PENDING";

    const statusClass = statusClassMap[playerStatus] || "";
    const statusText = statusTextMap[playerStatus] ?? playerStatus;

    const isApproved = playerStatus === "APPROVED";
    const isDarkTeam = player.team === "DARK";

    const hasDisabledTooltip = !!disabledTooltip;
    const isDisabled = !isApproved && hasDisabledTooltip;

    const isClickable = isApproved && !!onSelect && !isDisabled;

    return (
        <div
            className={[
                "player-card",
                statusClass,
                isClickable ? "clickable" : "",
                isDisabled ? "player-card--disabled" : "",
                isActive ? "player-card--active" : "",
            ]
                .filter(Boolean)
                .join(" ")}
            role={isClickable ? "button" : undefined}
            tabIndex={isClickable ? 0 : -1}
            onClick={isClickable ? onSelect : undefined}
            onKeyDown={
                isClickable
                    ? (e) => e.key === "Enter" && onSelect()
                    : undefined
            }
        >
            {/* IndikĂˇtor aktivnĂ­ho hrĂˇÄŤe v pravĂ©m hornĂ­m rohu */}
            <PlayerIcon
                className={`active-indicator ${isActive ? "active" : "inactive"
                    }`}
            />

            <div className="card-body">
                <h5 className="card-title mb-4 mt-3 text-center">
                    {player.fullName}
                </h5>

                <div className="mb-2 text-center">
                    <div
                        className={`team-icon-wrapper ${isDarkTeam ? "team-dark" : "team-light"
                            }`}
                    >
                        <TeamDarkIcon className="team-icon base" />
                        <TeamLightIcon className="team-icon overlay" />
                    </div>
                </div>

                <RoleGuard roles={["ROLE_ADMIN"]}>
                    <p className="card-text text-center mb-2">
                        <strong>Typ:</strong> {player.type}
                    </p>
                </RoleGuard>

                <p className="card-text text-center mb-2">
                    <strong>Status:</strong> {statusText}
                </p>

                <p className="card-text text-center mb-2">
                    <PhoneIcon className="phone-icon" />+
                    {formatPhoneNumber(player.phoneNumber)}
                </p>
            </div>

            {isDisabled && (
                <div className="player-card-tooltip">
                    {disabledTooltip}
                </div>
            )}
        </div>
    );
};

export default PlayerCard;


==================================================
src\components\players\PlayerMatchStatus.css
==================================================

/* zĂˇklad */
.player-match-status {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
}

/* ikona */
.player-match-status-icon {
    font-size: 1.5rem;
}

/* text */
.player-match-status-text {
    font-size: 1.5rem;
}

/* ===== STAVY HRĂÄŚE (BARVY) â€“ podle modifieru ===== */

.player-match-status--registered .player-match-status-icon {
    color: #018520;
}

.player-match-status--registered .player-match-status-text {
    color: #030303;
}

.player-match-status--unregistered .player-match-status-icon {
    color: #f17108;
}

.player-match-status--unregistered .player-match-status-text {
    color: #030303;
}

.player-match-status--excused .player-match-status-icon {
    color: #ffc107;
}

.player-match-status--excused .player-match-status-text {
    color: #030303;
}

.player-match-status--reserved .player-match-status-icon {
    color: #0d6efd;
}

.player-match-status--reserved .player-match-status-text {
    color: #030303;
}

.player-match-status--no_response .player-match-status-icon {
    color: #ddda0a;
}

.player-match-status--no_response .player-match-status-text {
    color: #030303;
}

.player-match-status--no_excused .player-match-status-icon {
    color: #dc3545;
}

.player-match-status--no_excused .player-match-status-text {
    color: #750b16;
}

==================================================
src\components\players\PlayerMatchStatus.jsx
==================================================

import "./PlayerMatchStatus.css";

import {
    RegisteredIcon,
    UnregisteredIcon,
    ExcusedIcon,
    ReservedIcon,
    NoResponseIcon,
    NoExcusedIcon,
} from "../../icons";

/**
 * Ikony pro STAV HRĂÄŚE v zĂˇpase
 */
const PLAYER_MATCH_STATUS_ICON_MAP = {
    REGISTERED: RegisteredIcon,
    UNREGISTERED: UnregisteredIcon,
    EXCUSED: ExcusedIcon,
    SUBSTITUTE: ExcusedIcon,
    RESERVED: ReservedIcon,
    NO_RESPONSE: NoResponseIcon,
    NO_EXCUSED: NoExcusedIcon,
};

/**
 * Texty â€“ nadchĂˇzejĂ­cĂ­ zĂˇpas
 */
const PLAYER_MATCH_STATUS_TEXT_UPCOMING = {
    REGISTERED: "pĹ™ihlĂˇĹˇen",
    UNREGISTERED: "odhlĂˇĹˇen",
    EXCUSED: "omluven",
    SUBSTITUTE: "moĹľnĂˇ",
    RESERVED: "nĂˇhradnĂ­k",
    NO_RESPONSE: "nepĹ™ihlĂˇĹˇen",
    NO_EXCUSED: "neomluven",
};

/**
 * Texty â€“ uplynulĂ˝ zĂˇpas
 */
const PLAYER_MATCH_STATUS_TEXT_PAST = {
    REGISTERED: "byl jsem",
    UNREGISTERED: "nebyl jsem",
    EXCUSED: "nemohl jsem",
    SUBSTITUTE: "nebyl jsem",
    RESERVED: "byl jsem nĂˇhradnĂ­k",
    NO_RESPONSE: "nereagoval jsem",
    NO_EXCUSED: "nepĹ™iĹˇel jsem",
};

const PlayerMatchStatus = ({
    playerMatchStatus,
    variant = "upcoming",
}) => {
    // đź”ą sjednocenĂ­ â€“ vĹľdy pracujeme s jednou promÄ›nnou
    const normalizedStatus = playerMatchStatus ?? "NO_RESPONSE";

    const StatusIcon = PLAYER_MATCH_STATUS_ICON_MAP[normalizedStatus];

    const textMap =
        variant === "past"
            ? PLAYER_MATCH_STATUS_TEXT_PAST
            : PLAYER_MATCH_STATUS_TEXT_UPCOMING;

    const text = textMap[normalizedStatus] ?? normalizedStatus;

    const modifier = normalizedStatus.toLowerCase(); // REGISTERED -> registered, NO_RESPONSE -> no_response

    return (
        <div className="text-center mb-3">
            <span
                className={`
                    player-match-status
                    player-match-status--${modifier}
                `}
            >
                {StatusIcon && (
                    <StatusIcon className="player-match-status-icon" />
                )}
                <strong className="player-match-status-text">
                    {text}
                </strong>
            </span>
        </div>
    );
};

export default PlayerMatchStatus;


==================================================
src\components\players\Players.css
==================================================

/* =========================
   KONTEJNER SEZNAMU HRĂÄŚĹ®
   ========================= */
.player-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 16px;
}

.player-item {
    display: flex;
    max-width: 360px;
}

/* =========================
   ZVĂťRAZNÄšNĂŤ VYBRANĂ‰HO HRĂÄŚE
   ========================= */
.selected-player-frame {
    position: relative;
    border-radius: 16px;
}

.selected-player-frame--on {
    display: inline-block;
    padding: 10px;
    border-radius: 18px;

    border: 2px solid rgba(13, 110, 253, 0.45);
    background: rgba(13, 110, 253, 0.06);

    box-shadow:
        0 14px 28px rgba(0, 0, 0, 0.12),
        0 0 0 6px rgba(13, 110, 253, 0.06);

    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.selected-player-frame--on:hover {
    transform: translateY(-1px);
    box-shadow:
        0 16px 32px rgba(0, 0, 0, 0.14),
        0 0 0 8px rgba(13, 110, 253, 0.08);
}

.selected-player-badge {
    position: absolute;
    top: -12px;
    left: 14px;
    z-index: 2;

    padding: 5px 10px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 800;
    letter-spacing: 0.2px;

    color: #0d6efd;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(13, 110, 253, 0.35);
    backdrop-filter: blur(8px);
}

==================================================
src\components\players\Players.jsx
==================================================

// src/components/Players.jsx
import { usePlayers } from "../../hooks/usePlayers";
import PlayerCard from "./PlayerCard";
import { setCurrentPlayer } from "../../api/playerApi";
import { useNavigate } from "react-router-dom";
import { useCurrentPlayer } from "../../hooks/useCurrentPlayer";

import "./Players.css";

const Players = () => {
    const { players, loading, error } = usePlayers();
    const navigate = useNavigate();

    const { currentPlayer, refreshCurrentPlayer } = useCurrentPlayer();

    const handleSelectPlayer = async (playerId) => {
        try {
            await setCurrentPlayer(playerId);
            await refreshCurrentPlayer();
            navigate("/app/matches");
        } catch (err) {
            console.error("Nelze nastavit aktuĂˇlnĂ­ho hrĂˇÄŤe", err);
            alert("NepodaĹ™ilo se vybrat hrĂˇÄŤe.");
        }
    };

    if (loading) return <p>NaÄŤĂ­tĂˇm hrĂˇÄŤeâ€¦</p>;
    if (error) return <p className="text-danger">{error}</p>;

    if (players.length === 0) {
        return (
            <div className="text-center mt-4">
                <p className="mb-3">
                    JeĹˇtÄ› nemĂˇte vytvoĹ™enĂ©ho ĹľĂˇdnĂ©ho hrĂˇÄŤe.
                    <br />
                    Chcete ho nynĂ­ vytvoĹ™it?
                </p>

                <button
                    className="btn btn-primary"
                    onClick={() => navigate("/app/createPlayer")}
                >
                    VytvoĹ™it hrĂˇÄŤe
                </button>
            </div>
        );
    }

    return (
        <div className="container mt-3">
            <div className="player-list">
                {players.map((p) => {
                    const isActive = currentPlayer?.id === p.id;

                    const disabledTooltip =
                        p.playerStatus === "PENDING"
                            ? "HrĂˇÄŤ ÄŤekĂˇ na schvĂˇlenĂ­ administrĂˇtorem"
                            : p.playerStatus === "REJECTED"
                                ? "HrĂˇÄŤ byl zamĂ­tnut administrĂˇtorem"
                                : "";

                    return (
                        <div className="player-item" key={p.id}>
                            <div
                                className={`selected-player-frame ${isActive ? "selected-player-frame--on" : ""
                                    }`}
                                aria-label={isActive ? "VybranĂ˝ hrĂˇÄŤ" : undefined}
                            >
                                {isActive && (
                                    <div className="selected-player-badge">
                                        VybranĂ˝ hrĂˇÄŤ
                                    </div>
                                )}

                                <PlayerCard
                                    player={p}
                                    // âś… nechĂˇme false, aby se neruĹˇily rĂˇmeÄŤky
                                    isActive={false}
                                    onSelect={() => handleSelectPlayer(p.id)}
                                    disabledTooltip={disabledTooltip}
                                />
                            </div>
                        </div>
                    );
                })}
            </div>

            <div className="text-center mt-4">
                <button
                    className="btn btn-outline-primary"
                    onClick={() => navigate("/app/createPlayer")}
                >
                    PĹ™idat dalĹˇĂ­ho hrĂˇÄŤe
                </button>
            </div>
        </div>
    );
};

export default Players;


==================================================
src\components\players\PlayerStats.jsx
==================================================

// src/components/players/PlayerStats.jsx
import React, { useMemo } from "react";
import SeasonSelect from "../seasons/seasonSelect";
import PlayerStatsCharts from "./PlayerStatsCharts";

const PlayerStats = ({ stats, loading, error, onReload, onSeasonChange }) => {
    const safeNum = (v) => (Number.isFinite(Number(v)) ? Number(v) : 0);

    const teamLabel = (team) => {
        if (team === "LIGHT") return "Light";
        if (team === "DARK") return "Dark";
        return "â€”";
    };

    const totals = useMemo(() => {
        const allMatchesInSeason = safeNum(stats?.allMatchesInSeason);
        const allMatchesInSeasonForPlayer = safeNum(stats?.allMatchesInSeasonForPlayer);

        const registered = safeNum(stats?.registered);
        const unregistered = safeNum(stats?.unregistered);
        const excused = safeNum(stats?.excused);
        const substituted = safeNum(stats?.substituted);
        const reserved = safeNum(stats?.reserved);
        const noResponse = safeNum(stats?.noResponse);
        const noExcused = safeNum(stats?.noExcused);

        const responded = registered + unregistered + excused + substituted + reserved;
        const denominator = allMatchesInSeasonForPlayer > 0 ? allMatchesInSeasonForPlayer : 0;

        const responseRate = denominator > 0 ? Math.round((responded / denominator) * 100) : 0;
        const noResponseRate = denominator > 0 ? Math.round((noResponse / denominator) * 100) : 0;

        // registrace (REGISTERED) podle tĂ˝mu
        const registeredByTeam = stats?.registeredByTeam ?? {};
        const registeredLight = safeNum(registeredByTeam?.LIGHT);
        const registeredDark = safeNum(registeredByTeam?.DARK);

        // domĂˇcĂ­ tĂ˝m
        const homeTeam = stats?.homeTeam ?? null;

        return {
            allMatchesInSeason,
            allMatchesInSeasonForPlayer,
            registered,
            unregistered,
            excused,
            substituted,
            reserved,
            noResponse,
            noExcused,
            responded,
            responseRate,
            noResponseRate,
            denominator,

            homeTeam,
            registeredLight,
            registeredDark,
        };
    }, [stats]);

    const StatCard = ({ label, value, helper }) => (
        <div className="col-12 col-md-6 col-xl-3">
            <div className="card h-100 shadow-sm">
                <div className="card-body">
                    <div className="text-muted small">{label}</div>
                    <div className="display-6 mb-0">{loading ? "â€¦" : value}</div>
                    {helper ? <div className="text-muted small mt-2">{helper}</div> : null}
                </div>
            </div>
        </div>
    );

    const Row = ({ label, value, total, badge }) => {
        const v = safeNum(value);
        const t = safeNum(total);
        const pct = t > 0 ? Math.round((v / t) * 100) : 0;

        return (
            <div className="mb-3">
                <div className="d-flex justify-content-between align-items-center mb-1">
                    <div className="d-flex align-items-center gap-2">
                        <span className="fw-semibold">{label}</span>
                        {badge ? <span className={`badge ${badge}`}> </span> : null}
                    </div>
                    <div className="text-muted small">
                        {loading ? "â€¦" : `${v} / ${t}`}{" "}
                        <span className="ms-2">{loading ? "" : `${pct}%`}</span>
                    </div>
                </div>
                <div className="progress" style={{ height: 8 }}>
                    <div
                        className="progress-bar"
                        role="progressbar"
                        style={{ width: `${loading ? 0 : pct}%` }}
                        aria-valuenow={pct}
                        aria-valuemin="0"
                        aria-valuemax="100"
                    />
                </div>
            </div>
        );
    };

    return (
        <div className="card shadow-sm">
            <div className="card-header bg-white d-flex justify-content-between align-items-center">
                <div className="fw-semibold">Statistiky hrĂˇÄŤe - pouze pro jiĹľ probÄ›hlĂ© zĂˇpasy</div>

                <div className="d-flex gap-2 align-items-center">
                    <SeasonSelect
                        onSeasonChange={async (id) => {
                            // 1) nejdĹ™Ă­v zmÄ›nit sezĂłnu (uloĹľit do backendu/contextu)
                            await onSeasonChange?.(id);

                            // 2) potom ihned naÄŤĂ­st novĂ© statistiky
                            await onReload?.();
                        }}
                    />

                    {onReload ? (
                        <button
                            type="button"
                            className="btn btn-sm btn-outline-secondary"
                            onClick={onReload}
                            disabled={loading}
                            title="Znovu naÄŤĂ­st statistiky"
                        >
                            Obnovit
                        </button>
                    ) : null}
                </div>
            </div>

            <div className="card-body">
                {error ? (
                    <div className="alert alert-danger mb-3" role="alert">
                        {error}
                    </div>
                ) : null}

                {!loading && !error && !stats ? (
                    <div className="text-muted">Statistiky nejsou k dispozici.</div>
                ) : null}

                {/* Metriky */}
                <div className="row g-3 mb-3">
                    <StatCard
                        label="ZĂˇpasy v sezĂłnÄ›"
                        value={totals.allMatchesInSeason}
                        helper="CelkovĂ˝ poÄŤet v aktuĂˇlnĂ­ sezĂłnÄ›"
                    />
                    <StatCard
                        label="ZĂˇpasy pro hrĂˇÄŤe"
                        value={totals.allMatchesInSeasonForPlayer}
                        helper="DostupnĂ© pro aktuĂˇlnĂ­ho hrĂˇÄŤe"
                    />
                    <StatCard
                        label="MĂ­ra reakcĂ­"
                        value={loading ? "â€¦" : `${totals.responseRate}%`}
                        helper="Reakce (ano/ne/omluva/â€¦) vs. dostupnĂ© zĂˇpasy"
                    />
                    <StatCard
                        label="Bez reakce"
                        value={loading ? "â€¦" : `${totals.noResponseRate}%`}
                        helper="PodĂ­l zĂˇpasĹŻ bez odpovÄ›di"
                    />
                </div>

                {/* âś… Grafy: donut + bar */}
                <PlayerStatsCharts totals={totals} loading={loading} />

                {/* TĂ˝movĂ© info */}
                <div className="alert alert-light border mb-3">
                    <div className="d-flex flex-column flex-md-row justify-content-between gap-2">
                        <div>
                            <div className="fw-semibold">DomĂˇcĂ­ tĂ˝m</div>
                            <div className="text-muted small">
                                TĂ˝m uloĹľenĂ˝ u hrĂˇÄŤe v profilu.
                            </div>
                        </div>
                        <div className="fs-5 fw-semibold">
                            {loading ? "â€¦" : teamLabel(totals.homeTeam)}
                        </div>
                    </div>

                    <hr className="my-3" />

                    <div className="d-flex flex-column flex-md-row justify-content-between gap-2">
                        <div>
                            <div className="fw-semibold">Za kterĂ˝ tĂ˝m hrĂˇl v sezĂłnÄ›</div>
                            <div className="text-muted small">
                                PoÄŤet ĂşÄŤastĂ­ na odehranĂ˝ch zĂˇpasech podle tĂ˝mu.
                            </div>
                        </div>
                        <div className="fs-6">
                            {loading ? (
                                "â€¦"
                            ) : (
                                <>
                                    <span className="fw-semibold">Light:</span> {totals.registeredLight}
                                    <span className="mx-2">/</span>
                                    <span className="fw-semibold">Dark:</span> {totals.registeredDark}
                                </>
                            )}
                        </div>
                    </div>
                </div>

                <hr />

                {/* Detail */}
                <div className="fw-semibold mb-2">Historie zĂˇpasu hrĂˇÄŤe</div>

                <Row label="Byl" value={totals.registered} total={totals.denominator} />
                <Row label="Nebyl" value={totals.unregistered} total={totals.denominator} />
                <Row label="Nemohl" value={totals.excused} total={totals.denominator} />
                <Row label="Dal moĹľnĂˇ" value={totals.substituted} total={totals.denominator} />
                <Row label="ÄŚekal na mĂ­sto" value={totals.reserved} total={totals.denominator} />
                <Row label="Nereagoval" value={totals.noResponse} total={totals.denominator} />

                <div className="alert alert-light border mt-3 mb-0">
                    <div className="d-flex justify-content-between align-items-center">
                        <div>
                            <div className="fw-semibold">NeomluvenĂˇ neĂşÄŤast</div>
                            <div className="text-muted small">
                                ZĂˇpasy, kde hrĂˇÄŤ nenastoupil a nebyl omluven.
                            </div>
                        </div>
                        <div className="fs-4">{loading ? "â€¦" : totals.noExcused}</div>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default PlayerStats;


==================================================
src\components\players\PlayerStatsCharts.jsx
==================================================

// src/components/players/PlayerStatsCharts.jsx
import React, { useMemo } from "react";
import {
    ResponsiveContainer,
    PieChart,
    Pie,
    Cell,
    Tooltip,
    Legend,
    BarChart,
    Bar,
    XAxis,
    YAxis,
    CartesianGrid,
} from "recharts";

/**
 * Barvy dle statusĹŻ (sjednocenĂ© s UI kartami).
 */
const STATUS_COLORS = {
    registered: "#29d158",    // match-registered
    unregistered: "#ffe066",  // match-unregistered (border)
    excused: "#27c3f3",       // match-excused (vychĂˇzĂ­ z modrĂ©)
    substituted: "#ffd43b",   // "moĹľnĂˇ" â€“ ĹľlutĂˇ (nemĂˇĹˇ v kartÄ› explicitnÄ›, dĂˇvĂˇ smysl)
    reserved: "#0d6efd",      // reserved (ikonka je modrĂˇ)
    noResponse: "#adb5bd",    // no-response ĹˇedĂˇ
    noExcused: "#dc3545",     // no-excused ÄŤervenĂˇ
};

const PlayerStatsCharts = ({ totals, loading }) => {
    const safeNum = (v) => (Number.isFinite(Number(v)) ? Number(v) : 0);

    const series = useMemo(() => {
        const items = [
            { key: "registered", label: "Byl", value: safeNum(totals?.registered) },
            { key: "unregistered", label: "ZruĹˇil", value: safeNum(totals?.unregistered) },
            { key: "excused", label: "Omluvil se", value: safeNum(totals?.excused) },
            { key: "substituted", label: "Dal moĹľnĂˇ", value: safeNum(totals?.substituted) },
            { key: "reserved", label: "ÄŚekal mĂ­sto", value: safeNum(totals?.reserved) },
            { key: "noResponse", label: "Nereagoval", value: safeNum(totals?.noResponse) },
            // pokud chceĹˇ i do grafu:
            // { key: "noExcused", label: "Neomluven", value: safeNum(totals?.noExcused) },
        ];

        // do grafĹŻ necpeme nuly (ÄŤistĹˇĂ­ grafy)
        return items
            .filter((i) => i.value > 0)
            .map((i) => ({
                ...i,
                color: STATUS_COLORS[i.key] || "#0d6efd",
            }));
    }, [totals]);

    const totalSum = useMemo(
        () => series.reduce((acc, i) => acc + i.value, 0),
        [series]
    );

    const TooltipBox = ({ active, payload }) => {
        if (!active || !payload || payload.length === 0) return null;

        // u Pie i u Bar tohle typicky sedĂ­
        const p = payload[0]?.payload;
        if (!p) return null;

        const pct = totalSum > 0 ? Math.round((p.value / totalSum) * 100) : 0;

        return (
            <div className="p-2 bg-white border rounded shadow-sm">
                <div className="fw-semibold">{p.label}</div>
                <div className="text-muted small">
                    {p.value} {totalSum > 0 ? `(${pct}%)` : ""}
                </div>
            </div>
        );
    };

    if (loading) {
        return (
            <div className="row g-3 mb-3">
                <div className="col-12 col-lg-6">
                    <div className="card shadow-sm h-100">
                        <div className="card-header bg-white fw-semibold">
                            Moje registrace na zĂˇpasy
                        </div>
                        <div className="card-body text-muted">NaÄŤĂ­tĂˇm grafâ€¦</div>
                    </div>
                </div>

                <div className="col-12 col-lg-6">
                    <div className="card shadow-sm h-100">
                        <div className="card-header bg-white fw-semibold">
                            PorovnĂˇnĂ­ statusĹŻ
                        </div>
                        <div className="card-body text-muted">NaÄŤĂ­tĂˇm grafâ€¦</div>
                    </div>
                </div>
            </div>
        );
    }

    if (!series || series.length === 0) {
        return (
            <div className="alert alert-light border mb-3">
                ZatĂ­m nenĂ­ co vykreslit do grafu (vĹˇechny hodnoty jsou 0).
            </div>
        );
    }

    return (
        <div className="row g-3 mb-3">
            {/* Donut */}
            <div className="col-12 col-lg-6">
                <div className="card shadow-sm h-100">
                    <div className="card-header bg-white fw-semibold">
                        Moje registrace na zĂˇpasy
                    </div>

                    <div className="card-body" style={{ height: 320 }}>
                        <ResponsiveContainer width="100%" height="100%">
                            <PieChart>
                                <Pie
                                    data={series}
                                    dataKey="value"
                                    nameKey="label"
                                    innerRadius="55%"
                                    outerRadius="80%"
                                    paddingAngle={2}
                                >
                                    {series.map((s) => (
                                        <Cell key={s.key} fill={s.color} />
                                    ))}
                                </Pie>

                                <Tooltip content={<TooltipBox />} />
                                <Legend verticalAlign="bottom" height={36} />
                            </PieChart>
                        </ResponsiveContainer>

                        
                    </div>
                </div>
            </div>

            {/* Bar */}
            <div className="col-12 col-lg-6">
                <div className="card shadow-sm h-100">
                    <div className="card-header bg-white fw-semibold">
                        PorovnĂˇnĂ­ registracĂ­
                    </div>

                    <div className="card-body" style={{ height: 320 }}>
                        <ResponsiveContainer width="100%" height="100%">
                            <BarChart
                                data={series}
                                margin={{ top: 10, right: 10, left: 0, bottom: 10 }}
                            >
                                <CartesianGrid strokeDasharray="3 3" />
                                <XAxis dataKey="label" />
                                <YAxis allowDecimals={false} />
                                <Tooltip content={<TooltipBox />} />

                                {/* fill je fallback, konkrĂ©tnĂ­ barvy dĂˇvĂˇme pĹ™es Cell */}
                                <Bar dataKey="value" fill="#0d6efd">
                                    {series.map((s) => (
                                        <Cell key={s.key} fill={s.color} />
                                    ))}
                                </Bar>
                            </BarChart>
                        </ResponsiveContainer>

                       
                    </div>
                </div>
            </div>
        </div>
    );
};

export default PlayerStatsCharts;


==================================================
src\components\seasons\SeasonForm.jsx
==================================================

// src/components/seasons/SeasonForm.jsx
import DatePicker from "../forms/DatePicker";

const SeasonForm = ({ values, onChange, errors = {} }) => {
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    // kompatibilnĂ­ handler pro DateTimePicker:
    // - buÄŹ zavolĂˇ onChange(event)
    // - nebo onChange(valueString)
    const handleDateChange = (name) => (valueOrEvent) => {
        const value =
            valueOrEvent?.target?.value !== undefined
                ? valueOrEvent.target.value
                : valueOrEvent;

        onChange({ [name]: value });
    };

    const nameClass = "form-control" + (errors.name ? " is-invalid" : "");
    const startDateClass =
        "form-control" + (errors.startDate ? " is-invalid" : "");
    const endDateClass =
        "form-control" + (errors.endDate ? " is-invalid" : "");

    return (
        <div>
            <h2 className="h5 mb-3">SezĂłna</h2>

            <div className="mb-3">
                <label className="form-label" htmlFor="season-name">
                    NĂˇzev sezĂłny
                </label>
                <input
                    type="text"
                    id="season-name"
                    name="name"
                    className={nameClass}
                    value={values.name || ""}
                    onChange={handleInputChange}
                    placeholder="napĹ™. 2025/2026"
                />
                {errors.name && (
                    <div className="invalid-feedback">{errors.name}</div>
                )}
            </div>

            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="season-startDate">
                        ZaÄŤĂˇtek sezĂłny
                    </label>

                    <DatePicker
                        id="season-startDate"
                        name="startDate"
                        value={values.startDate || ""}
                        onChange={handleDateChange("startDate")}
                        className={startDateClass}
                    />

                    {errors.startDate && (
                        <div className="invalid-feedback d-block">
                            {errors.startDate}
                        </div>
                    )}
                </div>

                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="season-endDate">
                        Konec sezĂłny
                    </label>

                    <DatePicker
                        id="season-endDate"
                        name="endDate"
                        value={values.endDate || ""}
                        onChange={handleDateChange("endDate")}
                        className={endDateClass}
                    />

                    {errors.endDate && (
                        <div className="invalid-feedback d-block">
                            {errors.endDate}
                        </div>
                    )}
                </div>
            </div>
        </div>
    );
};

export default SeasonForm;


==================================================
src\components\seasons\seasonSelect.jsx
==================================================

// src/components/seasons/SeasonSelect.jsx
import { useEffect, useState } from "react";
import { useSeason } from "../../hooks/useSeason";

const SeasonSelect = ({ onSeasonChange }) => {
    const { seasons, currentSeasonId, changeSeason, loading } = useSeason();
    const [value, setValue] = useState(currentSeasonId ?? "");

    useEffect(() => {
        setValue(currentSeasonId ?? "");
    }, [currentSeasonId]);

    const handleChange = async (e) => {
        const seasonId = Number(e.target.value);
        setValue(seasonId);

        await changeSeason(seasonId);
        onSeasonChange?.(seasonId);
    };

    return (
        <div className="d-inline-flex align-items-center gap-2">
            <span className="fw-semibold">SezĂłna:</span>

            <select
                className="form-select form-select-sm w-auto"
                style={{ minWidth: "max-content" }}
                value={value}
                onChange={handleChange}
                disabled={loading || seasons.length === 0}
            >
                {seasons.map((s) => (
                    <option key={s.id} value={s.id}>
                        {s.name}
                    </option>
                ))}
            </select>
        </div>
    );
};

export default SeasonSelect;


==================================================
src\components\settings\ChangePasswordForm.jsx
==================================================

// src/components/settings/ChangePasswordForm.jsx

const ChangePasswordForm = ({
    values,
    errors = {},
    saving,
    success,
    error,
    onChange,
    onSubmit,
}) => {
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    const handleSubmit = (e) => {
        e.preventDefault();
        onSubmit();
    };

    return (
        <form onSubmit={handleSubmit}>
            {error && (
                <div className="alert alert-danger">
                    {error}
                </div>
            )}

            {success && (
                <div className="alert alert-success">
                    {success}
                </div>
            )}

            <div className="mb-3">
                <label htmlFor="oldPassword" className="form-label">
                    StĂˇvajĂ­cĂ­ heslo
                </label>
                <input
                    type="password"
                    id="oldPassword"
                    name="oldPassword"
                    className={
                        "form-control" +
                        (errors.oldPassword ? " is-invalid" : "")
                    }
                    value={values.oldPassword}
                    onChange={handleInputChange}
                    autoComplete="current-password"
                />
                {errors.oldPassword && (
                    <div className="invalid-feedback">
                        {errors.oldPassword}
                    </div>
                )}
            </div>

            <div className="mb-3">
                <label htmlFor="newPassword" className="form-label">
                    NovĂ© heslo
                </label>
                <input
                    type="password"
                    id="newPassword"
                    name="newPassword"
                    className={
                        "form-control" +
                        (errors.newPassword ? " is-invalid" : "")
                    }
                    value={values.newPassword}
                    onChange={handleInputChange}
                    autoComplete="new-password"
                />
                {errors.newPassword && (
                    <div className="invalid-feedback">
                        {errors.newPassword}
                    </div>
                )}
                <div className="form-text">
                    DoporuÄŤeno alespoĹ 8 znakĹŻ, kombinace pĂ­smen a ÄŤĂ­slic.
                </div>
            </div>

            <div className="mb-3">
                <label htmlFor="newPasswordConfirm" className="form-label">
                    PotvrzenĂ­ novĂ©ho hesla
                </label>
                <input
                    type="password"
                    id="newPasswordConfirm"
                    name="newPasswordConfirm"
                    className={
                        "form-control" +
                        (errors.newPasswordConfirm ? " is-invalid" : "")
                    }
                    value={values.newPasswordConfirm}
                    onChange={handleInputChange}
                    autoComplete="new-password"
                />
                {errors.newPasswordConfirm && (
                    <div className="invalid-feedback">
                        {errors.newPasswordConfirm}
                    </div>
                )}
            </div>

            <div className="d-flex justify-content-end mt-3">
                <button
                    type="submit"
                    className="btn btn-primary"
                    disabled={saving}
                >
                    {saving ? "MÄ›nĂ­m hesloâ€¦" : "ZmÄ›nit heslo"}
                </button>
            </div>
        </form>
    );
};

export default ChangePasswordForm;


==================================================
src\components\settings\PlayerProfileForm.jsx
==================================================

// src/components/settings/PlayerProfileForm.jsx
import RoleGuard from "../RoleGuard";

const PlayerProfileForm = ({ values, onChange, errors = {} }) => {
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    const nameClass =
        "form-control" + (errors.name ? " is-invalid" : "");
    const surnameClass =
        "form-control" + (errors.surname ? " is-invalid" : "");
    const phoneClass =
        "form-control" + (errors.phoneNumber ? " is-invalid" : "");

    return (
        <div>
            <h2 className="h5 mb-3">Profil hrĂˇÄŤe</h2>

            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="name">
                        KĹ™estnĂ­ jmĂ©no
                    </label>
                    <input
                        type="text"
                        id="name"
                        name="name"
                        className={nameClass}
                        value={values.name || ""}
                        onChange={handleInputChange}
                    />
                    {errors.name && (
                        <div className="invalid-feedback">
                            {errors.name}
                        </div>
                    )}
                </div>

                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="surname">
                        PĹ™Ă­jmenĂ­
                    </label>
                    <input
                        type="text"
                        id="surname"
                        name="surname"
                        className={surnameClass}
                        value={values.surname || ""}
                        onChange={handleInputChange}
                    />
                    {errors.surname && (
                        <div className="invalid-feedback">
                            {errors.surname}
                        </div>
                    )}
                </div>
            </div>

            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="nickname">
                        PĹ™ezdĂ­vka
                    </label>
                    <input
                        type="text"
                        id="nickname"
                        name="nickname"
                        className="form-control"
                        value={values.nickname || ""}
                        onChange={handleInputChange}
                    />
                </div>

                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="phoneNumber">
                        Telefon
                    </label>
                    <input
                        type="tel"
                        id="phoneNumber"
                        name="phoneNumber"
                        className={phoneClass}
                        placeholder="+420123456789"
                        value={values.phoneNumber || ""}
                        onChange={handleInputChange}
                    />
                    {errors.phoneNumber && (
                        <div className="invalid-feedback">
                            {errors.phoneNumber}
                        </div>
                    )}
                    {!errors.phoneNumber && (
                        <div className="form-text">
                            Telefon zadej v mezinĂˇrodnĂ­m formĂˇtu, napĹ™.{" "}
                            <strong>+420123456789</strong>.
                        </div>
                    )}
                </div>
            </div>

            {/* TEAM â€“ vĂ˝bÄ›r tĂ˝mu hrĂˇÄŤe */}
            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="team">
                        TĂ˝m
                    </label>
                    <select
                        id="team"
                        name="team"
                        className="form-select"
                        value={values.team || ""}
                        onChange={handleInputChange}
                    >
                        <option value="">â€” NenĂ­ pĹ™iĹ™azen â€”</option>
                        <option value="LIGHT">SvÄ›tlĂ˝ tĂ˝m</option>
                        <option value="DARK">TmavĂ˝ tĂ˝m</option>
                    </select>
                    <div className="form-text">
                        TĂ˝m, ke kterĂ©mu je hrĂˇÄŤ pĹ™iĹ™azen (odpovĂ­dĂˇ enumu Team).
                    </div>
                </div>
            </div>
            {/* TYP â€“ vĂ˝bÄ›r typu hrĂˇÄŤe */}
            <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="type">
                        Typ
                    </label>
                    <select
                        id="type"
                        name="type"
                        className="form-select"
                        value={values.type || ""}
                        onChange={handleInputChange}
                    >
                        <option value="BASIC">zĂˇkladnĂ­</option>
                        <option value="STANDARD">standardnĂ­</option>
                        <option value="VIP">VIP</option>
                    </select>
                    <div className="form-text">
                        Typ hrĂˇÄŤe - pro zobrazenĂ­ nadchĂˇzejĂ­cĂ­ch zĂˇpasĹŻ (odpovĂ­dĂˇ enumu Typ).
                    </div>
                </div>
              </div>
            </RoleGuard> 
        </div>
    );
};

export default PlayerProfileForm;


==================================================
src\components\settings\PlayerSettings.jsx
==================================================

// src/components/settings/PlayerSettings.jsx
const PlayerSettings = ({
    values,
    onChange,
    onSubmit,
    saving,
    error,
    success,
    errors = {}, // đź”ą field-level chyby z SettingsPage
}) => {
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    const handleCheckboxChange = (e) => {
        const { name, checked } = e.target;
        onChange({ [name]: checked });
    };

    const handleSubmit = (e) => {
        e.preventDefault();
        onSubmit();
    };

    return (
        <form onSubmit={handleSubmit}>
            {error && <div className="alert alert-danger">{error}</div>}
            {success && <div className="alert alert-success">{success}</div>}

            <h2 className="mb-3">NastavenĂ­ notifikacĂ­</h2>
            <h2 className="h5 mb-3">KontaktnĂ­ Ăşdaje</h2>

            {/* KontaktnĂ­ e-mail */}
            <div className="mb-3">
                <label className="form-label" htmlFor="contactEmail">
                    KontaktnĂ­ e-mail
                </label>
                <input
                    type="email"
                    id="contactEmail"
                    name="contactEmail"
                    className={
                        "form-control" +
                        (errors.contactEmail ? " is-invalid" : "")
                    }
                    value={values.contactEmail || ""}
                    onChange={handleInputChange}
                />
                {errors.contactEmail && (
                    <div className="invalid-feedback">
                        {errors.contactEmail}
                    </div>
                )}
                <div className="form-text">
                    Na tento e-mail mohou chodit notifikaÄŤnĂ­ zprĂˇvy.
                </div>
            </div>

            {/* KontaktnĂ­ telefon */}
            <div className="mb-3">
                <label className="form-label" htmlFor="contactPhone">
                    KontaktnĂ­ telefon
                </label>
                <input
                    type="tel"
                    id="contactPhone"
                    name="contactPhone"
                    className={
                        "form-control" +
                        (errors.contactPhone ? " is-invalid" : "")
                    }
                    value={values.contactPhone || ""}
                    onChange={handleInputChange}
                />
                {errors.contactPhone && (
                    <div className="invalid-feedback">
                        {errors.contactPhone}
                    </div>
                )}
                <div className="form-text">
                    TelefonnĂ­ ÄŤĂ­slo pro SMS notifikace.
                </div>
            </div>

            <hr />

            <h2 className="h5 mb-3">KanĂˇly</h2>

            <div className="form-check mb-2">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="emailEnabled"
                    name="emailEnabled"
                    checked={values.emailEnabled || false}
                    onChange={handleCheckboxChange}
                />
                <label className="form-check-label" htmlFor="emailEnabled">
                    Povolit e-mailovĂ© notifikace
                </label>
            </div>

            <div className="form-check mb-3">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="smsEnabled"
                    name="smsEnabled"
                    checked={values.smsEnabled || false}
                    onChange={handleCheckboxChange}
                />
                <label className="form-check-label" htmlFor="smsEnabled">
                    Povolit SMS notifikace
                </label>
            </div>

            <hr />

            <h2 className="h5 mb-3">UdĂˇlosti</h2>

            <div className="form-check">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="notifyOnRegistration"
                    name="notifyOnRegistration"
                    checked={values.notifyOnRegistration || false}
                    onChange={handleCheckboxChange}
                />
                <label
                    className="form-check-label"
                    htmlFor="notifyOnRegistration"
                >
                    Informovat pĹ™i pĹ™ihlĂˇĹˇenĂ­ / odhlĂˇĹˇenĂ­ na zĂˇpas
                </label>
            </div>

            <div className="form-check">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="notifyOnExcuse"
                    name="notifyOnExcuse"
                    checked={values.notifyOnExcuse || false}
                    onChange={handleCheckboxChange}
                />
                <label className="form-check-label" htmlFor="notifyOnExcuse">
                    Informovat o omluvÄ›
                </label>
            </div>

            <div className="form-check">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="notifyOnMatchChange"
                    name="notifyOnMatchChange"
                    checked={values.notifyOnMatchChange || false}
                    onChange={handleCheckboxChange}
                />
                <label
                    className="form-check-label"
                    htmlFor="notifyOnMatchChange"
                >
                    Informovat pĹ™i zmÄ›nÄ› zĂˇpasu (ÄŤas, mĂ­stoâ€¦)
                </label>
            </div>

            <div className="form-check">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="notifyOnMatchCancel"
                    name="notifyOnMatchCancel"
                    checked={values.notifyOnMatchCancel || false}
                    onChange={handleCheckboxChange}
                />
                <label
                    className="form-check-label"
                    htmlFor="notifyOnMatchCancel"
                >
                    Informovat pĹ™i zruĹˇenĂ­ zĂˇpasu
                </label>
            </div>

            <div className="form-check mb-3">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="notifyOnPayment"
                    name="notifyOnPayment"
                    checked={values.notifyOnPayment || false}
                    onChange={handleCheckboxChange}
                />
                <label className="form-check-label" htmlFor="notifyOnPayment">
                    Informovat o platbĂˇch (napĹ™. potvrzenĂ­ Ăşhrady)
                </label>
            </div>

            <hr />

            <h2 className="h5 mb-3">PĹ™ipomĂ­nky zĂˇpasĹŻ</h2>

            <div className="form-check mb-2">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="notifyReminders"
                    name="notifyReminders"
                    checked={values.notifyReminders || false}
                    onChange={handleCheckboxChange}
                />
                <label className="form-check-label" htmlFor="notifyReminders">
                    PosĂ­lat pĹ™ipomĂ­nky pĹ™ed zĂˇpasem
                </label>
            </div>

            <div className="mb-3">
                <label
                    className="form-label"
                    htmlFor="reminderHoursBefore"
                >
                    Kolik hodin pĹ™ed zĂˇpasem poslat pĹ™ipomĂ­nku
                </label>
                <input
                    type="number"
                    id="reminderHoursBefore"
                    name="reminderHoursBefore"
                    className="form-control"
                    min={1}
                    max={72}
                    value={values.reminderHoursBefore ?? ""}
                    onChange={(e) =>
                        onChange({
                            reminderHoursBefore: e.target.value
                                ? Number(e.target.value)
                                : null,
                        })
                    }
                    disabled={!values.notifyReminders}
                />
            </div>
            <div className="d-flex justify-content-end">         
            <div className="mt-4">
                <button
                    type="submit"
                    className="btn btn-primary"
                    disabled={saving}
                >
                    {saving ? "UklĂˇdĂˇmâ€¦" : "UloĹľit nastavenĂ­ notifikaci"}
                </button>
                </div>
            </div>
        </form>
    );
};

export default PlayerSettings;


==================================================
src\components\settings\UserProfileForm.jsx
==================================================

// src/components/settings/UserProfileForm.jsx

const UserProfileForm = ({ values, onChange, errors = {} }) => {
    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    const nameClass =
        "form-control" + (errors.name ? " is-invalid" : "");
    const surnameClass =
        "form-control" + (errors.surname ? " is-invalid" : "");
    const emailClass =
        "form-control" + (errors.email ? " is-invalid" : "");

    const roleLabel = values?.role ?? "";
    const enabledLabel =
        typeof values?.enabled === "boolean"
            ? values.enabled
                ? "AktivnĂ­"
                : "NeaktivnĂ­"
            : "";

    return (
        <div>
            <h2 className="h5 mb-3">Profil uĹľivatele</h2>

            {/* Ĺ™Ăˇdek: jmĂ©no / pĹ™Ă­jmenĂ­ */}
            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="user-name">
                        KĹ™estnĂ­ jmĂ©no
                    </label>
                    <input
                        type="text"
                        id="user-name"
                        name="name"
                        className={nameClass}
                        value={values.name || ""}
                        onChange={handleInputChange}
                    />
                    {errors.name && (
                        <div className="invalid-feedback">
                            {errors.name}
                        </div>
                    )}
                </div>

                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="user-surname">
                        PĹ™Ă­jmenĂ­
                    </label>
                    <input
                        type="text"
                        id="user-surname"
                        name="surname"
                        className={surnameClass}
                        value={values.surname || ""}
                        onChange={handleInputChange}
                    />
                    {errors.surname && (
                        <div className="invalid-feedback">
                            {errors.surname}
                        </div>
                    )}
                </div>
            </div>

            {/* Ĺ™Ăˇdek: e-mail / role + stav ĂşÄŤtu */}
            <div className="row">
                <div className="col-md-6 mb-3">
                    <label className="form-label" htmlFor="user-email">
                        E-mail (pĹ™ihlaĹˇovacĂ­)
                    </label>
                    <input
                        type="email"
                        id="user-email"
                        name="email"
                        className={emailClass}
                        value={values.email || ""}
                        onChange={handleInputChange}
                        disabled
                        readOnly
                    />
                    {errors.email && (
                        <div className="invalid-feedback">
                            {errors.email}
                        </div>
                    )}
                    {!errors.email && (
                        <div className="form-text">
                            E-mail slouĹľĂ­ jako pĹ™ihlaĹˇovacĂ­ jmĂ©no a v tomto
                            formulĂˇĹ™i jej nelze mÄ›nit.
                        </div>
                    )}
                </div>

                <div className="col-md-6 mb-3">
                    <label className="form-label">
                        Role v systĂ©mu / stav ĂşÄŤtu
                    </label>
                    <div className="d-flex flex-column gap-2">
                        <input
                            type="text"
                            className="form-control"
                            value={roleLabel}
                            readOnly
                            disabled
                        />
                        <input
                            type="text"
                            className="form-control"
                            value={enabledLabel}
                            readOnly
                            disabled
                        />
                    </div>
                    <div className="form-text">
                        ZmÄ›nu role nebo aktivace/deaktivace ĂşÄŤtu provĂˇdĂ­
                        administrĂˇtor.
                    </div>
                </div>
            </div>
        </div>
    );
};

export default UserProfileForm;


==================================================
src\components\settings\UserSettings.jsx
==================================================

// src/components/settings/UserSettings.jsx
import RoleGuard from "../RoleGuard";
import { useBootstrapTooltip } from "../../hooks/useBootstrapTooltip";

const UserSettings = ({ values, onChange, onSubmit, saving, error, success }) => {
    //  inicializace tooltipĹŻ (Bootstrap)
    useBootstrapTooltip();

    const safeValues = values || {};

    const handleInputChange = (e) => {
        const { name, value } = e.target;
        onChange({ [name]: value });
    };

    const handleCheckboxChange = (e) => {
        const { name, checked } = e.target;
        onChange({ [name]: checked });
    };

    const handleSubmit = (e) => {
        e.preventDefault();
        onSubmit();
    };

    const InfoTip = ({ text }) => (
        <span
            className="ms-2 text-muted"
            role="button"
            tabIndex={0}
            data-bs-toggle="tooltip"
            data-bs-placement="right"
            title={text}
            style={{ cursor: "help" }}
        >
            â„ą
        </span>
    );

    return (
        <form onSubmit={handleSubmit} noValidate>
            {error && <div className="alert alert-danger">{error}</div>}
            {success && <div className="alert alert-success">{success}</div>}

            {/* === VĂ˝bÄ›r hrĂˇÄŤe po pĹ™ihlĂˇĹˇenĂ­ === */}
            <h2 className="h5 mb-3">VĂ˝bÄ›r hrĂˇÄŤe po pĹ™ihlĂˇĹˇenĂ­</h2>

            <div className="mb-3">
                <label className="form-label" htmlFor="playerSelectionMode">
                    ZpĹŻsob vĂ˝bÄ›ru hrĂˇÄŤe
                    <InfoTip text="UrÄŤuje, jak se po pĹ™ihlĂˇĹˇenĂ­ automaticky vybere hrĂˇÄŤ. VhodnĂ©, pokud mĂˇ uĹľivatel pod ĂşÄŤtem vĂ­ce hrĂˇÄŤĹŻ." />
                </label>

                <select
                    id="playerSelectionMode"
                    name="playerSelectionMode"
                    className="form-select"
                    value={safeValues.playerSelectionMode || ""}
                    onChange={handleInputChange}
                    disabled={saving}
                >
                    <option
                        value="FIRST_PLAYER"
                        title="Automaticky vybere prvnĂ­ho hrĂˇÄŤe pĹ™iĹ™azenĂ©ho k uĹľivateli."
                    >
                        Vybrat prvnĂ­ho hrĂˇÄŤe
                    </option>
                    <option
                        value="ALWAYS_CHOOSE"
                        title="Po pĹ™ihlĂˇĹˇenĂ­ se vĹľdy zobrazĂ­ dialog pro vĂ˝bÄ›r hrĂˇÄŤe."
                    >
                        VĹľdy zobrazit dialog s vĂ˝bÄ›rem hrĂˇÄŤe
                    </option>
                    <option
                        value="LAST_USED"
                        title="Po pĹ™ihlĂˇĹˇenĂ­ se zvolĂ­ hrĂˇÄŤ, kterĂ˝ byl pouĹľit naposledy."
                    >
                        PouĹľĂ­t naposledy pouĹľitĂ©ho hrĂˇÄŤe
                    </option>
                </select>

                <div className="form-text">
                    UrÄŤuje, jak se mĂˇ po pĹ™ihlĂˇĹˇenĂ­ vybrat hrĂˇÄŤ v kontextu
                    aplikace.
                </div>
            </div>

            <hr />

            {/* === GlobĂˇlnĂ­ notifikace === */}
            <h2 className="h5 mb-3">GlobĂˇlnĂ­ notifikace</h2>

            <div className="mb-3">
                <label className="form-label" htmlFor="globalNotificationLevel">
                    ĂšroveĹ notifikacĂ­
                    <InfoTip text="ALL = vĹˇechny e-maily. IMPORTANT_ONLY = jen dĹŻleĹľitĂ© (napĹ™. zruĹˇenĂ­ zĂˇpasu). NONE = ĹľĂˇdnĂ© notifikace." />
                </label>

                <select
                    id="globalNotificationLevel"
                    name="globalNotificationLevel"
                    className="form-select"
                    value={safeValues.globalNotificationLevel || ""}
                    onChange={handleInputChange}
                    disabled={saving}
                >
                    <option value="ALL">VĹˇechny notifikace</option>
                    <option value="IMPORTANT_ONLY">Pouze dĹŻleĹľitĂ©</option>
                    <option value="NONE">Ĺ˝ĂˇdnĂ©</option>
                </select>
            </div>

            <div className="form-check">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="copyAllPlayerNotificationsToUserEmail"
                    name="copyAllPlayerNotificationsToUserEmail"
                    checked={safeValues.copyAllPlayerNotificationsToUserEmail || false}
                    onChange={handleCheckboxChange}
                    disabled={saving}
                />
                <label
                    className="form-check-label"
                    htmlFor="copyAllPlayerNotificationsToUserEmail"
                    data-bs-toggle="tooltip"
                    data-bs-placement="right"
                    title="Pokud spravujete vĂ­ce hrĂˇÄŤĹŻ, budou vĂˇm chodit kopie vĹˇech jejich notifikacĂ­."
                    style={{ cursor: "help" }}
                >
                    PosĂ­lat kopie vĹˇech notifikacĂ­ hrĂˇÄŤĹŻ na mĹŻj e-mail
                </label>
            </div>

            <div className="form-check mb-3">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="receiveNotificationsForPlayersWithOwnEmail"
                    name="receiveNotificationsForPlayersWithOwnEmail"
                    checked={safeValues.receiveNotificationsForPlayersWithOwnEmail || false}
                    onChange={handleCheckboxChange}
                    disabled={saving}
                />
                <label
                    className="form-check-label"
                    htmlFor="receiveNotificationsForPlayersWithOwnEmail"
                    data-bs-toggle="tooltip"
                    data-bs-placement="right"
                    title="I kdyĹľ mĂˇ hrĂˇÄŤ vlastnĂ­ e-mail, budete dostĂˇvat kopii notifikace takĂ© vy."
                    style={{ cursor: "help" }}
                >
                    PosĂ­lat notifikace i za hrĂˇÄŤe, kteĹ™Ă­ majĂ­ vlastnĂ­ e-mail
                </label>
            </div>

            {/* === Notifikace pro manaĹľera === */}
            <RoleGuard roles={["ROLE_MANAGER"]}>
                <div className="border rounded p-3 mb-3">
                    <h3 className="h5 mb-3">Notifikace pro manaĹľera</h3>

                    <div className="mb-3">
                        <label className="form-label" htmlFor="managerNotificationLevel">
                            ĂšroveĹ manaĹľerskĂ˝ch kopiĂ­
                            <InfoTip text="PlatĂ­ pouze pro kopie notifikacĂ­ posĂ­lanĂ© manaĹľerĹŻm. NeovlivĹuje vaĹˇe osobnĂ­ notifikace ani notifikace hrĂˇÄŤĹŻm." />
                        </label>

                        <select
                            id="managerNotificationLevel"
                            name="managerNotificationLevel"
                            className="form-select"
                            value={
                                safeValues.managerNotificationLevel ||
                                safeValues.globalNotificationLevel ||
                                "ALL"
                            }
                            onChange={handleInputChange}
                            disabled={saving}
                        >
                            <option value="ALL">VĹˇechny manaĹľerskĂ© kopie</option>
                            <option value="IMPORTANT_ONLY">Jen dĹŻleĹľitĂ© manaĹľerskĂ© kopie</option>
                            <option value="NONE">ManaĹľerskĂ© kopie neposĂ­lat</option>
                        </select>

                        <div className="form-text">
                            Toto nastavenĂ­ se pouĹľĂ­vĂˇ pouze pro kopie
                            notifikacĂ­, kterĂ© jsou posĂ­lĂˇny manaĹľerĹŻm. NemĂˇ
                            vliv na vaĹˇe vlastnĂ­ notifikace ani na notifikace
                            hrĂˇÄŤĹŻm.
                        </div>
                    </div>
                </div>
            </RoleGuard>

            <div className="form-check mb-2">
                <input
                    className="form-check-input"
                    type="checkbox"
                    id="emailDigestEnabled"
                    name="emailDigestEnabled"
                    checked={safeValues.emailDigestEnabled || false}
                    onChange={handleCheckboxChange}
                    disabled={saving}
                />
                <label
                    className="form-check-label"
                    htmlFor="emailDigestEnabled"
                    data-bs-toggle="tooltip"
                    data-bs-placement="right"
                    title="DennĂ­ souhrn notifikacĂ­ mĂ­sto jednotlivĂ˝ch e-mailĹŻ."
                    style={{ cursor: "help" }}
                >
                    Aktivovat dennĂ­ souhrn e-mailĹŻ (digest)
                </label>
            </div>

            <div className="mb-3">
                <label className="form-label" htmlFor="emailDigestTime">
                    ÄŚas odeslĂˇnĂ­ souhrnnĂ©ho e-mailu
                    <InfoTip text="SouhrnnĂ˝ e-mail bude odeslĂˇn kaĹľdĂ˝ den v zadanĂ˝ ÄŤas. Pole je aktivnĂ­ pouze pĹ™i zapnutĂ©m digestu." />
                </label>

                <input
                    type="time"
                    id="emailDigestTime"
                    name="emailDigestTime"
                    className="form-control"
                    value={safeValues.emailDigestTime || ""}
                    onChange={handleInputChange}
                    disabled={!safeValues.emailDigestEnabled || saving}
                />
            </div>

            <hr />

            {/* === UĹľivatelskĂ© rozhranĂ­ === */}
            <h2 className="h5 mb-3">UĹľivatelskĂ© rozhranĂ­</h2>

            <div className="mb-3">
                <label className="form-label" htmlFor="uiLanguage">
                    Jazyk rozhranĂ­
                    <InfoTip text="Volba jazyka uĹľivatelskĂ©ho rozhranĂ­ aplikace." />
                </label>

                <select
                    id="uiLanguage"
                    name="uiLanguage"
                    className="form-select"
                    value={safeValues.uiLanguage || ""}
                    onChange={handleInputChange}
                    disabled={saving}
                >
                    <option value="cs">ÄŚeĹˇtina</option>
                    <option value="en">AngliÄŤtina</option>
                </select>
            </div>

            <div className="mb-3">
                <label className="form-label" htmlFor="timezone">
                    ÄŚasovĂˇ zĂłna
                    <InfoTip text="PouĹľĂ­vĂˇ se pro zobrazenĂ­ ÄŤasĹŻ v aplikaci a plĂˇnovĂˇnĂ­ notifikacĂ­. DoporuÄŤeno: Europe/Prague." />
                </label>

                <input
                    type="text"
                    id="timezone"
                    name="timezone"
                    className="form-control"
                    value={safeValues.timezone || ""}
                    onChange={handleInputChange}
                    placeholder="napĹ™. Europe/Prague"
                    disabled={saving}
                />
            </div>

            <div className="mb-3">
                <label className="form-label" htmlFor="defaultLandingPage">
                    VĂ˝chozĂ­ obrazovka po pĹ™ihlĂˇĹˇenĂ­
                    <InfoTip text="UrÄŤuje, na kterou strĂˇnku budete po pĹ™ihlĂˇĹˇenĂ­ pĹ™esmÄ›rovĂˇn." />
                </label>

                <select
                    id="defaultLandingPage"
                    name="defaultLandingPage"
                    className="form-select"
                    value={safeValues.defaultLandingPage || ""}
                    onChange={handleInputChange}
                    disabled={saving}
                >
                    <option value="MATCHES">ZĂˇpasy</option>
                    <option value="PLAYERS">HrĂˇÄŤi</option>
                    <option value="DASHBOARD">PĹ™ehled</option>
                </select>
            </div>

            <div className="mt-4 d-flex justify-content-end">
                <button
                    type="submit"
                    className="btn btn-primary"
                    disabled={saving}
                >
                    {saving ? "UklĂˇdĂˇmâ€¦" : "UloĹľit nastavenĂ­ uĹľivatele"}
                </button>
            </div>
        </form>
    );
};

export default UserSettings;


==================================================
src\components\BackButton.jsx
==================================================

import { useNavigate } from "react-router-dom";

const BackButton = ({ label = "ZpÄ›t" }) => {
    const navigate = useNavigate();

    return (
        <div className="text-center mt-3">
            <button
                type="button"
                className="btn btn-outline-primary"
                
                onClick={() => navigate(-1)}
            >
                â† {label}
            </button>
        </div>
    );
};

export default BackButton;

==================================================
src\components\CookieConsentBanner.jsx
==================================================

import { useEffect, useState } from "react";

const STORAGE_KEY = "cookie_consent_accepted";

const CookieConsentBanner = () => {
    const [visible, setVisible] = useState(false);

    useEffect(() => {
        const accepted = localStorage.getItem(STORAGE_KEY);
        if (!accepted) {
            setVisible(true);
        }
    }, []);

    const handleAccept = () => {
        localStorage.setItem(STORAGE_KEY, "true");
        setVisible(false);
    };

    if (!visible) return null;

    return (
        <div
            className="position-fixed bottom-0 start-0 end-0 bg-dark text-white p-3 shadow-lg"
            style={{ zIndex: 1055 }}
        >
            <div className="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
                <div>
                    <strong>PouĹľĂ­vĂˇnĂ­ cookies</strong>
                    <div className="small">
                        Tato aplikace pouĹľĂ­vĂˇ nezbytnĂ© technickĂ© cookies
                        pro sprĂˇvnĂ© fungovĂˇnĂ­ (pĹ™ihlĂˇĹˇenĂ­, session,
                        bezpeÄŤnostnĂ­ ochranu).
                        NepouĹľĂ­vĂˇme marketingovĂ© ani sledovacĂ­ cookies.
                    </div>
                </div>

                <button
                    className="btn btn-success btn-sm"
                    onClick={handleAccept}
                >
                    RozumĂ­m
                </button>
            </div>
        </div>
    );
};

export default CookieConsentBanner;


==================================================
src\components\Footer.css
==================================================

.footer {
    width: 100%;
    text-align: center;
      padding: 20px 0;
    background-color: #b0d4e6;
  
}

footer p {
    text-align: center;
    font-size: 18px;
}

==================================================
src\components\Footer.jsx
==================================================

import React from 'react'
import "./Footer.css"

const Footer = () => {
  return (
      <div className="footer">Â© 2025 Petr Hlista. VĹˇechna prĂˇva vyhrazena.</div>
  )
}

export default Footer

==================================================
src\components\HeaderTop.css
==================================================

.header-top {
    background-color: #b0d4e6;
    font-size: 0.9rem;
    font-weight: bold;
}

.header-top .header-item {
    margin: 0;
}

.user-block-small {
    font-size: 0.9rem;
}

@media (max-width: 575.98px) {
    .header-top {
        font-size: 0.8rem;
    }
}

==================================================
src\components\HeaderTop.jsx
==================================================

// src/components/HeaderTop.jsx
import React from "react";
import "./HeaderTop.css";
import { useDemoMode } from "../hooks/useDemoMode";

const HeaderTop = () => {
    const { demoMode, loading, error, isDemo } = useDemoMode();

    console.log("[HeaderTop] demoMode / loading / error:", {
        demoMode,
        loading,
        error,
    });

    const appText = `Aplikace${!loading && demoMode ? ": DEMO reĹľim" : ""}`;

    return (
        <div className="header-top">
            <div className="container">
                <div className="row align-items-center py-1">
                    {/* VLEVO â€“ Aplikace / DEMO text */}
                    <div className="col-6 col-md-4 header-item text-start">
                        {appText}
                    </div>

                    {/* UPROSTĹED â€“ Telefon (skrytĂ˝ na malĂ˝ch) */}
                    <div className="d-none d-md-block col-md-4 header-item text-center">
                        đź“ž +420 123 456 789
                    </div>

                    {/* VPRAVO â€“ E-mail */}
                    <div className="col-6 col-md-4 header-item text-end">
                        âś‰ petrhlista@seznam.cz
                    </div>
                </div>
            </div>
        </div>
    );
};

export default HeaderTop;


==================================================
src\components\Navbar.css
==================================================

.navbar-logo {
    height: 40px;
    width: auto;
    display: block;
}

.main-navbar {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.navbar .nav-link {
    color: #222;
}

.navbar .nav-link:hover {
    text-decoration: none;
    color: #000;
}

.navbar .nav-link.activeLink {
    font-weight: 600;
    border-bottom: 2px solid #1B5E20;
}

.navbar-toggler {
    border: none;
    padding: 0.25rem 0.5rem;
}

.navbar-toggler:focus {
    box-shadow: none;
}

.user-block span {
    white-space: nowrap;
}

.user-block-small span {
    white-space: nowrap;
    font-size: 0.9rem;
}

.mobile-menu {
    position: fixed;
    top: 0;
    left: 0;

    height: 100vh;
    width: 80%;
    max-width: 280px;

    background-color: #deefe7;
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);

    transform: translateX(-100%);
    transition: transform 0.28s ease-in-out;

    z-index: 1050;

    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.mobile-menu.open {
    transform: translateX(0);
}

.mobile-menu-inner {
padding: 1.25rem 1rem 1rem;
}

.mobile-link {
    display: block;
    padding: 0.4rem 0;
    color: #222;
    text-decoration: none;
    font-size: 1rem;
}

.mobile-link:hover {
    text-decoration: none;
    color: #000;
}

.mobile-link.activeLink {
    font-weight: 600;
}

.mobile-menu-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.45);
    z-index: 1040;

    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
}

.mobile-menu-overlay.show {
    opacity: 1;
    pointer-events: auto;
}

@media (min-width: 992px) {

    .mobile-menu,
    .mobile-menu-overlay {
        display: none;
    }
}

==================================================
src\components\Navbar.jsx
==================================================

// src/components/Navbar.jsx
import { useState } from "react";
import { NavLink, useNavigate, useLocation } from "react-router-dom";
import { GiHamburgerMenu } from "react-icons/gi";
import { AiOutlineClose } from "react-icons/ai";
import { useAuth } from "../hooks/useAuth";
import { PlayerIcon, UserIcon, AdminIcon } from "../icons";
import { useCurrentPlayer } from "../hooks/useCurrentPlayer";
import RoleGuard from "./RoleGuard";

import "./Navbar.css";

const Navbar = () => {
    const [showMenu, setShowMenu] = useState(false);
    const { user, logout } = useAuth();
    const {
        currentPlayer,
        players = [],
        changeCurrentPlayer,
        loading: playerLoading,
    } = useCurrentPlayer();

    const navigate = useNavigate();
    const location = useLocation();

    const isAdminSection = location.pathname.startsWith("/app/admin");

    const toggleMenu = () => {
        setShowMenu((prev) => !prev);
    };

    const closeMenu = () => {
        setShowMenu(false);
    };

    const handleLogout = async () => {
        await logout();
        navigate("/login");
        closeMenu();
    };

    const handlePlayerChange = async (e) => {
        const value = e.target.value;
        if (!value) return;
        await changeCurrentPlayer(Number(value));
    };

    const handleAdminToggle = () => {
        closeMenu();

        if (isAdminSection) {
            navigate("/app");
            return;
        }

        navigate("/app/admin");
    };

    // odkazy pro hrĂˇÄŤe
    const PlayerLinksInline = () => (
        <ul className="navbar-nav flex-row gap-3 mb-0">
            <RoleGuard roles={["ROLE_PLAYER", "ROLE_MANAGER"]}>
                <li className="nav-item">
                <NavLink
                to="/app/player"
                    end
                    className={({ isActive }) =>
                        "nav-link" + (isActive ? " activeLink" : "")
                    }
                    onClick={closeMenu}
                >
                    PĹ™ehled
                </NavLink>
                </li>
                <li className="nav-item">
                    <NavLink
                        to="/app/players"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        HrĂˇÄŤ
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/matches"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        ZĂˇpasy
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/settings"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        NastavenĂ­
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/my-inactivity"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        Mimo
                    </NavLink>
                </li>
            </RoleGuard>
        </ul>
    );

    // odkazy pro Admin/Manager
    const AdminLinksInline = () => (
        <ul className="navbar-nav flex-row gap-3 mb-0">
            <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                <li className="nav-item">
                    <NavLink
                        to="/app/admin"
                        end
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        PĹ™ehled
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/admin/players"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        HrĂˇÄŤi
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/admin/matches"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        ZĂˇpasy
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/admin/seasons"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        SezĂłny
                    </NavLink>
                </li>

                <li className="nav-item">
                    <NavLink
                        to="/app/admin/inactivity"
                        className={({ isActive }) =>
                            "nav-link" + (isActive ? " activeLink" : "")
                        }
                        onClick={closeMenu}
                    >
                        Mimo
                    </NavLink>
                </li>

                <RoleGuard roles={["ROLE_ADMIN"]}>
                    <li className="nav-item">
                        <NavLink
                            to="/app/admin/users"
                            className={({ isActive }) =>
                                "nav-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            UĹľivatelĂ©
                        </NavLink>
                    </li>
                </RoleGuard>
            </RoleGuard>
        </ul>
    );

    // MobilnĂ­
    const PlayerLinksMobile = () => (
        <RoleGuard roles={["ROLE_PLAYER", "ROLE_MANAGER"]}>
            <nav className="mb-3">
                <ul className="list-unstyled mb-2">
                    <li>
                        <NavLink
                            to="/app/players"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            HrĂˇÄŤ
                        </NavLink>
                    </li>
                    <li>
                        <NavLink
                            to="/app/matches"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            ZĂˇpasy
                        </NavLink>
                    </li>
                    <li>
                        <NavLink
                            to="/app/settings"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            NastavenĂ­
                        </NavLink>
                    </li>
                    <li>
                        <NavLink
                            to="/app/my-inactivity"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            Mimo
                        </NavLink>
                    </li>
                </ul>
            </nav>
        </RoleGuard>
    );

    const AdminLinksMobile = () => (
        <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
            <div className="mb-2 fw-semibold">SprĂˇva:</div>
            <nav className="mb-3">
                <ul className="list-unstyled mb-2">
                    <li>
                        <NavLink
                            to="/app/admin"
                            end
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            PĹ™ehled
                        </NavLink>
                    </li>

                    <li>
                        <NavLink
                            to="/app/admin/players"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            HrĂˇÄŤi
                        </NavLink>
                    </li>
                    <li>
                        <NavLink
                            to="/app/admin/matches"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            ZĂˇpasy
                        </NavLink>
                    </li>
                    <li>
                        <NavLink
                            to="/app/admin/seasons"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            SezĂłny
                        </NavLink>
                    </li>
                    <li>
                        <NavLink
                            to="/app/admin/inactivity"
                            className={({ isActive }) =>
                                "mobile-link" + (isActive ? " activeLink" : "")
                            }
                            onClick={closeMenu}
                        >
                            Mimo
                        </NavLink>
                    </li>

                    <RoleGuard roles={["ROLE_ADMIN"]}>
                        <li>
                            <NavLink
                                to="/app/admin/users"
                                className={({ isActive }) =>
                                    "mobile-link" + (isActive ? " activeLink" : "")
                                }
                                onClick={closeMenu}
                            >
                                UĹľivatelĂ©
                            </NavLink>
                        </li>
                    </RoleGuard>
                </ul>
            </nav>
        </RoleGuard>
    );

    return (
        <>
            <nav className="navbar navbar-light bg-light main-navbar">
                <div className="container d-flex align-items-center justify-content-between">
                    {/* LEVĂ ÄŚĂST â€“ logo + nĂˇzev */}
                    <div className="d-flex align-items-center flex-shrink-0">
                        <NavLink
                            to="/app"
                            className="navbar-brand d-flex align-items-center gap-2 mb-0"
                            onClick={closeMenu}
                        >
                            <img
                                src="/hockey-clipart.svg"
                                alt="Logo"
                                className="navbar-logo"
                            />
                            <span className="fw-bold">Hokej App</span>
                        </NavLink>
                    </div>

                    {/* STĹED â€“ odkazy uprostĹ™ed */}
                    <div className="d-none d-lg-flex flex-grow-1 justify-content-center">
                        <div className="d-flex align-items-center gap-3">
                            {/* TlaÄŤĂ­tko SprĂˇva / ZavĹ™i sprĂˇvu â€“ jen ADMIN / MANAGER */}
                            <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                                <button
                                    type="button"
                                    className="btn btn-outline-secondary btn-sm me-2"
                                    onClick={handleAdminToggle}
                                >
                                    {isAdminSection ? "ZavĹ™Ă­t sprĂˇvu" : "SprĂˇva"}
                                </button>
                            </RoleGuard>

                            {/* Podle URL zobrazĂ­me hrĂˇÄŤskĂ© nebo admin odkazy */}
                            {isAdminSection ? <AdminLinksInline /> : <PlayerLinksInline />}
                        </div>
                    </div>

                    {/* UPROSTĹED NA MALĂťCH  */}
                    {user && (
                        <div className="d-flex d-lg-none flex-column align-items-start mx-2 user-block-small">
                            {/* ĹĂˇdek 1: uĹľivatel */}
                            <div className="d-flex align-items-center">
                                <div className="icon-col me-2">
                                    <RoleGuard roles={["ROLE_PLAYER"]}>
                                        <UserIcon />
                                    </RoleGuard>
                                    <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                                        <AdminIcon />
                                    </RoleGuard>
                                </div>
                                <div>
                                    {user.name} {user.surname}
                                </div>
                            </div>

                            {/* ĹĂˇdek 2: hrĂˇÄŤ */}
                            <RoleGuard roles={["ROLE_MANAGER", "ROLE_PLAYER"]}>
                                <div className="d-flex align-items-center mt-1">
                                    <div className="icon-col me-2">
                                        <PlayerIcon />
                                    </div>
                                    <div>
                                        {playerLoading ? (
                                            "NaÄŤĂ­tĂˇm hrĂˇÄŤeâ€¦"
                                        ) : players.length === 0 ? (
                                            "NenĂ­ vybrĂˇn hrĂˇÄŤ"
                                        ) : players.length === 1 ? (
                                            <>
                                                {players[0].name} {players[0].surname}
                                            </>
                                        ) : (
                                            <select
                                                className="form-select form-select-sm w-auto"
                                                value={currentPlayer?.id ?? ""}
                                                onChange={handlePlayerChange}
                                            >
                                                <option value="">Vyber hrĂˇÄŤeâ€¦</option>
                                                {players.map((p) => (
                                                    <option key={p.id} value={p.id}>
                                                        {p.name} {p.surname}
                                                    </option>
                                                ))}
                                            </select>
                                        )}
                                    </div>
                                </div>
                            </RoleGuard>
                        </div>
                    )}

                    {/* PRAVĂ ÄŚĂST  */}
                    <div className="d-flex align-items-center flex-shrink-0">
                        {/* VelkĂˇ zaĹ™Ă­zenĂ­ â€“ uĹľivatel vpravo */}
                        {user && (
                            <div className="d-none d-lg-flex align-items-center gap-3 user-block me-2">
                                {/* Vlevo: uĹľivatel + hrĂˇÄŤ pod sebou */}
                                <div className="d-flex flex-column gap-1">
                                    {/* ĹĂˇdek 1: uĹľivatel */}
                                    <div className="d-flex align-items-center user-line">
                                        <div className="icon-col me-2">
                                            <RoleGuard roles={["ROLE_PLAYER"]}>
                                                <UserIcon />
                                            </RoleGuard>
                                            <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                                                <AdminIcon />
                                            </RoleGuard>
                                        </div>
                                        <div>
                                            {user.name} {user.surname}
                                        </div>
                                    </div>

                                    {/* ĹĂˇdek 2: hrĂˇÄŤ */}
                                    <RoleGuard roles={["ROLE_MANAGER", "ROLE_PLAYER"]}>
                                        <div className="d-flex align-items-center player-line">
                                            <div className="icon-col me-2">
                                                <PlayerIcon />
                                            </div>
                                            <div>
                                                {playerLoading ? (
                                                    "NaÄŤĂ­tĂˇm hrĂˇÄŤeâ€¦"
                                                ) : players.length === 0 ? (
                                                    "NenĂ­ vybrĂˇn hrĂˇÄŤ"
                                                ) : players.length === 1 ? (
                                                    <>
                                                        {players[0].name} {players[0].surname}
                                                    </>
                                                ) : (
                                                    <select
                                                        className="form-select form-select-sm w-auto"
                                                        value={currentPlayer?.id ?? ""}
                                                        onChange={handlePlayerChange}
                                                    >
                                                        <option value="">Vyber hrĂˇÄŤeâ€¦</option>
                                                        {players.map((p) => (
                                                            <option key={p.id} value={p.id}>
                                                                {p.name} {p.surname}
                                                            </option>
                                                        ))}
                                                    </select>
                                                )}
                                            </div>
                                        </div>
                                    </RoleGuard>
                                </div>

                                {/* Vpravo: tlaÄŤĂ­tko OdhlĂˇsit */}
                                <button
                                    className="btn btn-outline-danger btn-sm"
                                    onClick={handleLogout}
                                >
                                    OdhlĂˇsit
                                </button>
                            </div>
                        )}

                        {/* MalĂˇ zaĹ™Ă­zenĂ­ â€“ hamburger vpravo */}
                        <button
                            className="navbar-toggler d-lg-none"
                            type="button"
                            aria-label="Toggle navigation"
                            aria-expanded={showMenu ? "true" : "false"}
                            onClick={toggleMenu}
                        >
                            {showMenu ? <AiOutlineClose /> : <GiHamburgerMenu />}
                        </button>
                    </div>
                </div>
            </nav>

            {/* OVERLAY pro mobilnĂ­ menu */}
            <div
                className={"mobile-menu-overlay" + (showMenu ? " show" : "")}
                onClick={closeMenu}
            />

            {/* MOBILNĂŤ MENU â€“ vyjĂ­ĹľdĂ­ zleva */}
            <div className={"mobile-menu" + (showMenu ? " open" : "")}>
                <div className="mobile-menu-inner">
                    <PlayerLinksMobile />
                    <AdminLinksMobile />

                    {/* MobilnĂ­  */}
                    <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                        <button
                            type="button"
                            className="btn btn-outline-secondary w-100 mt-2"
                            onClick={handleAdminToggle}
                        >
                            {isAdminSection ? "ZavĹ™Ă­t sprĂˇvu" : "SprĂˇva"}
                        </button>
                    </RoleGuard>

                    {user && (
                        <button
                            className="btn btn-outline-danger w-100 mt-3"
                            onClick={handleLogout}
                        >
                            OdhlĂˇsit
                        </button>
                    )}
                </div>
            </div>
        </>
    );
};

export default Navbar;


==================================================
src\components\RoleGuard.jsx
==================================================

import { useAuth } from "../hooks/useAuth";

const RoleGuard = ({ roles, children }) => {
    const { user } = useAuth();

    if (!user) return null;

    const hasAccess = roles.includes(user.role);
    if (!hasAccess) return null;

    return children;
};

export default RoleGuard;


==================================================
src\components\ScrollToTop.jsx
==================================================

import { useEffect } from "react";
import { useLocation } from "react-router-dom";

const ScrollToTop = ({ resetPrefixes = [] }) => {
    const { pathname } = useLocation();

    useEffect(() => {
           if (resetPrefixes.some(prefix => pathname.startsWith(prefix))) {
            window.scrollTo(0, 0);
        }       
    }, [pathname, resetPrefixes]);

    return null;
};

export default ScrollToTop;

==================================================
src\components\ScrollToTopButton.css
==================================================

.scroll-to-top-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(135deg, #17c3b2, #0fa3b1);
    color: white;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    z-index: 1050;   
}

.scroll-to-top-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.25);
}

==================================================
src\components\ScrollToTopButton.jsx
==================================================

import { useEffect, useState } from "react";
import "./ScrollToTopButton.css";

const ScrollToTopButton = () => {
    const [visible, setVisible] = useState(false);

    useEffect(() => {
        const handleScroll = () => {
            // zobrazit aĹľ po scrollnutĂ­ 100px
            setVisible(window.scrollY > 100);
        };

        window.addEventListener("scroll", handleScroll);
        return () => window.removeEventListener("scroll", handleScroll);
    }, []);

    const scrollToTop = () => {
        window.scrollTo({
            top: 0,
            behavior: "smooth",
        });
    };

    if (!visible) return null;

    return (
        <button
            className="scroll-to-top-btn"
            onClick={scrollToTop}
            aria-label="ZpÄ›t nahoru"
        >
            â†‘
        </button>
    );
};

export default ScrollToTopButton;


==================================================
src\components\TestConnection.jsx
==================================================

import React, { useEffect, useState } from "react";


const App = () => {
  const [message, setMessage] = useState("");

  useEffect(() => {
    fetch("/api/test")
      .then((res) => res.text())
      .then((data) => setMessage(data))
      .catch((err) => setMessage("Chyba: " + err));
  }, []);

  return (
    <div>
      <h1>Test pĹ™ipojenĂ­ k backendu</h1>
      <p>{message}</p>
    </div>
  );
};

export default App;


==================================================
src\constants\excuseReason.js
==================================================

export const ExcuseReason = {
    PRACE: "PRACE",
    NEMOC: "NEMOC",
    NECHE_SE_MI: "NECHE_SE_MI",
    JINE: "JINE",
};

// hezkĂ© popisky do UI
export const EXCUSE_REASON_OPTIONS = [
    { value: ExcuseReason.PRACE, label: "PrĂˇce" },
    { value: ExcuseReason.NEMOC, label: "Nemoc" },
    { value: ExcuseReason.NECHE_SE_MI, label: "Nechce se mi" },
    { value: ExcuseReason.JINE, label: "JinĂ©" },
];

==================================================
src\constants\matchCancelReason.js
==================================================

// src/constants/matchCancelReason.js

export const MatchCancelReason = {
    NOT_ENOUGH_PLAYERS: "NOT_ENOUGH_PLAYERS",
    TECHNICAL_ISSUE: "TECHNICAL_ISSUE",
    WEATHER: "WEATHER",
    ORGANIZER_DECISION: "ORGANIZER_DECISION",
    OTHER: "OTHER",
};

export const MATCH_CANCEL_REASON_OPTIONS = [
    {
        value: MatchCancelReason.NOT_ENOUGH_PLAYERS,
        label: "NedostateÄŤnĂ˝ poÄŤet hrĂˇÄŤĹŻ",
    },
    {
        value: MatchCancelReason.TECHNICAL_ISSUE,
        label: "TechnickĂ© problĂ©my (led, hala, doprava)",
    },
    {
        value: MatchCancelReason.WEATHER,
        label: "NepĹ™Ă­znivĂ© poÄŤasĂ­",
    },
    {
        value: MatchCancelReason.ORGANIZER_DECISION,
        label: "RozhodnutĂ­ organizĂˇtora",
    },
    {
        value: MatchCancelReason.OTHER,
        label: "JinĂ˝ dĹŻvod",
    },
];


==================================================
src\context\AppModeContext.jsx
==================================================

// src/context/AppModeContext.jsx
import { createContext, useContext, useEffect, useState } from "react";
import { fetchAppMode } from "../api/modeApi";
import { useAuth } from "../hooks/useAuth";

const AppModeContext = createContext({
    demoMode: false,
    loading: true,
    error: null,
});

export const AppModeProvider = ({ children }) => {
    const [demoMode, setDemoMode] = useState(false);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    // Z auth contextu â€“ POZOR: teÄŹ uĹľ existuje isAuthenticated
    const { isAuthenticated } = useAuth();

    console.log("[AppModeProvider] render", {
        demoMode,
        loading,
        error,
        isAuthenticated,
    });

    useEffect(() => {
        console.log(
            "[AppModeProvider] useEffect â€“ auth zmÄ›na, isAuthenticated:",
            isAuthenticated
        );

        // pokud uĹľivatel nenĂ­ pĹ™ihlĂˇĹˇenĂ˝:
        //  - nenaÄŤĂ­tĂˇme nic z backendu
        //  - reĹľim nastavĂ­me na "false"
        if (!isAuthenticated) {
            setDemoMode(false);
            setLoading(false);
            setError(null);
            return;
        }

        // pĹ™ihlĂˇĹˇenĂ˝ uĹľivatel â†’ naÄŤteme reĹľim z backendu
        const loadMode = async () => {
            try {
                setLoading(true);
                setError(null);

                console.log("[AppModeProvider] calling fetchAppMode() ...");

                const data = await fetchAppMode();

                console.log("[AppModeProvider] fetchAppMode() data:", data);

                setDemoMode(Boolean(data.demoMode));
            } catch (err) {
                console.error(
                    "[AppModeProvider] ERROR while loading app mode:",
                    err
                );

                let message = "NepodaĹ™ilo se naÄŤĂ­st reĹľim aplikace";

                if (err.response) {
                    console.error(
                        "[AppModeProvider] error response:",
                        err.response.status,
                        err.response.data
                    );
                    message = `Chyba serveru (${err.response.status})`;
                } else if (err.request) {
                    console.error(
                        "[AppModeProvider] no response, err.request:",
                        err.request
                    );
                    message = "Server neodpovĂ­dĂˇ";
                } else if (err.message) {
                    message = err.message;
                }

                setError(message);
                setDemoMode(false);
            } finally {
                setLoading(false);
                console.log("[AppModeProvider] useEffect FINISHED");
            }
        };

        loadMode();
    }, [isAuthenticated]); // đź‘ refetch vĹľdy, kdyĹľ se zmÄ›nĂ­ stav pĹ™ihlĂˇĹˇenĂ­

    return (
        <AppModeContext.Provider value={{ demoMode, loading, error }}>
            {children}
        </AppModeContext.Provider>
    );
};

export const useAppMode = () => useContext(AppModeContext);


==================================================
src\context\AuthContext.jsx
==================================================



==================================================
src\context\NotificationContext.jsx
==================================================

// src/context/NotificationContext.jsx
import { createContext, useContext, useState } from "react";

const NotificationContext = createContext(null);

export const NotificationProvider = ({ children }) => {
    const [notification, setNotification] = useState(null);

    const showNotification = (message, type = "success", timeout = 4000) => {
        setNotification({ message, type });
        if (timeout) {
            setTimeout(() => setNotification(null), timeout);
        }
    };

    const clearNotification = () => setNotification(null);

    return (
        <NotificationContext.Provider
            value={{ notification, showNotification, clearNotification }}
        >
            {children}
        </NotificationContext.Provider>
    );
};

export const useNotification = () => useContext(NotificationContext);


==================================================
src\hooks\useAllMatchesAdmin.jsx
==================================================

// src/hooks/useAllMatchesAdmin.jsx
import { useEffect, useState, useCallback } from "react";
import { getAllMatchesAdmin } from "../api/matchApi";

export const useAllMatchesAdmin = (seasonId) => {
    const [matches, setMatches] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const load = useCallback(async () => {
        setLoading(true);
        setError(null);

        try {
            // pokud backend bere sezĂłnu z user settings,
            // seasonId klidnÄ› nepotĹ™ebujeĹˇ v parametrech,
            // ale pouĹľijeme ho aspoĹ v zĂˇvislostech:
            const data = await getAllMatchesAdmin();
            // kdybys mÄ›l endpoint podle sezĂłny:
            // const data = await getAllMatchesAdmin(seasonId);
            setMatches(data);
        } catch (err) {
            console.error("Chyba pĹ™i naÄŤĂ­tĂˇnĂ­ zĂˇpasĹŻ:", err);
            const status = err?.response?.status;
            const msg = err?.response?.data?.message;

            if (status === 404) {
                setError(msg || "Ĺ˝ĂˇdnĂ© zĂˇpasy nebyly nalezeny.");
            } else {
                setError("NepodaĹ™ilo se naÄŤĂ­st zĂˇpasy.");
            }
        } finally {
            setLoading(false);
        }
    }, [seasonId]); // đź‘ DĹ®LEĹ˝ITĂ‰: zĂˇvislost na seasonId

    useEffect(() => {
        // kdyĹľ seasonId jeĹˇtÄ› nenĂ­ znĂˇma (napĹ™. pĹ™i prvnĂ­m mountu), mĹŻĹľeĹˇ i tak naÄŤĂ­st,
        // pokud backend bere aktuĂˇlnĂ­ sezĂłnu z user settings:
        if (seasonId == null) {
            // buÄŹ vraĹĄ nic, nebo klidnÄ› zavolej load();
            // return;
        }
        load();
    }, [load]);

    return { matches, loading, error, reload: load };
};


==================================================
src\hooks\useAllPlayersAdmin.jsx
==================================================

// src/hooks/useAllPlayersAdmin.js
import { useEffect, useState } from "react";
import { getAllPlayersAdmin } from "../api/playerApi";

/**
 * Hook pro globĂˇlnĂ­ sprĂˇvu hrĂˇÄŤĹŻ (ADMIN / MANAGER).
 *
 * NaÄŤĂ­tĂˇ vĹˇechny hrĂˇÄŤe v systĂ©mu pĹ™es GET /api/players.
 * VracĂ­:
 *  - players: pole vĹˇech hrĂˇÄŤĹŻ (PlayerDTO[])
 *  - loading: true, dokud se naÄŤĂ­tĂˇ
 *  - error: text chyby nebo null
 *  - reload(): znovu naÄŤte data (po approve/reject/update/delete)
 */
export const useAllPlayersAdmin = () => {
    const [players, setPlayers] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const loadPlayers = async () => {
        setLoading(true);
        setError(null);

        try {
            const data = await getAllPlayersAdmin();
            setPlayers(data);
            return data;
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st vĹˇechny hrĂˇÄŤe", err);

            const message =
                err?.response?.data?.message ||
                err?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st hrĂˇÄŤe";

            setError(message);
            return null;
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        // naÄŤtenĂ­ pĹ™i prvnĂ­m zobrazenĂ­ admin strĂˇnky
        loadPlayers();
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);

    return {
        players,
        loading,
        error,
        reload: loadPlayers,
    };
};


==================================================
src\hooks\useAllPlayersAdminWithUsers.jsx
==================================================

// src/hooks/useAllPlayersAdminWithUsers.js
import { useEffect, useMemo, useState } from "react";
import { useAllPlayersAdmin } from "./useAllPlayersAdmin";
import { userApi } from "../api/userApi";

/**
 * KompozitnĂ­ hook pro ADMIN:
 *
 * - naÄŤte vĹˇechny hrĂˇÄŤe (useAllPlayersAdmin)
 * - naÄŤte vĹˇechny uĹľivatele (userApi.getAll)
 * - spojĂ­ hrĂˇÄŤe s uĹľivateli na FE (bez zĂˇsahu do backendu)
 *
 * VĂ˝stup:
 *  - players: PlayerDTO[] rozĹˇĂ­Ĺ™enĂ© o { user }
 *  - loading
 *  - error
 *  - reload()
 */
export const useAllPlayersAdminWithUsers = () => {
    const {
        players,
        loading: playersLoading,
        error: playersError,
        reload: reloadPlayers,
    } = useAllPlayersAdmin();

    const [users, setUsers] = useState([]);
    const [usersLoading, setUsersLoading] = useState(true);
    const [usersError, setUsersError] = useState(null);

    const loadUsers = async () => {
        setUsersLoading(true);
        setUsersError(null);

        try {
            const data = await userApi.getAll();
            console.log("USERS v hooku:", data);
            setUsers(data);
            return data;
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st uĹľivatele", err);

            const message =
                err?.response?.data?.message ||
                err?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st uĹľivatele";

            setUsersError(message);
            return null;
        } finally {
            setUsersLoading(false);
        }
    };

    useEffect(() => {
        loadUsers();
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);

    // SpojenĂ­ hrĂˇÄŤĹŻ s uĹľivateli
    const playersWithUsers = useMemo(() => {
        if (!players || players.length === 0) {
            return players;
        }
        if (!users || users.length === 0) {
            // jeĹˇtÄ› nemĂˇme uĹľivatele, vraĹĄ hrĂˇÄŤe bez user
            return players.map((p) => ({ ...p, user: null }));
        }

        // 1) Mapa playerId -> user podle AppUserDTO.players (pokud backend posĂ­lĂˇ hrĂˇÄŤe u uĹľivatele)
        const playerIdToUser = new Map();

        users.forEach((u) => {
            if (Array.isArray(u.players)) {
                u.players.forEach((pl) => {
                    if (pl && pl.id != null && !playerIdToUser.has(pl.id)) {
                        playerIdToUser.set(pl.id, {
                            id: u.id,
                            name: u.name,
                            surname: u.surname,
                            email: u.email,
                        });
                    }
                });
            }
        });

        console.log("MAPA playerIdToUser:", playerIdToUser);

        return players.map((player) => {
            let user = null;

            // 1) ZkusĂ­me najĂ­t podle player.id v mapÄ›
            if (playerIdToUser.has(player.id)) {
                user = playerIdToUser.get(player.id);
            } else {
                // 2) fallback â€“ match podle jmĂ©na + pĹ™Ă­jmenĂ­
                //    (ty sĂˇm pĂ­ĹˇeĹˇ, Ĺľe u uĹľivatele nesmĂ­ bĂ˝t stejnĂ­ hrĂˇÄŤi se stejnĂ˝m jmĂ©nem + pĹ™Ă­jmenĂ­m)
                user =
                    users.find(
                        (u) =>
                            u.name === player.name &&
                            u.surname === player.surname
                    ) || null;
            }

            return {
                ...player,
                user,
            };
        });
    }, [players, users]);

    return {
        players: playersWithUsers,
        loading: playersLoading || usersLoading,
        error: playersError || usersError,
        reload: async () => {
            await Promise.all([reloadPlayers(), loadUsers()]);
        },
    };
};


==================================================
src\hooks\useAllSeasonsAdmin.jsx
==================================================

// src/hooks/useAllSeasonsAdmin.js
import { useEffect, useState } from "react";
import { getAllSeasonsAdmin } from "../api/seasonApi";

/**
 * Hook pro globĂˇlnĂ­ sprĂˇvu sezĂłn (ADMIN / MANAGER).
 *
 * NaÄŤĂ­tĂˇ vĹˇechny sezĂłny v systĂ©mu pĹ™es GET /api/seasons.
 * VracĂ­:
 *  - seasons: pole vĹˇech sezĂłn (SeasonDTO[])
 *  - loading: true, dokud se naÄŤĂ­tĂˇ
 *  - error: text chyby nebo null
 *  - reload(): znovu naÄŤte data (po create/update/delete)
 */
export const useAllSeasonsAdmin = () => {
    const [seasons, setSeasons] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const loadSeasons = async () => {
        setLoading(true);
        setError(null);

        try {
            const data = await getAllSeasonsAdmin();
            setSeasons(data);
            return data;
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st sezĂłny", err);

            const message =
                err?.response?.data?.message ||
                err?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st sezĂłny";

            setError(message);
            return null;
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        loadSeasons();
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);

    return {
        seasons,
        loading,
        error,
        reload: loadSeasons,
    };
};


==================================================
src\hooks\useAllUsersAdmin.jsx
==================================================

// src/hooks/useAllUsersAdmin.js
import { useEffect, useState } from "react";
import { userApi } from "../api/userApi";

/**
 * Hook pro globĂˇlnĂ­ sprĂˇvu uĹľivatelĹŻ (ADMIN).
 *
 * NaÄŤĂ­tĂˇ vĹˇechny uĹľivatele v systĂ©mu pĹ™es GET /api/users.
 * VracĂ­:
 *  - users: pole vĹˇech uĹľivatelĹŻ (AppUserDTO[])
 *  - loading: true, dokud se naÄŤĂ­tĂˇ
 *  - error: text chyby nebo null
 *  - reload(): znovu naÄŤte data (po editaci / aktivaci / deaktivaci / resetu hesla)
 */
export const useAllUsersAdmin = () => {
    const [users, setUsers] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const loadUsers = async () => {
        setLoading(true);
        setError(null);

        try {
            const data = await userApi.getAll(); // uĹľ pouĹľĂ­vĂˇĹˇ v hooku useAllPlayersAdminWithUsers
            setUsers(data);
            return data;
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st uĹľivatele", err);

            const message =
                err?.response?.data?.message ||
                err?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st uĹľivatele";

            setError(message);
            return null;
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        // naÄŤtenĂ­ pĹ™i prvnĂ­m zobrazenĂ­ admin strĂˇnky
        loadUsers();
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);

    return {
        users,
        loading,
        error,
        reload: loadUsers,
    };
};


==================================================
src\hooks\useAuth.jsx
==================================================

// src/hooks/useAuth.jsx

import { createContext, useContext, useEffect, useState } from "react";
import { fetchCurrentUser, logoutUser } from "../api/authApi";

const AuthContext = createContext(null);

export const AuthProvider = ({ children }) => {
    const [user, setUser] = useState(null);
    const [loading, setLoading] = useState(true);

    const loadUser = async () => {
        setLoading(true);
        try {
            const res = await fetchCurrentUser();
            setUser(res.data);
        } catch {
            setUser(null);
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        loadUser();
    }, []);

    const updateUser = async () => {
        await loadUser();
    };

    const logout = async () => {
        try {
            await logoutUser();
        } catch (err) {
            console.error("Logout error:", err);
        } finally {
            // DĹ®LEĹ˝ITĂ‰: po odhlĂˇĹˇenĂ­ user = null
            setUser(null);
        }
    };

    const isAuthenticated = !!user;

    return (
        <AuthContext.Provider
            value={{
                user,
                loading,
                isAuthenticated,
                updateUser,
                logout,
            }}
        >
            {children}
        </AuthContext.Provider>
    );
};

export const useAuth = () => {
    const context = useContext(AuthContext);
    if (!context) {
        throw new Error("useAuth must be used inside AuthProvider");
    }
    return context;
};


==================================================
src\hooks\useBootstrapTooltip.jsx
==================================================

import { useEffect } from "react";
import * as bootstrap from "bootstrap";

export const useBootstrapTooltip = () => {
    useEffect(() => {
        const tooltipTriggerList = [].slice.call(
            document.querySelectorAll('[data-bs-toggle="tooltip"]')
        );

        const tooltipList = tooltipTriggerList.map(
            (tooltipTriggerEl) =>
                new bootstrap.Tooltip(tooltipTriggerEl)
        );

        return () => {
            tooltipList.forEach((tooltip) => tooltip.dispose());
        };
    }, []);
};


==================================================
src\hooks\useCurrentPlayer.jsx
==================================================

// src/hooks/useCurrentPlayer.js
import { createContext, useContext, useEffect, useState } from "react";
import {
    getCurrentPlayer,
    getMyPlayers,
    setCurrentPlayer,
} from "../api/playerApi";

const CurrentPlayerContext = createContext(null);

export const CurrentPlayerProvider = ({ children }) => {
    const [currentPlayer, setCurrentPlayerState] = useState(null);
    const [players, setPlayers] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    /**
     * NaÄŤte kontext aktuĂˇlnĂ­ho hrĂˇÄŤe:
     * - seznam hrĂˇÄŤĹŻ pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele
     * - aktuĂˇlnÄ› zvolenĂ©ho hrĂˇÄŤe (pokud je nastaven)
     *
     * Pokud nenĂ­ aktuĂˇlnĂ­ hrĂˇÄŤ nastaven a uĹľivatel mĂˇ pĹ™esnÄ› jednoho hrĂˇÄŤe,
     * tento hrĂˇÄŤ se automaticky nastavĂ­ jako aktuĂˇlnĂ­.
     */
    const refreshCurrentPlayer = async () => {
        setLoading(true);
        setError(null);

        try {
            // NaÄŤteme moje hrĂˇÄŤe a aktuĂˇlnĂ­ho hrĂˇÄŤe paralelnÄ›
            const [playersData, currentPlayerData] = await Promise.all([
                getMyPlayers(),     // GET /players/me
                getCurrentPlayer(), // GET /current-player
            ]);

            setPlayers(playersData || []);

            if (currentPlayerData) {
                // Backend mĂˇ nastavenĂ©ho aktuĂˇlnĂ­ho hrĂˇÄŤe
                setCurrentPlayerState(currentPlayerData);
                return currentPlayerData;
            }

            // AktuĂˇlnĂ­ hrĂˇÄŤ nenĂ­ nastaven
            if (playersData && playersData.length === 1) {
                // Pokud mĂˇ uĹľivatel prĂˇvÄ› jednoho hrĂˇÄŤe, automaticky ho nastavĂ­me
                const only = playersData[0];
                await setCurrentPlayer(only.id); // POST /current-player/{playerId}
                setCurrentPlayerState(only);
                return only;
            }

            // 0 hrĂˇÄŤĹŻ nebo vĂ­ce hrĂˇÄŤĹŻ bez auto vĂ˝bÄ›ru â€“ nechĂˇme currentPlayer null
            setCurrentPlayerState(null);
            return null;
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st kontext aktuĂˇlnĂ­ho hrĂˇÄŤe", err);
            setCurrentPlayerState(null);
            setPlayers([]);

            const message =
                err?.response?.data?.message ||
                err?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st aktuĂˇlnĂ­ho hrĂˇÄŤe";

            setError(message);
            return null;
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        // pĹ™i prvnĂ­m naÄŤtenĂ­ chrĂˇnÄ›nĂ© ÄŤĂˇsti webu se zkusĂ­ naÄŤĂ­st kontext hrĂˇÄŤĹŻ
        refreshCurrentPlayer();
    }, []);

    /**
     * ZmÄ›nĂ­ aktuĂˇlnĂ­ho hrĂˇÄŤe na zĂˇkladÄ› ID.
     *
     * VolĂˇ se z frontendu (napĹ™. z dropdownu v Navbaru) a nastavĂ­ hrĂˇÄŤe
     * jak v backendu, tak lokĂˇlnÄ› v kontextu.
     */
    const changeCurrentPlayer = async (playerId) => {
        if (!playerId) {
            return;
        }

        await setCurrentPlayer(playerId); // POST /current-player/{playerId}
        const found = players.find((p) => p.id === playerId) || null;
        setCurrentPlayerState(found);
    };

    return (
        <CurrentPlayerContext.Provider
            value={{
                currentPlayer,
                setCurrentPlayer: setCurrentPlayerState, // pro pĹ™Ă­padnĂ© ruÄŤnĂ­ pouĹľitĂ­
                players,
                changeCurrentPlayer,
                refreshCurrentPlayer,
                loading,
                error,
            }}
        >
            {children}
        </CurrentPlayerContext.Provider>
    );
};

export const useCurrentPlayer = () => {
    const ctx = useContext(CurrentPlayerContext);

    // â€žsafe fallbackâ€ś kdyĹľ provider nĂˇhodou neobklopuje komponentu
    if (!ctx) {
        return {
            currentPlayer: null,
            setCurrentPlayer: () => { },
            players: [],
            changeCurrentPlayer: async () => { },
            refreshCurrentPlayer: async () => null,
            loading: false,
            error: null,
        };
    }

    return ctx;
};


==================================================
src\hooks\useDemoMode.jsx
==================================================

// src/hooks/useDemoMode.js

import { useAppMode } from "../context/AppModeContext";

/**
 * Custom hook pro prĂˇci s reĹľimem aplikace (demo / produkce).
 *
 * VracĂ­:
 *  - demoMode: boolean (true = demo reĹľim, false = produkce)
 *  - loading: boolean (probĂ­hĂˇ naÄŤĂ­tĂˇnĂ­ reĹľimu)
 *  - error: string | null (chybovĂˇ hlĂˇĹˇka, pokud selĹľe naÄŤtenĂ­)
 *  - isDemo: alias na demoMode pro ÄŤitelnÄ›jĹˇĂ­ pouĹľitĂ­
 */
export const useDemoMode = () => {
    const { demoMode, loading, error } = useAppMode();

    return {
        demoMode,
        loading,
        error,
        isDemo: Boolean(demoMode),
    };
};


==================================================
src\hooks\useDemoNotifications.jsx
==================================================

// src/hooks/useDemoNotifications.js
import { useCallback, useState } from "react";
import { getDemoNotifications } from "../api/demoNotificationsApi";

export const useDemoNotifications = () => {
    const [notifications, setNotifications] = useState({
        emails: [],
        sms: [],
    });
    const [showModal, setShowModal] = useState(false);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);

    const loadAndShow = useCallback(async () => {
        try {
            setLoading(true);
            setError(null);

            const response = await getDemoNotifications();
            const data = response.data || {};

            const emails = data.emails ?? [];
            const sms = data.sms ?? [];

            const hasAny = (emails && emails.length > 0) || (sms && sms.length > 0);

            if (hasAny) {
                setNotifications({ emails, sms });
                setShowModal(true);
                
                // debug do konzole
                console.log("DEMO notifications loaded:", { emails, sms });
                return { hasAny, emails, sms };
            } else {
                setNotifications({ emails: [], sms: [] });
                setShowModal(false);
                console.log("DEMO notifications: prĂˇzdnĂ©");
            }
        } catch (e) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st demo notifikace:", e);
            setError("NepodaĹ™ilo se naÄŤĂ­st demo notifikace.");
        } finally {
            setLoading(false);
        }
    }, []);

    const close = useCallback(() => {
        setShowModal(false);
    }, []);

    return {
        notifications,
        showModal,
        loading,
        error,
        loadAndShow,
        close,
    };
};


==================================================
src\hooks\useGlobalDim.jsx
==================================================

import { useEffect } from "react";

export const useGlobalDim = (isActive) => {
    useEffect(() => {
        if (isActive) document.body.classList.add("dim-open");
        else document.body.classList.remove("dim-open");

        return () => document.body.classList.remove("dim-open");
    }, [isActive]);
};


==================================================
src\hooks\useGlobalModal.jsx
==================================================

// src/hooks/useGlobalModal.js
import { useEffect } from "react";

export const useGlobalModal = (isOpen) => {
  useEffect(() => {
    document.body.classList.toggle("modal-open", !!isOpen);

    return () => {
      document.body.classList.remove("modal-open");
    };
  }, [isOpen]);
};


==================================================
src\hooks\useMatchDetail.jsx
==================================================

// src/hooks/useMatchDetail.jsx
import { useEffect, useState, useCallback } from "react";
import { getMatchDetail } from "../api/matchApi"; // uprav nĂˇzev funkce podle tvĂ©ho API

export const useMatchDetail = (id) => {
    const [match, setMatch] = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const load = useCallback(async () => {
        if (!id) {
            return;
        }

        setLoading(true);
        setError(null);

        try {
            const data = await getMatchDetail(id);
            console.log("NaÄŤtenĂ˝ detail zĂˇpasu:", data);
            setMatch(data);
        } catch (err) {
            console.error("Chyba pĹ™i naÄŤĂ­tĂˇnĂ­ detailu zĂˇpasu:", err);

            const status = err?.response?.status;
            const msg = err?.response?.data?.message;

            if (status === 404) {
                setError(msg || "ZĂˇpas nebyl nalezen.");
            } else if (status === 403) {
                setError("NemĂˇte oprĂˇvnÄ›nĂ­ zobrazit tento zĂˇpas.");
            } else {
                setError("NepodaĹ™ilo se naÄŤĂ­st detail zĂˇpasu.");
            }
        } finally {
            setLoading(false);
        }
    }, [id]);

    useEffect(() => {
        load();
    }, [load]);

    return { match, loading, error, reload: load };
};


==================================================
src\hooks\useMatchHistoryAdmin.jsx
==================================================

// src/hooks/useMatchHistoryAdmin.js
import { useEffect, useState } from "react";
import { getMatchHistoryAdmin } from "../api/matchApi";

export const useMatchHistoryAdmin = (matchId) => {
    const [history, setHistory] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        if (!matchId) {
            setHistory([]);
            setLoading(false);
            setError("ChybĂ­ ID zĂˇpasu.");
            return;
        }

        let isMounted = true;

        const load = async () => {
            setLoading(true);
            setError(null);
            try {
                const data = await getMatchHistoryAdmin(matchId);
                if (!isMounted) return;
                setHistory(data || []);
            } catch (err) {
                if (!isMounted) return;

                const status = err?.response?.status;
                const msg = err?.response?.data?.message;

                if (status === 404) {
                    setError(msg || "Historie zĂˇpasu nebyla nalezena.");
                } else {
                    setError("NepodaĹ™ilo se naÄŤĂ­st historii zĂˇpasu.");
                }
            } finally {
                if (isMounted) {
                    setLoading(false);
                }
            }
        };

        load();

        return () => {
            isMounted = false;
        };
    }, [matchId]);

    return { history, loading, error };
};


==================================================
src\hooks\useMatchRegistrationHistory.jsx
==================================================

// src/hooks/useMatchRegistrationHistory.jsx
import { useEffect, useState } from "react";
import { getMyMatchRegistrationHistory } from "../api/matchRegistrationHistoryApi";


export const useMyMatchRegistrationHistory = (matchId) => {
    const [history, setHistory] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        if (!matchId) {
            setHistory([]);
            setLoading(false);
            return;
        }

        const load = async () => {
            try {
                setLoading(true);
                const data = await getMyMatchRegistrationHistory(matchId);
                setHistory(data);
                setError(null);
            } catch (err) {
                setError(
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st historii registracĂ­."
                );
            } finally {
                setLoading(false);
            }
        };

        load();
    }, [matchId]);


    return { history, loading, error };
};


==================================================
src\hooks\useMyInactivity.jsx
==================================================

// src/hooks/useMyInactivity.js
import { useEffect, useState } from "react";
import { getMyInactivity } from "../api/playerInactivityApi";

const normalizeDate = (value) => {
    if (!value) return null;

    const raw =
        typeof value === "string"
            ? value.includes("T")
                ? value
                : value.replace(" ", "T")
            : value;

    const d = new Date(raw);
    return Number.isNaN(d.getTime()) ? null : d;
};

export const useMyInactivity = () => {
    const [periods, setPeriods] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const load = async () => {
        try {
            setLoading(true);
            setError(null);
            const data = await getMyInactivity();

            const now = new Date();

            const withCurrentFlag = (data || []).map((p) => {
                const from = normalizeDate(p.inactiveFrom);
                const to = normalizeDate(p.inactiveTo);

                const isCurrent =
                    from && to ? from <= now && to >= now : false;

                return {
                    ...p,
                    isCurrent,
                };
            });

            // Pro jednoho hrĂˇÄŤe staÄŤĂ­ seĹ™adit podle zaÄŤĂˇtku neaktivity
            withCurrentFlag.sort((a, b) => {
                const fromA = normalizeDate(a.inactiveFrom) || new Date(0);
                const fromB = normalizeDate(b.inactiveFrom) || new Date(0);
                return fromA - fromB;
            });

            setPeriods(withCurrentFlag);
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st neaktivity hrĂˇÄŤe:", err);
            const msg =
                err?.response?.data?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st obdobĂ­ neaktivity.";
            setError(msg);
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        load();
    }, []);

    return { periods, loading, error, reload: load };
};


==================================================
src\hooks\useMyPassedMatches.jsx
==================================================

// src/hooks/useMyPassedMatches.js
import { useEffect, useState } from "react";
import { getMyPassedMatchesOverview } from "../api/matchApi";
import { useSeason } from "./useSeason";
import { useCurrentPlayer } from "./useCurrentPlayer";

export const useMyPassedMatches = () => {
    const { currentSeasonId } = useSeason();
    const { currentPlayer } = useCurrentPlayer(); // đź‘ pĹ™idĂˇno

    const [matches, setMatches] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        let isMounted = true;

        const load = async () => {
            // 1) bez sezĂłny nemĂˇ smysl nic tahat
            if (!currentSeasonId) {
                if (isMounted) {
                    setMatches([]);
                    setLoading(false);
                    setError(null);
                }
                return;
            }

            // 2) bez aktuĂˇlnĂ­ho hrĂˇÄŤe taky ne â€“ poÄŤkĂˇme, aĹľ si ho uĹľivatel vybere
            if (!currentPlayer) {
                if (isMounted) {
                    setMatches([]);
                    setLoading(false);
                    setError("Nejprve si musĂ­te vybrat aktuĂˇlnĂ­ho hrĂˇÄŤe.");
                }
                return;
            }

            if (isMounted) {
                setLoading(true);
                setError(null);
            }

            try {
                // backend bere aktuĂˇlnĂ­ho hrĂˇÄŤe i sezĂłnu z kontextu uĹľivatele
                const data = await getMyPassedMatchesOverview();
                if (isMounted) {
                    setMatches(data);
                }
            } catch (err) {
                if (!isMounted) return;

                const status = err?.response?.status;
                const msg = err?.response?.data?.message;

                if (status === 400 || status === 404) {
                    setError(
                        msg ||
                        "Nejprve si musĂ­te vybrat aktuĂˇlnĂ­ho hrĂˇÄŤe."
                    );
                } else {
                    setError(
                        msg ||
                        "NepodaĹ™ilo se naÄŤĂ­st uplynulĂ© zĂˇpasy."
                    );
                }
            } finally {
                if (isMounted) {
                    setLoading(false);
                }
            }
        };

        load();

        // Ăşklid
        return () => {
            isMounted = false;
        };
        // đź‘‡ reaguje na zmÄ›nu sezĂłny i hrĂˇÄŤe
    }, [currentSeasonId, currentPlayer?.id]);

    return { matches, loading, error };
};


==================================================
src\hooks\useMyPlayerStats.jsx
==================================================

// src/hooks/useMyPlayerStats.js
import { useCallback, useEffect, useRef, useState } from "react";
import { getMyPlayerStats } from "../api/playerApi";
import { useCurrentPlayer } from "./useCurrentPlayer";
import { useSeason } from "./useSeason";

/**
 * Hook pro naÄŤtenĂ­ statistik aktuĂˇlnĂ­ho hrĂˇÄŤe pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele.
 *
 * Hook se pouĹľĂ­vĂˇ na hrĂˇÄŤskĂ˝ch strĂˇnkĂˇch, kde je potĹ™eba zobrazit agregovanĂ©
 * statistiky registracĂ­ a ĂşÄŤasti na zĂˇpasech pro aktuĂˇlnĂ­ sezĂłnu.
 *
 * Data se naÄŤĂ­tajĂ­ z backendu pĹ™es GET /api/players/me/stats.
 *
 * Statistiky se automaticky obnovujĂ­ pĹ™i zmÄ›nÄ›:
 *  - aktuĂˇlnĂ­ho hrĂˇÄŤe (CurrentPlayerContext)
 *  - aktuĂˇlnĂ­ sezĂłny (SeasonContext)
 */
export const useMyPlayerStats = (options = {}) => {
    const { enabled = true } = options;

    const { currentPlayer } = useCurrentPlayer();
    const { currentSeasonId } = useSeason();

    const [stats, setStats] = useState(null);
    const [loading, setLoading] = useState(Boolean(enabled));
    const [error, setError] = useState("");

    // ochrana proti pĹ™epsĂˇnĂ­ novÄ›jĹˇĂ­ch dat starĹˇĂ­m requestem
    const requestSeqRef = useRef(0);

    const reload = useCallback(async () => {
        if (!enabled) return;

        // bez vybranĂ©ho hrĂˇÄŤe nedĂˇvĂˇ smysl tahat stats (backend stejnÄ› vyhodĂ­ error)
        if (!currentPlayer?.id) {
            setStats(null);
            setLoading(false);
            setError("");
            return;
        }

        // pokud backend pouĹľĂ­vĂˇ currentSeasonId z kontextu/session, nechĂˇme tady guard
        // (pokud nenĂ­ sezĂłna vybranĂˇ, statistiky zatĂ­m nenaÄŤĂ­tĂˇme)
        if (!currentSeasonId) {
            setStats(null);
            setLoading(false);
            setError("");
            return;
        }

        const seq = ++requestSeqRef.current;

        setLoading(true);
        setError("");

        try {
            const data = await getMyPlayerStats();

            // ignoruj vĂ˝sledek, pokud mezitĂ­m dobÄ›hl novÄ›jĹˇĂ­ request
            if (seq !== requestSeqRef.current) return;

            setStats(data ?? null);
        } catch (e) {
            if (seq !== requestSeqRef.current) return;

            const message =
                e?.response?.data?.message ||
                e?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st statistiky hrĂˇÄŤe.";

            setError(message);
            setStats(null);
        } finally {
            if (seq !== requestSeqRef.current) return;
            setLoading(false);
        }
    }, [enabled, currentPlayer?.id, currentSeasonId]);

    useEffect(() => {
        reload();
    }, [reload]);

    return { stats, loading, error, reload };
};


==================================================
src\hooks\useMyUpcomingMatches.jsx
==================================================

// src/hooks/useMyUpcomingMatches.js
import { useEffect, useState } from "react";
import { getMyUpcomingMatchesOverview } from "../api/matchApi";
import { useSeason } from "./useSeason";
import { useCurrentPlayer } from "./useCurrentPlayer";

export const useMyUpcomingMatches = () => {
    const { currentSeasonId } = useSeason();
    const { currentPlayer } = useCurrentPlayer(); // đź‘ pĹ™idĂˇno

    const [matches, setMatches] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        let isMounted = true;

        const load = async () => {
            // 1) Bez vybranĂ© sezĂłny nemĂˇ smysl nic tahat
            if (!currentSeasonId) {
                if (isMounted) {
                    setMatches([]);
                    setLoading(false);
                    setError(null);
                }
                return;
            }

            // 2) Bez aktuĂˇlnĂ­ho hrĂˇÄŤe takĂ© ne â€“ poÄŤkĂˇme, neĹľ si ho uĹľivatel vybere
            if (!currentPlayer) {
                if (isMounted) {
                    setMatches([]);
                    setLoading(false);
                    setError("Nejprve si musĂ­te vybrat aktuĂˇlnĂ­ho hrĂˇÄŤe.");
                }
                return;
            }

            if (isMounted) {
                setLoading(true);
                setError(null);
            }

            try {
                const data = await getMyUpcomingMatchesOverview();
                if (isMounted) {
                    setMatches(data);
                }
            } catch (err) {
                if (!isMounted) return;

                const status = err?.response?.status;
                const msg = err?.response?.data?.message;

                if (status === 400 || status === 404) {
                    setError(
                        msg ||
                        "Nejprve si musĂ­te vybrat aktuĂˇlnĂ­ho hrĂˇÄŤe."
                    );
                } else {
                    setError(
                        msg ||
                        "NepodaĹ™ilo se naÄŤĂ­st nadchĂˇzejĂ­cĂ­ zĂˇpasy."
                    );
                }
            } finally {
                if (isMounted) {
                    setLoading(false);
                }
            }
        };

        load();

        return () => {
            isMounted = false;
        };
        // đź‘‡ reaguje na zmÄ›nu sezĂłny i aktuĂˇlnĂ­ho hrĂˇÄŤe
    }, [currentSeasonId, currentPlayer?.id]);

    return { matches, loading, error };
};


==================================================
src\hooks\usePlayerHistoryAdmin.jsx
==================================================

// src/hooks/usePlayerHistoryAdmin.jsx
import { useEffect, useState } from "react";
import { getPlayerHistoryAdmin } from "../api/playerApi";

export const usePlayerHistoryAdmin = (playerId) => {
    const [history, setHistory] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        if (!playerId) {
            setHistory([]);
            setLoading(false);
            setError(null);
            return;
        }

        let isMounted = true;

        const load = async () => {
            setLoading(true);
            setError(null);

            try {
                const data = await getPlayerHistoryAdmin(playerId);
                if (!isMounted) return;
                setHistory(data || []);
            } catch (err) {
                if (!isMounted) return;
                console.error("Chyba pĹ™i naÄŤĂ­tĂˇnĂ­ historie hrĂˇÄŤe:", err);
                const msg =
                    err?.response?.data?.message ||
                    err?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st historii hrĂˇÄŤe.";
                setError(msg);
            } finally {
                if (isMounted) setLoading(false);
            }
        };

        load();

        return () => {
            isMounted = false;
        };
    }, [playerId]);

    return { history, loading, error };
};


==================================================
src\hooks\usePlayerInactivityPeriodsAdmin.jsx
==================================================

// src/hooks/usePlayerInactivityPeriodsAdmin.js
import { useEffect, useState, useCallback } from "react";
import { getAllPlayerInactivityPeriodsAdmin } from "../api/playerInactivityApi";

export const usePlayerInactivityPeriodsAdmin = () => {
    const [periods, setPeriods] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    const fetchData = useCallback(async () => {
        try {
            setLoading(true);
            setError(null);

            const data = await getAllPlayerInactivityPeriodsAdmin();
            setPeriods(data || []);
        } catch (err) {
            console.error("Chyba pĹ™i naÄŤĂ­tĂˇnĂ­ informacĂ­ o neaktivitÄ› hrĂˇÄŤĹŻ:", err);
            setError(
                err?.response?.data?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st informace o neaktivitÄ› hrĂˇÄŤĹŻ."
            );
        } finally {
            setLoading(false);
        }
    }, []);

    // naÄŤtenĂ­ pĹ™i prvnĂ­m renderu
    useEffect(() => {
        fetchData();
    }, [fetchData]);

    // funkce pro ruÄŤnĂ­ reload (po uloĹľenĂ­ v modalu)
    const reload = useCallback(() => {
        fetchData();
    }, [fetchData]);

    return { periods, loading, error, reload };
};


==================================================
src\hooks\usePlayerRegistrationHistoryAdmin.jsx
==================================================

// src/hooks/usePlayerRegistationHistoryAdmin.jsx

import { useEffect, useState } from "react";
import { getPlayerRegistrationHistoryAdmin } from "../api/matchRegistrationHistoryApi";

export const usePlayerRegistrationHistoryAdmin = (matchId, playerId) => {
    const [history, setHistory] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        if (!matchId || !playerId) {
            setHistory([]);
            setLoading(false);
            setError("ChybĂ­ matchId nebo playerId.");
            return;
        }

        let isMounted = true;

        const load = async () => {
            try {
                setLoading(true);
                setError(null);
                const data = await getPlayerRegistrationHistoryAdmin(
                    matchId,
                    playerId
                );
                if (!isMounted) return;
                setHistory(data || []);
            } catch (err) {
                if (!isMounted) return;
                setError(
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st historii registracĂ­."
                );
            } finally {
                if (isMounted) setLoading(false);
            }
        };

        load();

        return () => {
            isMounted = false;
        };
    }, [matchId, playerId]);

    return { history, loading, error };
};


==================================================
src\hooks\usePlayers.jsx
==================================================

// logika oddÄ›lena od komponenty UI
import { useState, useEffect } from "react";
import { getMyPlayers } from "../api/playerApi";

export const usePlayers = () => {
    const [players, setPlayers] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    useEffect(() => {
        let isMounted = true;

        const loadPlayers = async () => {
            setLoading(true);
            setError(null);

            try {
                const data = await getMyPlayers(); // pĹ™Ă­mo data
                if (isMounted) {
                    setPlayers(data);
                }
            } catch (err) {
                if (!isMounted) return;

                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st hrĂˇÄŤe";

                setError(message);
            } finally {
                if (isMounted) {
                    setLoading(false);
                }
            }
        };

        loadPlayers();

        return () => {
            isMounted = false;
        };
    }, []);

    return { players, loading, error };
};


==================================================
src\hooks\usePlayerSettings.jsx
==================================================

// src/hooks/usePlayerSettings.js
import { useEffect, useState, useCallback } from "react";
import {
    getCurrentPlayerSettings,
    updateCurrentPlayerSettings,
    getPlayerSettings,
    updatePlayerSettings,
} from "../api/playerSettingsApi";

const emptySettings = {
    contactEmail: "",
    contactPhone: "",
    emailEnabled: false,
    smsEnabled: false,
    notifyOnRegistration: true,
    notifyOnExcuse: true,
    notifyOnMatchChange: true,
    notifyOnMatchCancel: true,
    notifyOnPayment: false,
    notifyReminders: true,
    reminderHoursBefore: 24,
};

export const usePlayerSettings = (playerId = null) => {
    const [settings, setSettings] = useState(emptySettings);
    const [loading, setLoading] = useState(true);
    const [saving, setSaving] = useState(false);
    const [error, setError] = useState(null);
    const [success, setSuccess] = useState(null);

    // naÄŤtenĂ­
    useEffect(() => {
        let isMounted = true;

        const load = async () => {
            try {
                setLoading(true);
                setError(null);

                const data = playerId
                    ? await getPlayerSettings(playerId)
                    : await getCurrentPlayerSettings();

                if (!isMounted) return;
                setSettings(data || emptySettings);
            } catch (err) {
                if (!isMounted) return;

                // đź”ą pro debug: vypiĹˇ chybu do konzole
                console.error("load player settings error:", err?.response || err);

                const msg =
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st nastavenĂ­ hrĂˇÄŤe.";
                setError(msg);
            } finally {
                if (isMounted) {
                    setLoading(false);
                }
            }
        };

        load();

        return () => {
            isMounted = false;
        };
    }, [playerId]);

    // uklĂˇdĂˇnĂ­
    const saveSettings = useCallback(
        async (newSettings) => {
            try {
                setSaving(true);
                setError(null);
                setSuccess(null);

                // newSettings uĹľ bude "payload" z SettingsPage
                const payload = { ...settings, ...newSettings };

                const updated = playerId
                    ? await updatePlayerSettings(playerId, payload)
                    : await updateCurrentPlayerSettings(payload);

                setSettings(updated);
                setSuccess("NastavenĂ­ bylo ĂşspÄ›ĹˇnÄ› uloĹľeno.");
                return updated;
            } catch (err) {
                // đź”ą tady si vytĂˇhneĹˇ konkrĂ©tnĂ­ status a body
                console.error(
                    "save player settings error:",
                    err?.response?.status,
                    err?.response?.data,
                    err
                );

                const msg =
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se uloĹľit nastavenĂ­ hrĂˇÄŤe.";
                setError(msg);
                throw err;
            } finally {
                setSaving(false);
            }
        },
        [playerId, settings]
    );

    return {
        settings,
        setSettings,
        loading,
        saving,
        error,
        success,
        saveSettings,
    };
};


==================================================
src\hooks\usePlayerStatsAdmin.jsx
==================================================

// src/hooks/usePlayerStatsAdmin.js
import { useCallback, useEffect, useState } from "react";
import { getPlayerStatsAdmin } from "../api/playerApi";

/**
 * Hook pro naÄŤtenĂ­ statistik vybranĂ©ho hrĂˇÄŤe (ADMIN/MANAGER).
 *
 * Data se naÄŤĂ­tajĂ­ z backendu pĹ™es GET /api/players/{playerId}/stats.
 */
export const usePlayerStatsAdmin = (playerId, options = {}) => {
    const { enabled = true } = options;

    const [stats, setStats] = useState(null);
    const [loading, setLoading] = useState(Boolean(enabled));
    const [error, setError] = useState("");

    const reload = useCallback(async () => {
        if (!enabled) return;
        if (!playerId) return;

        setLoading(true);
        setError("");

        try {
            const data = await getPlayerStatsAdmin(playerId);
            setStats(data ?? null);
        } catch (e) {
            const message =
                e?.response?.data?.message ||
                e?.message ||
                "NepodaĹ™ilo se naÄŤĂ­st statistiky hrĂˇÄŤe.";
            setError(message);
            setStats(null);
        } finally {
            setLoading(false);
        }
    }, [enabled, playerId]);

    useEffect(() => {
        reload();
    }, [reload]);

    return { stats, loading, error, reload };
};


==================================================
src\hooks\usePostLoginRedirect.jsx
==================================================

// src/hooks/usePostLoginRedirect.jsx
import { useNavigate } from "react-router-dom";
import {
    autoSelectCurrentPlayer,
    getCurrentPlayer,
} from "../api/playerApi";
import { fetchCurrentUser } from "../api/authApi";

// malĂ˝ helper na vytaĹľenĂ­ roli z rĹŻznĂ˝ch tvarĹŻ objektu
const extractRoles = (user) => {
    if (!user) return [];

    let roles = [];

    // 1) user.roles â€“ mĹŻĹľe bĂ˝t string, pole stringĹŻ, nebo pole objektĹŻ
    if (Array.isArray(user.roles)) {
        roles = roles.concat(
            user.roles.map((r) => {
                if (typeof r === "string") return r;
                return r.name || r.role || r.authority || null;
            }).filter(Boolean)
        );
    } else if (typeof user.roles === "string") {
        roles.push(user.roles);
    }

    // 2) user.role â€“ fallback (string nebo pole)
    if (Array.isArray(user.role)) {
        roles = roles.concat(
            user.role.map((r) =>
                typeof r === "string" ? r : r.name || r.role || r.authority || null
            ).filter(Boolean)
        );
    } else if (typeof user.role === "string") {
        roles.push(user.role);
    }

    // 3) user.authorities â€“ typickĂ˝ Spring Security tvar
    if (Array.isArray(user.authorities)) {
        roles = roles.concat(
            user.authorities
                .map((a) => a.authority || a.name || null)
                .filter(Boolean)
        );
    }

    // odstranĂ­me duplicity
    return Array.from(new Set(roles));
};

const usePostLoginRedirect = () => {
    const navigate = useNavigate();

    const run = async () => {
        // 1) naÄŤĂ­st usera z backendu
        let user = null;
        try {
            const res = await fetchCurrentUser();
            user = res.data;
            console.log("Post-login user:", user);
        } catch (err) {
            console.error("NepodaĹ™ilo se naÄŤĂ­st uĹľivatele po pĹ™ihlĂˇĹˇenĂ­", err);
        }

        const roles = extractRoles(user);
        console.log("DetekovanĂ© role po loginu:", roles);

        const isAdmin = roles.includes("ROLE_ADMIN");
        // manaĹľera na admin home:
        // const isManager = roles.includes("ROLE_MANAGER");

        // 2) Admin na "/"tam bÄ›ĹľĂ­ HomeDecider a vrĂˇtĂ­ AdminHomePage
        if (isAdmin /* || isManager */) {
            navigate("/app");
            return;
        }

        // 3) OstatnĂ­ â€“ zachovat pĹŻvodnĂ­ logiku s hrĂˇÄŤem
        try {
            await autoSelectCurrentPlayer();
        } catch (err) {
            console.error("Auto-select aktuĂˇlnĂ­ho hrĂˇÄŤe selhal", err);
        }

        try {
            const player = await getCurrentPlayer(); // PlayerDTO nebo null

            if (player) {
                navigate("/app/matches");
            } else {
                navigate("/app/players");
            }
        } catch (err) {
            console.error("NepodaĹ™ilo se zjistit aktuĂˇlnĂ­ho hrĂˇÄŤe", err);
            navigate("/app/players");
        }
    };

    return run;
};

export default usePostLoginRedirect;


==================================================
src\hooks\useSeason.jsx
==================================================

// src/hooks/useSeason.jsx
import { createContext, useContext, useEffect, useState } from "react";
import {
    fetchSeasonsForUser,
    fetchCurrentSeasonForUser,
    setCurrentSeasonForUser,
} from "../api/seasonApi";
import { useAuth } from "./useAuth";

const SeasonContext = createContext(null);

export const SeasonProvider = ({ children }) => {
    const { user } = useAuth();
    const [seasons, setSeasons] = useState([]);
    const [currentSeasonId, setCurrentSeasonId] = useState(null);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);

    useEffect(() => {
        const loadSeasons = async () => {
            if (!user) {
                setSeasons([]);
                setCurrentSeasonId(null);
                return;
            }

            setLoading(true);
            setError(null);

            try {
                const [allSeasons, currentSeason] = await Promise.all([
                    fetchSeasonsForUser(),
                    fetchCurrentSeasonForUser(),
                ]);

                console.log("NaÄŤtenĂ© sezĂłny:", allSeasons);
                console.log("AktuĂˇlnĂ­ sezĂłna:", currentSeason);

                setSeasons(allSeasons || []);

                if (currentSeason && currentSeason.id) {
                    setCurrentSeasonId(currentSeason.id);
                } else if (allSeasons && allSeasons.length > 0) {
                    // kdyĹľ nenĂ­ nastavenĂˇ aktuĂˇlnĂ­ sezĂłna, mĹŻĹľeĹˇ defaultnÄ› vybrat prvnĂ­
                    setCurrentSeasonId(allSeasons[0].id);
                } else {
                    setCurrentSeasonId(null);
                }
            } catch (e) {
                console.error("Failed to load seasons", e);
                setError("NepodaĹ™ilo se naÄŤĂ­st seznam sezĂłn.");
            } finally {
                setLoading(false);
            }
        };

        loadSeasons();
    }, [user]);

    const changeSeason = async (seasonId) => {
        try {
            setLoading(true);
            setError(null);
            await setCurrentSeasonForUser(seasonId);
            setCurrentSeasonId(seasonId);
        } catch (e) {
            console.error("Failed to change season", e);
            setError("NepodaĹ™ilo se zmÄ›nit sezĂłnu.");
        } finally {
            setLoading(false);
        }
    };

    const value = {
        seasons,
        currentSeasonId,
        changeSeason,
        loading,
        error,
    };

    return (
        <SeasonContext.Provider value={value}>
            {children}
        </SeasonContext.Provider>
    );
};

export const useSeason = () => {
    const ctx = useContext(SeasonContext);
    if (!ctx) {
        throw new Error("useSeason musĂ­ bĂ˝t pouĹľit uvnitĹ™ SeasonProvider");
    }
    return ctx;
};


==================================================
src\hooks\useUserProfile.jsx
==================================================

// src/hooks/useUserProfile.js
import { useEffect, useState } from "react";
import { userApi } from "../api/userApi";

/**
 * PrĂˇce s profilem pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele (AppUserDTO).
 *
 * NaÄŤĂ­tĂˇ /api/users/me a uklĂˇdĂˇ pĹ™es /api/users/me/update.
 */
export const useUserProfile = () => {
    const [profile, setProfile] = useState(null); // AppUserDTO
    const [loading, setLoading] = useState(true);
    const [saving, setSaving] = useState(false);
    const [error, setError] = useState(null);
    const [success, setSuccess] = useState(null);

    // naÄŤtenĂ­ profilu pĹ™i mountu
    useEffect(() => {
        let isMounted = true;

        const load = async () => {
            try {
                setLoading(true);
                setError(null);
                const data = await userApi.getCurrent(); // GET /users/me
                if (!isMounted) return;
                setProfile(data);
            } catch (err) {
                if (!isMounted) return;
                const msg =
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st profil uĹľivatele.";
                setError(msg);
            } finally {
                if (isMounted) {
                    setLoading(false);
                }
            }
        };

        load();

        return () => {
            isMounted = false;
        };
    }, []);

    // uloĹľenĂ­ profilu
    const saveProfile = async (updatedProfile) => {
        try {
            setSaving(true);
            setError(null);
            setSuccess(null);

            // volĂˇme backend â€“ PUT /api/users/me/update (AppUserDTO)
            const dto = {
                id: updatedProfile.id,
                name: updatedProfile.name?.trim(),
                surname: updatedProfile.surname?.trim(),
                email: updatedProfile.email, // login â€“ nemÄ›nĂ­me, ale DTO ho oÄŤekĂˇvĂˇ
                role: updatedProfile.role,
                enabled: updatedProfile.enabled,
                players: updatedProfile.players,
            };

            const message = await userApi.updateCurrent(dto);

            setProfile(dto); // lokĂˇlnÄ› pĹ™epĂ­Ĺˇeme
            setSuccess(
                typeof message === "string"
                    ? message
                    : "Profil uĹľivatele byl ĂşspÄ›ĹˇnÄ› uloĹľen."
            );
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                "NepodaĹ™ilo se uloĹľit profil uĹľivatele.";
            setError(msg);
            throw err;
        } finally {
            setSaving(false);
        }
    };

    return {
        profile,
        loading,
        saving,
        error,
        success,
        saveProfile,
        setProfile, // kdyĹľ budeĹˇ chtĂ­t manipulovat ruÄŤnÄ›
        setError,
        setSuccess,
    };
};


==================================================
src\hooks\useUserSettings.jsx
==================================================

// src/hooks/useUserSettings.js
import { useEffect, useState, useCallback } from "react";
import { getUserSettings, updateUserSettings } from "../api/userSettingsApi";

const emptyUserSettings = {
    playerSelectionMode: "FIRST_PLAYER",
    globalNotificationLevel: "ALL",
    copyAllPlayerNotificationsToUserEmail: false,
    receiveNotificationsForPlayersWithOwnEmail: false,
    emailDigestEnabled: false,
    emailDigestTime: "20:00",
    uiLanguage: "cs",
    timezone: "Europe/Prague",
    defaultLandingPage: "MATCHES",
};

export const useUserSettings = () => {
    const [settings, setSettings] = useState(emptyUserSettings);
    const [loading, setLoading] = useState(true);
    const [saving, setSaving] = useState(false);
    const [error, setError] = useState(null);
    const [success, setSuccess] = useState(null);

    useEffect(() => {
        let isMounted = true;

        const load = async () => {
            try {
                setLoading(true);
                setError(null);
                const data = await getUserSettings();
                if (!isMounted) return;
                setSettings(data || emptyUserSettings);
            } catch (err) {
                if (!isMounted) return;
                const msg =
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se naÄŤĂ­st nastavenĂ­ uĹľivatele.";
                setError(msg);
            } finally {
                if (isMounted) setLoading(false);
            }
        };

        load();

        return () => {
            isMounted = false;
        };
    }, []);

    const saveSettings = useCallback(
        async (newSettings) => {
            try {
                setSaving(true);
                setError(null);
                setSuccess(null);

                const payload = { ...settings, ...newSettings };
                const updated = await updateUserSettings(payload);

                setSettings(updated);
                setSuccess("NastavenĂ­ uĹľivatele bylo ĂşspÄ›ĹˇnÄ› uloĹľeno.");
                return updated;
            } catch (err) {
                const msg =
                    err?.response?.data?.message ||
                    "NepodaĹ™ilo se uloĹľit nastavenĂ­ uĹľivatele.";
                setError(msg);
                throw err;
            } finally {
                setSaving(false);
            }
        },
        [settings]
    );

    return {
        settings,
        setSettings,
        loading,
        saving,
        error,
        success,
        saveSettings,
    };
};


==================================================
src\icons\index.js
==================================================

export * from "./PlayerIcons";
export * from "./NavigationIcons";
export * from "./StatusIcons";
export * from "./OtherIcons";

==================================================
src\icons\NavigationIcons.jsx
==================================================

import { GiHamburgerMenu } from "react-icons/gi";
import { AiOutlineClose } from "react-icons/ai";

export const HamburgerIcon = () => <GiHamburgerMenu />;
export const CloseIcon = () => <AiOutlineClose />;

==================================================
src\icons\OtherIcons.jsx
==================================================

import { GiMoneyStack } from "react-icons/gi";

export const MoneyIcon = (props) => <GiMoneyStack {...props} />;

==================================================
src\icons\PlayerIcons.jsx
==================================================

import { FaPhone, FaUser, FaShieldAlt } from "react-icons/fa";
import { GiHockey } from "react-icons/gi";
import { PiHockeyFill } from "react-icons/pi";
import { VscJersey } from "react-icons/vsc";
import { IoShirt, IoShirtOutline } from "react-icons/io5";
import { FaCircle } from "react-icons/fa";

export const PhoneIcon = (props) => <FaPhone {...props} />;
export const UserIcon = (props) => <FaUser {...props} />;
export const AdminIcon = (props) => <FaShieldAlt {...props} />;
export const PlayerIcon = (props) => <GiHockey {...props} />;
export const PlayerStatusIcon = (props) => <PiHockeyFill {...props} />;
export const TeamDarkIcon = (props) => <IoShirt {...props} />;
export const TeamLightIcon = (props) => <IoShirtOutline {...props} />;
export const CurrentPlayerIcon = (props) => <FaCircle {...props} />;


==================================================
src\icons\StatusIcons.jsx
==================================================

import {
    FaCheck,
    FaTimes,
    FaHandPaper,
    FaHourglassHalf,
    FaQuestion,
    FaExclamationTriangle,
} from "react-icons/fa";


export const RegisteredIcon = (props) => <FaCheck {...props} 
    fill="currentColor"
    stroke="black"
    strokeWidth={20}
    strokeLinejoin="round"
    strokeLinecap="round" />;
export const UnregisteredIcon = (props) => <FaTimes {...props} 
    fill="currentColor"
    stroke="black"
    strokeWidth={20}
    strokeLinejoin="round"
    strokeLinecap="round"/>;
export const ExcusedIcon = (props) => <FaHandPaper {...props} 
    fill="currentColor"
    stroke="black"
    strokeWidth={20}
    strokeLinejoin="round"
    strokeLinecap="round"/>;
export const ReservedIcon = (props) => <FaHourglassHalf {...props} 
    fill="currentColor"
    stroke="black"
    strokeWidth={20}
    strokeLinejoin="round"
    strokeLinecap="round"/>;
export const NoResponseIcon = (props) => <FaQuestion {...props} 
    fill="currentColor"
    stroke="black"
    strokeWidth={20}
    strokeLinejoin="round"
    strokeLinecap="round"/>;
export const NoExcusedIcon = (props) => <FaExclamationTriangle {...props} 
    fill="currentColor"
    stroke="black"
    strokeWidth={20}
    strokeLinejoin="round"
    strokeLinecap="round"/>;


==================================================
src\pages\AdminHomePage.jsx
==================================================

import { Link, useNavigate } from "react-router-dom";
import { useMemo, useState } from "react";

import { useAllPlayersAdmin } from "../hooks/useAllPlayersAdmin";
import { useAllMatchesAdmin } from "../hooks/useAllMatchesAdmin";
import { useAllSeasonsAdmin } from "../hooks/useAllSeasonsAdmin";
import { useAllUsersAdmin } from "../hooks/useAllUsersAdmin";
import { useAuth } from "../hooks/useAuth";

const AdminHomePage = () => {
    const navigate = useNavigate();
    const { user } = useAuth();

    const isAdmin =
        user?.roles?.includes("ADMIN") || user?.role === "ADMIN";
    const isManager =
        !isAdmin &&
        (user?.roles?.includes("MANAGER") || user?.role === "MANAGER");

    const [showManagerInfo, setShowManagerInfo] = useState(isManager);

    const {
        players,
        loading: playersLoading,
        error: playersError,
        reload: reloadPlayers,
    } = useAllPlayersAdmin();

    const {
        matches,
        loading: matchesLoading,
        error: matchesError,
        reload: reloadMatches,
    } = useAllMatchesAdmin();

    const {
        seasons,
        loading: seasonsLoading,
        error: seasonsError,
        reload: reloadSeasons,
    } = useAllSeasonsAdmin();

    const {
        users,
        loading: usersLoading,
        error: usersError,
        reload: reloadUsers,
    } = useAllUsersAdmin();

    const playersCount = players?.length ?? 0;
    const matchesCount = matches?.length ?? 0;
    const seasonsCount = seasons?.length ?? 0;
    const usersCount = users?.length ?? 0;

    const reloadAll = () => {
        reloadPlayers?.();
        reloadMatches?.();
        reloadSeasons?.();
        reloadUsers?.();
    };

    const combinedError =
        playersError || matchesError || seasonsError || usersError || "";

    const renderValue = (loading, value) => (loading ? "â€¦" : value);

    // --- helpers for match date parsing/formatting ---
    const parseMatchDate = (m) => {
        const raw =
            m?.startTime ||
            m?.dateTime ||
            m?.matchTime ||
            m?.matchDateTime ||
            m?.date ||
            m?.time;

        if (!raw) return null;

        const d = new Date(String(raw).replace(" ", "T"));
        return Number.isNaN(d.getTime()) ? null : d;
    };

    const formatDateTime = (d) => {
        if (!d) return "â€”";
        return d.toLocaleString("cs-CZ", {
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
        });
    };

    const upcomingMatches = useMemo(() => {
        const now = new Date();
        const list = Array.isArray(matches) ? matches : [];

        return list
            .map((m) => {
                const dateObj = parseMatchDate(m);
                return { ...m, _dateObj: dateObj };
            })
            .filter((m) => m._dateObj && m._dateObj.getTime() > now.getTime())
            .sort((a, b) => a._dateObj.getTime() - b._dateObj.getTime())
            .slice(0, 5);
    }, [matches]);

    const stats = useMemo(
        () => [
            {
                label: "UĹľivatelĂ©",
                value: renderValue(usersLoading, usersCount),
                helper: "RegistrovanĂ­ v systĂ©mu",
            },
            {
                label: "HrĂˇÄŤi",
                value: renderValue(playersLoading, playersCount),
                helper: "VÄŤetnÄ› ÄŤekajĂ­cĂ­ch",
            },
            {
                label: "SezĂłny",
                value: renderValue(seasonsLoading, seasonsCount),
                helper: "V databĂˇzi",
            },
            {
                label: "ZĂˇpasy",
                value: renderValue(matchesLoading, matchesCount),
                helper: "AktuĂˇlnĂ­ sezĂłna",
            },
        ],
        [
            usersLoading,
            usersCount,
            playersLoading,
            playersCount,
            seasonsLoading,
            seasonsCount,
            matchesLoading,
            matchesCount,
        ]
    );

    const lastActivities = [
        { time: "Dnes 12:41", text: "ZmÄ›nÄ›n ÄŤas zĂˇpasu (ukĂˇzka).", type: "change" },
        { time: "Dnes 10:05", text: "SchvĂˇlen hrĂˇÄŤ (ukĂˇzka).", type: "approve" },
        { time: "VÄŤera 19:22", text: "VytvoĹ™ena sezĂłna (ukĂˇzka).", type: "create" },
    ];

    const ActionCard = ({ title, desc, to, icon }) => (
        <div className="col-12 col-md-6 col-xl-3">
            <div className="card h-100 shadow-sm">
                <div className="card-body d-flex flex-column">
                    <div className="d-flex align-items-center gap-2 mb-2">
                        <span className="fs-4">{icon}</span>
                        <h5 className="card-title mb-0">{title}</h5>
                    </div>
                    <p className="text-muted small mb-3">{desc}</p>
                    <div className="mt-auto">
                        <Link to={to} className="btn btn-outline-primary w-100">
                            OtevĹ™Ă­t
                        </Link>
                    </div>
                </div>
            </div>
        </div>
    );

    const Badge = ({ text }) => (
        <span className="badge text-bg-secondary">{text}</span>
    );

    const ActivityIcon = ({ type }) => {
        const map = { change: "âśŹď¸Ź", approve: "âś…", create: "âž•" };
        return <span className="me-2">{map[type] || "đź“ť"}</span>;
    };

    const handleCloseManagerInfo = () => {
        setShowManagerInfo(false);
        navigate("/app/admin/players");
    };

    return (
        <div className="container py-4">
            {/* Header */}
            <div className="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2 mb-4">
                <div>
                    <h1 className="h3 mb-1">SprĂˇva</h1>
                    <p className="text-muted mb-0">
                        PĹ™ehled systĂ©mu a rychlĂ© akce pro sprĂˇvu.
                    </p>
                </div>

                <div className="d-flex gap-2">
                    <button
                        className="btn btn-outline-secondary"
                        type="button"
                        onClick={reloadAll}
                        disabled={
                            playersLoading || matchesLoading || seasonsLoading || usersLoading
                        }
                        title="ObnovĂ­ pĹ™ehledovĂ© Ăşdaje z databĂˇze"
                    >
                        Obnovit
                    </button>                    
                </div>
            </div>

            {/* Manager info + redirect on close */}
            {showManagerInfo && (
                <div className="alert alert-info d-flex justify-content-between align-items-start" role="alert">
                    <div className="me-3">
                        <div className="fw-semibold mb-1">ReĹľim sprĂˇvce (MANAGER)</div>
                        <div className="small">
                            Tato strĂˇnka je sdĂ­lenĂˇ pro Admin i Manager. Po zavĹ™enĂ­ tĂ©to zprĂˇvy
                            bude otevĹ™ena SprĂˇva hrĂˇÄŤĹŻ.
                        </div>
                    </div>

                    <button
                        type="button"
                        className="btn-close"
                        aria-label="ZavĹ™Ă­t"
                        onClick={handleCloseManagerInfo}
                    />
                </div>
            )}

            {/* Error */}
            {combinedError && (
                <div className="alert alert-danger" role="alert">
                    {combinedError}
                </div>
            )}

            {/* Quick actions */}
            <div className="row g-3 mb-4">
                <ActionCard
                    icon="đź“…"
                    title="SezĂłny"
                    desc="SprĂˇva sezĂłn, aktivnĂ­ sezĂłna a zĂˇkladnĂ­ nastavenĂ­."
                    to="/app/admin/seasons"
                />
                <ActionCard
                    icon="đźŹ’"
                    title="ZĂˇpasy"
                    desc="VytvĂˇĹ™enĂ­ zĂˇpasĹŻ, Ăşpravy ÄŤasu a mĂ­sta, publikace."
                    to="/app/admin/matches"
                />
                <ActionCard
                    icon="đź‘¤"
                    title="UĹľivatelĂ©"
                    desc="Role, aktivace ĂşÄŤtĹŻ, reset hesel a oprĂˇvnÄ›nĂ­."
                    to="/app/admin/users"
                />
                <ActionCard
                    icon="đź§‘â€Ťđź¤ťâ€Ťđź§‘"
                    title="HrĂˇÄŤi"
                    desc="SchvalovĂˇnĂ­ hrĂˇÄŤĹŻ, sprĂˇva statusĹŻ a profilĹŻ."
                    to="/app/admin/players"
                />
            </div>

            {/* Stats */}
            <div className="row g-3 mb-4">
                {stats.map((s) => (
                    <div className="col-12 col-md-6 col-xl-3" key={s.label}>
                        <div className="card h-100 shadow-sm">
                            <div className="card-body">
                                <div className="d-flex justify-content-between align-items-start">
                                    <div>
                                        <div className="text-muted small">{s.label}</div>
                                        <div className="display-6 mb-0">{s.value}</div>
                                    </div>
                                    <span className="badge text-bg-light border">
                                        PĹ™ehled
                                    </span>
                                </div>
                                <div className="text-muted small mt-2">{s.helper}</div>
                            </div>
                        </div>
                    </div>
                ))}
            </div>

            {/* Main content */}
            <div className="row g-3">
                {/* Upcoming matches */}
                <div className="col-12 col-xl-7">
                    <div className="card shadow-sm h-100">
                        <div className="card-header bg-white">
                            <div className="d-flex justify-content-between align-items-center">
                                <div className="fw-semibold">NadchĂˇzejĂ­cĂ­ zĂˇpasy</div>
                                <Link
                                    to="/app/admin/matches"
                                    className="btn btn-sm btn-outline-primary"
                                >
                                    SprĂˇva zĂˇpasĹŻ
                                </Link>
                            </div>
                        </div>

                        <div className="table-responsive">
                            <table className="table table-hover mb-0 align-middle">
                                <thead className="table-light">
                                    <tr>
                                        <th>Datum</th>
                                        <th>SoupeĹ™</th>
                                        <th>MĂ­sto</th>
                                        <th>Status</th>
                                        <th className="text-end">Akce</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {matchesLoading ? (
                                        <tr>
                                            <td colSpan={5} className="text-muted py-4">
                                                NaÄŤĂ­tĂˇm zĂˇpasyâ€¦
                                            </td>
                                        </tr>
                                    ) : upcomingMatches.length === 0 ? (
                                        <tr>
                                            <td colSpan={5} className="text-muted py-4">
                                                Ĺ˝ĂˇdnĂ© nadchĂˇzejĂ­cĂ­ zĂˇpasy.
                                            </td>
                                        </tr>
                                    ) : (
                                        upcomingMatches.map((m) => {
                                            const dateObj = m._dateObj;
                                            const opponent =
                                                m?.opponentName ||
                                                m?.opponent ||
                                                m?.rival ||
                                                m?.title ||
                                                "â€”";
                                            const place =
                                                m?.place ||
                                                m?.location ||
                                                m?.stadium ||
                                                "â€”";
                                            const status =
                                                m?.status ||
                                                m?.matchStatus ||
                                                "PlĂˇnovĂˇno";
                                            const id = m?.id;

                                            return (
                                                <tr key={id ?? `${opponent}-${dateObj?.toISOString()}`}>
                                                    <td className="text-nowrap">
                                                        {formatDateTime(dateObj)}
                                                    </td>
                                                    <td>{opponent}</td>
                                                    <td className="text-nowrap">{place}</td>
                                                    <td>
                                                        <Badge text={status} />
                                                    </td>
                                                    <td className="text-end">
                                                        {id ? (
                                                            <button
                                                                type="button"
                                                                className="btn btn-sm btn-outline-primary"
                                                                disabled
                                                                title="ZatĂ­m nenĂ­ implementovĂˇno"
                                                            >
                                                                Detail
                                                            </button>
                                                        ) : (
                                                            <span className="text-muted small">â€”</span>
                                                        )}
                                                    </td>
                                                </tr>
                                            );
                                        })
                                    )}
                                </tbody>
                            </table>
                        </div>

                        <div className="card-body border-top">
                            <div className="text-muted small">
                                Zobrazuje se prvnĂ­ch 5 budoucĂ­ch zĂˇpasĹŻ dle data.
                            </div>
                        </div>
                    </div>
                </div>

                {/* Activity + System info */}
                <div className="col-12 col-xl-5">
                    <div className="row g-3">
                        <div className="col-12">
                            <div className="card shadow-sm">
                                <div className="card-header bg-white fw-semibold">
                                    PoslednĂ­ aktivity - zatĂ­m neimplementovĂˇno
                                </div>
                                <div className="card-body">
                                    <ul className="list-group list-group-flush">
                                        {lastActivities.map((a, idx) => (
                                            <li key={idx} className="list-group-item px-0">
                                                <div className="d-flex justify-content-between">
                                                    <div>
                                                        <ActivityIcon type={a.type} />
                                                        <span>{a.text}</span>
                                                    </div>
                                                    <div className="text-muted small text-nowrap ms-3">
                                                        {a.time}
                                                    </div>
                                                </div>
                                            </li>
                                        ))}
                                    </ul>

                                    <div className="mt-3">
                                        <button
                                            type="button"
                                            className="btn btn-sm btn-outline-primary"
                                            disabled
                                            title="Audit log zatĂ­m nenĂ­ implementovĂˇn"
                                        >
                                            Zobrazit audit log
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="col-12">
                            <div className="card shadow-sm">
                                <div className="card-header bg-white fw-semibold">SystĂ©m</div>
                                <div className="card-body">
                                    <div className="d-flex justify-content-between mb-2">
                                        <span className="text-muted">ProstĹ™edĂ­</span>
                                        <span className="fw-semibold">
                                            Produkce / Demo dle nastavenĂ­ 
                                        </span>
                                    </div>
                                    <div className="d-flex justify-content-between mb-2">
                                        <span className="text-muted">Notifikace</span>
                                        <span className="fw-semibold">
                                            Email / SMS dle konfigurace
                                        </span>
                                    </div>
                                    <div className="d-flex justify-content-between">
                                        <span className="text-muted">Migrace DB</span>
                                        <span className="fw-semibold">Flyway aktivnĂ­</span>
                                    </div>

                                    <hr />

                                    <div className="alert alert-light border mb-0">
                                        <div className="fw-semibold mb-1">Bude se doplĹovat</div>
                                        <ul className="mb-0 small text-muted">
                                            <li>graf registracĂ­ na zĂˇpasy (7/30 dnĂ­)</li>
                                            
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div className="text-muted small mt-4">
                PoÄŤty i nadchĂˇzejĂ­cĂ­ zĂˇpasy jsou naÄŤteny z databĂˇze pĹ™es admin hooky.
            </div>
        </div>
    );
};

export default AdminHomePage;


==================================================
src\pages\AdminMatchesPage.jsx
==================================================

// src/pages/AdminMatchesPage.jsx

import { useCallback, useState, useEffect } from "react";
import {
    createMatchAdmin,
    updateMatchAdmin,
    deleteMatchAdmin,
    cancelMatchAdmin,
    unCancelMatchAdmin,
    getMatchHistoryAdmin,
} from "../api/matchApi";
import { useAllMatchesAdmin } from "../hooks/useAllMatchesAdmin";
import { useSeason } from "../hooks/useSeason";
import SeasonSelect from "../components/seasons/seasonSelect";
import AdminMatchesTable from "../components/admin/AdminMatchesTable";
import AdminMatchModal from "../components/admin/AdminMatchModal";
import { useNotification } from "../context/NotificationContext";
import CancelMatchModal from "../components/admin/CancelMatchModal";
import BackButton from  "../components/BackButton";

//  DEMO notifications
import { useAppMode } from "../context/AppModeContext";
import {
    tryGetDemoNotifications,
    tryClearDemoNotifications,
} from "../api/demoApi";
import DemoNotificationsModal from "../components/demo/DemoNotificationsModal";

const hasAnyDemoItems = (demo) => {
    if (!demo) return false;
    return (demo.emails?.length ?? 0) > 0 || (demo.sms?.length ?? 0) > 0;
};

const AdminMatchesPage = () => {
    const { currentSeasonId } = useSeason();
    const { matches, loading, error, reload } = useAllMatchesAdmin(currentSeasonId);
    const { showNotification } = useNotification();

    //  DEMO mode
    const { demoMode } = useAppMode();
    const [showDemoModal, setShowDemoModal] = useState(false);
    const [demoNotifications, setDemoNotifications] = useState(null);
    const [demoLoading, setDemoLoading] = useState(false);
    const [demoError, setDemoError] = useState(null);

    const [editingMatch, setEditingMatch] = useState(null);
    const [saving, setSaving] = useState(false);
    const [serverError, setServerError] = useState(null);
    const [cancelMatch, setCancelMatch] = useState(null);
    const [cancelSaving, setCancelSaving] = useState(false);
    const [cancelError, setCancelError] = useState(null);

    const handleCloseDemoModal = () => {
        setShowDemoModal(false);
        setDemoNotifications(null);
        setDemoError(null);
    };

    const openDemoModalIfAny = useCallback(async () => {
        if (!demoMode) return;

        setDemoLoading(true);
        setDemoError(null);

        try {
            const demo = await tryGetDemoNotifications(); // GET uĹľ dÄ›lĂˇ getAndClear()
            if (hasAnyDemoItems(demo)) {
                setDemoNotifications(demo);
                setShowDemoModal(true);
            }
        } catch (e) {
            setDemoError("NepodaĹ™ilo se naÄŤĂ­st demo notifikace.");
        } finally {
            setDemoLoading(false);
        }
    }, [demoMode]);

    const clearDemoBeforeOperation = useCallback(async () => {
        if (!demoMode) return;
        await tryClearDemoNotifications(); // v produkci endpoint nenĂ­, v demo existuje
    }, [demoMode]);

    const handleCreate = () => {
        setServerError(null);
        setEditingMatch({
            id: null,
            dateTime: "",
            location: "",
            description: "",
            maxPlayers: "",
            price: "",
            matchStatus: null,
            cancelReason: null,
            matchNumber: null,
            seasonId: null,
        });
    };

    useEffect(() => {
        if (currentSeasonId == null) return;
        reload();
    }, [currentSeasonId, reload]);

    const handleEdit = useCallback((match) => {
        setServerError(null);
        setEditingMatch(match);
    }, []);

    const handleDelete = useCallback(
        async (matchId) => {
            const confirmDelete = window.confirm(
                `Opravdu chceĹˇ smazat zĂˇpas s ID ${matchId}?`
            );
            if (!confirmDelete) return;

            try {
                await clearDemoBeforeOperation();

                await deleteMatchAdmin(matchId);
                showNotification("ZĂˇpas byl smazĂˇn.", "success");

                await openDemoModalIfAny();
                await reload();
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "SmazĂˇnĂ­ zĂˇpasu se nezdaĹ™ilo.";
                showNotification(message, "danger");
            }
        },
        [reload, showNotification, clearDemoBeforeOperation, openDemoModalIfAny]
    );

    const handleCloseModal = () => {
        if (!saving) {
            setEditingMatch(null);
            setServerError(null);
        }
    };

    const handleCloseCancelModal = () => {
        if (!cancelSaving) {
            setCancelMatch(null);
            setCancelError(null);
        }
    };

    const handleSaveMatch = async (payload) => {
        try {
            setSaving(true);
            setServerError(null);

            await clearDemoBeforeOperation();

            if (payload.id) {
                await updateMatchAdmin(payload.id, payload);
                showNotification("ZĂˇpas byl ĂşspÄ›ĹˇnÄ› upraven.", "success");
            } else {
                await createMatchAdmin(payload);
                showNotification("ZĂˇpas byl ĂşspÄ›ĹˇnÄ› vytvoĹ™en.", "success");
            }

            setEditingMatch(null);
            setServerError(null);

            await openDemoModalIfAny();
            await reload();
        } catch (err) {
            const status = err?.response?.status;
            const message =
                err?.response?.data?.message ||
                err?.message ||
                "UloĹľenĂ­ zĂˇpasu se nezdaĹ™ilo.";

            if (status === 400 || status === 409) {
                setServerError(message);
            } else {
                showNotification(message, "danger");
            }
        } finally {
            setSaving(false);
        }
    };

    const handleCancel = useCallback((match) => {
        setCancelError(null);
        setCancelMatch(match);
    }, []);

    const handleConfirmCancel = async (matchId, reason) => {
        try {
            setCancelSaving(true);
            setCancelError(null);

            await clearDemoBeforeOperation();

            await cancelMatchAdmin(matchId, reason);

            showNotification("ZĂˇpas byl zruĹˇen.", "success");
            setCancelMatch(null);

            await openDemoModalIfAny();
            await reload();
        } catch (err) {
            const message =
                err?.response?.data?.message ||
                err?.message ||
                "ZruĹˇenĂ­ zĂˇpasu se nezdaĹ™ilo.";

            setCancelError(message);
        } finally {
            setCancelSaving(false);
        }
    };

    const handleUnCancel = useCallback(
        async (matchId) => {
            try {
                await clearDemoBeforeOperation();

                await unCancelMatchAdmin(matchId);
                showNotification("ZĂˇpas byl obnoven.", "success");

                await openDemoModalIfAny();
                await reload();
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "ObnovenĂ­ zĂˇpasu se nezdaĹ™ilo.";
                showNotification(message, "danger");
            }
        },
        [reload, showNotification, clearDemoBeforeOperation, openDemoModalIfAny]
    );

    const handleShowHistory = useCallback(
        async (matchId) => {
            try {
                const history = await getMatchHistoryAdmin(matchId);
                console.log("Match history", matchId, history);
                showNotification(
                    "Historie zĂˇpasu byla naÄŤtena (viz konzole).",
                    "info"
                );
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "Historii zĂˇpasu se nepodaĹ™ilo naÄŤĂ­st.";
                showNotification(message, "danger");
            }
        },
        [showNotification]
    );

    return (
        <>
                <BackButton />
        <div className="container mt-4">
            <SeasonSelect />

            <div className="d-flex justify-content-between align-items-center mb-3">
                <h1 className="h3 mb-0">SprĂˇva zĂˇpasĹŻ</h1>

                <button
                    type="button"
                    className="btn btn-primary"
                    onClick={handleCreate}
                >
                    VytvoĹ™it novĂ˝ zĂˇpas
                </button>
            </div>

            <p className="text-muted mb-3">
                Zde mĹŻĹľe administrĂˇtor a manaĹľer spravovat zĂˇpasy v systĂ©mu â€“
                vytvĂˇĹ™et je, upravovat, ruĹˇit, obnovovat a mazat. ZĂˇpasy se
                vĹľdy vztahujĂ­ k aktuĂˇlnÄ› zvolenĂ© / aktivnĂ­ sezĂłnÄ›.
            </p>

            <AdminMatchesTable
                matches={matches}
                loading={loading}
                error={error}
                onEdit={handleEdit}
                onDelete={handleDelete}
                onCancel={handleCancel}
                onUnCancel={handleUnCancel}
                onShowHistory={handleShowHistory}
            />

            <AdminMatchModal
                match={editingMatch}
                show={!!editingMatch}
                onClose={handleCloseModal}
                onSave={handleSaveMatch}
                saving={saving}
                serverError={serverError}
            />

            <CancelMatchModal
                match={cancelMatch}
                show={!!cancelMatch}
                onClose={handleCloseCancelModal}
                onConfirm={handleConfirmCancel}
                saving={cancelSaving}
                serverError={cancelError}
            />

            {/*DEMO NOTIF â€“ modal s demo notifikacemi jen v demo reĹľimu */}
            {demoMode && (
                <DemoNotificationsModal
                    show={showDemoModal}
                    onClose={handleCloseDemoModal}
                    notifications={demoNotifications}
                    loading={demoLoading}
                    error={demoError}
                />
            )}
        </div>
        </>
    );
};

export default AdminMatchesPage;


==================================================
src\pages\AdminPlayersInactivityPage.jsx
==================================================

// src/pages/AdminPlayersInactivityPage.jsx
import { useMemo, useState } from "react";
import { usePlayerInactivityPeriodsAdmin } from "../hooks/usePlayerInactivityPeriodsAdmin";
import { useAllPlayersAdmin } from "../hooks/useAllPlayersAdmin";
import AdminPlayerInactivityModal from "../components/admin/AdminPlayerInactivityModal";

const normalizeDate = (value) => {
    if (!value) return null;

    const raw =
        typeof value === "string"
            ? value.includes("T")
                ? value
                : value.replace(" ", "T")
            : value;

    const d = new Date(raw);
    return Number.isNaN(d.getTime()) ? null : d;
};

const formatDateTime = (value) => {
    const d = normalizeDate(value);
    if (!d) return "-";
    return d.toLocaleString("cs-CZ");
};

const FILTERS = {
    ALL: "ALL",
    CURRENT: "CURRENT",
    NON_CURRENT: "NON_CURRENT",
};

const AdminPlayersInactivityPage = () => {
    const {
        periods,
        loading: inactivityLoading,
        error: inactivityError,
        reload: reloadInactivity,
    } = usePlayerInactivityPeriodsAdmin();

    const {
        players,
        loading: playersLoading,
        error: playersError,
        reload: reloadPlayers,
    } = useAllPlayersAdmin();

    // stav pro modal s neaktivitou hrĂˇÄŤe
    const [selectedPlayer, setSelectedPlayer] = useState(null);
    const [showInactivityModal, setShowInactivityModal] = useState(false);

    const [filter, setFilter] = useState(FILTERS.ALL);

    const openInactivityModal = (player) => {
        if (!player) return;
        setSelectedPlayer(player);
        setShowInactivityModal(true);
    };

    const closeInactivityModal = () => {
        setShowInactivityModal(false);
        setSelectedPlayer(null);
    };

    const handleReloadAll = () => {
        reloadInactivity();
        reloadPlayers();
    };

    // Mapa playerId -> player
    const playerMap = useMemo(() => {
        const map = new Map();
        if (players && players.length > 0) {
            players.forEach((p) => {
                if (p.id != null) {
                    map.set(p.id, p);
                }
            });
        }
        return map;
    }, [players]);

    // SeĹ™adĂ­me obdobĂ­ podle pĹ™Ă­jmenĂ­ hrĂˇÄŤe, pak podle zaÄŤĂˇtku neaktivity
    // a zĂˇroveĹ kaĹľdĂ©mu obdobĂ­ spoÄŤĂ­tĂˇme, jestli je aktuĂˇlnĂ­ (isCurrent)
    const sortedPeriods = useMemo(() => {
        if (!periods || periods.length === 0) return [];

        const now = new Date();

        const withCurrentFlag = periods.map((p) => {
            const from = normalizeDate(p.inactiveFrom);
            const to = normalizeDate(p.inactiveTo);

            const isCurrent =
                from && to ? from <= now && to >= now : false;

            return {
                ...p,
                isCurrent,
            };
        });

        return withCurrentFlag.slice().sort((a, b) => {
            const playerA = playerMap.get(a.playerId);
            const playerB = playerMap.get(b.playerId);

            const surnameA = (playerA?.surname || "").toLocaleLowerCase("cs");
            const surnameB = (playerB?.surname || "").toLocaleLowerCase("cs");

            // 1) pĹ™Ă­jmenĂ­ (neznĂˇmĂ­ hrĂˇÄŤi aĹľ na konec)
            if (!surnameA && surnameB) return 1;
            if (surnameA && !surnameB) return -1;

            const cmpSurname = surnameA.localeCompare(surnameB, "cs", {
                sensitivity: "base",
            });
            if (cmpSurname !== 0) return cmpSurname;

            // 2) zaÄŤĂˇtek neaktivity
            const fromA = normalizeDate(a.inactiveFrom) || new Date(0);
            const fromB = normalizeDate(b.inactiveFrom) || new Date(0);

            return fromA - fromB;
        });
    }, [periods, playerMap]);

    // poÄŤty pro badge
    const counts = useMemo(() => {
        const all = sortedPeriods.length;
        const current = sortedPeriods.filter((p) => p.isCurrent).length;
        const nonCurrent = all - current;

        return {
            all,
            current,
            nonCurrent,
        };
    }, [sortedPeriods]);

    // filtrovĂˇnĂ­ podle aktuĂˇlnĂ­ho filtru
    const filteredPeriods = useMemo(() => {
        switch (filter) {
            case FILTERS.CURRENT:
                return sortedPeriods.filter((p) => p.isCurrent);
            case FILTERS.NON_CURRENT:
                return sortedPeriods.filter((p) => !p.isCurrent);
            case FILTERS.ALL:
            default:
                return sortedPeriods;
        }
    }, [sortedPeriods, filter]);

    const loading = inactivityLoading || playersLoading;
    const error = inactivityError || playersError;

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm informace o neaktivitÄ› hrĂˇÄŤĹŻâ€¦</p>;
    }

    if (error) {
        return (
            <div className="alert alert-danger">
                {error}
                <div className="mt-2">
                    <button
                        type="button"
                        className="btn btn-sm btn-outline-light"
                        onClick={handleReloadAll}
                    >
                        Zkusit znovu naÄŤĂ­st
                    </button>
                </div>
            </div>
        );
    }

    return (
        <div className="container py-3">
            <div className="d-flex justify-content-between align-items-center mb-3">
                <h1 className="h3 mb-0">Neaktivity hrĂˇÄŤĹŻ</h1>
                <button
                    type="button"
                    className="btn btn-outline-secondary btn-sm"
                    onClick={handleReloadAll}
                >
                    Znovu naÄŤĂ­st
                </button>
            </div>

            <p className="text-muted mb-3">
                CelkovĂ˝ poÄŤet obdobĂ­ neaktivity:{" "}
                <strong>{sortedPeriods.length}</strong>
            </p>

            {/* FiltrovacĂ­ tlaÄŤĂ­tka */}
            <div className="d-flex justify-content-center mb-4">
                <div
                    className="btn-group"
                    role="group"
                    aria-label="Filtr obdobĂ­ neaktivity"
                >
                    <button
                        type="button"
                        className={
                            filter === FILTERS.ALL
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.ALL)}
                    >
                        VĹˇechna{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.all}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.CURRENT
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.CURRENT)}
                    >
                        AktuĂˇlnÄ› neaktivnĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.current}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.NON_CURRENT
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.NON_CURRENT)}
                    >
                        NeaktuĂˇlnĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.nonCurrent}
                        </span>
                    </button>
                </div>
            </div>

            {filteredPeriods.length === 0 && (
                <p>Pro zvolenĂ˝ filtr nejsou ĹľĂˇdnĂˇ obdobĂ­ neaktivity.</p>
            )}

            <div className="d-flex flex-column gap-3">
                {filteredPeriods.map((p) => {
                    const player = playerMap.get(p.playerId);
                    const playerId = p.playerId ?? player?.id ?? "?";
                    const playerName = player?.name || "";
                    const playerSurname = player?.surname || "";

                    return (
                        <div key={p.id} className="card shadow-sm">
                            <div className="card-body">
                                <div className="row align-items-center">
                                    <div className="col-md-3">
                                        <small className="text-muted d-block">
                                            HrĂˇÄŤ
                                        </small>
                                        {player ? (
                                            <strong>
                                                {playerSurname.toUpperCase()}{" "}
                                                {playerName}
                                            </strong>
                                        ) : (
                                            <strong>
                                                NeznĂˇmĂ˝ hrĂˇÄŤ (ID {playerId})
                                            </strong>
                                        )}
                                        <div className="text-muted small">
                                            ID hrĂˇÄŤe: {playerId}
                                        </div>
                                        {p.isCurrent && (
                                            <span className="badge bg-dark mt-1">
                                                AktuĂˇlnÄ› neaktivnĂ­
                                            </span>
                                        )}
                                    </div>

                                    <div className="col-md-2">
                                        <small className="text-muted d-block">
                                            NeaktivnĂ­ od
                                        </small>
                                        {formatDateTime(p.inactiveFrom)}
                                    </div>

                                    <div className="col-md-2">
                                        <small className="text-muted d-block">
                                            NeaktivnĂ­ do
                                        </small>
                                        {formatDateTime(p.inactiveTo)}
                                    </div>
                                    <div className="col-md-4">
                                        <small className="text-muted d-block">
                                            DĹŻvod neaktivity: 
                                            </small>
                                            {p.inactivityReason}
                                        </div>

                                    <div className="col-md-1 text-md-end mt-3 mt-md-0 d-flex flex-column align-items-md-end align-items-start gap-1">
                                        <div>
                                            <small className="text-muted d-block">
                                                ID obdobĂ­
                                            </small>
                                            {p.id}
                                        </div>
                                        
                                        <button
                                            type="button"
                                            className="btn btn-sm btn-outline-primary"
                                            onClick={() =>
                                                openInactivityModal(player)
                                            }
                                            disabled={!player}
                                        >
                                            Spravovat neaktivitu
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                })}
            </div>

            {/* Modal pro Ăşpravu neaktivity konkrĂ©tnĂ­ho hrĂˇÄŤe */}
            {showInactivityModal && selectedPlayer && (
                <AdminPlayerInactivityModal
                    player={selectedPlayer}
                    onClose={closeInactivityModal}
                    onSaved={() => {
                        // po uloĹľenĂ­:
                        // 1) zavĹ™Ă­t modal
                        // 2) znovu naÄŤĂ­st vĹˇechny neaktivity + hrĂˇÄŤe
                        closeInactivityModal();
                        handleReloadAll();
                    }}
                />
            )}
        </div>
    );
};

export default AdminPlayersInactivityPage;


==================================================
src\pages\AdminPlayersPage.jsx
==================================================

// src/pages/AdminPlayersPage.jsx

import { useCallback, useMemo, useState } from "react";
import {
    approvePlayerAdmin,
    rejectPlayerAdmin,
    deletePlayerAdmin,
    updatePlayerAdmin, // ujisti se, Ĺľe existuje v playerApi
} from "../api/playerApi";
import { useAllPlayersAdminWithUsers } from "../hooks/useAllPlayersAdminWithUsers";
import AdminPlayersTable from "../components/admin/AdminPlayersTable";
import { useNotification } from "../context/NotificationContext";
import AdminPlayerEditModal from "../components/admin/AdminPlayerEditModal";
import BackButton from "../components/BackButton";
import SeasonSelect from "../components/seasons/seasonSelect";

/**
 * StrĂˇnka pro globĂˇlnĂ­ sprĂˇvu hrĂˇÄŤĹŻ (ADMIN / MANAGER).
 *
 * - naÄŤĂ­tĂˇ vĹˇechny hrĂˇÄŤe (vÄŤetnÄ› uĹľivatele) pĹ™es useAllPlayersAdminWithUsers
 * - zobrazuje je v gridu karet
 * - Ĺ™eĹˇĂ­ akce APPROVE / REJECT / DELETE / EDIT / CHANGE USER
 */
const AdminPlayersPage = () => {
    const { players, loading, error, reload } =
        useAllPlayersAdminWithUsers();
    const { showNotification } = useNotification();

    // === STAV PRO EDITACĂŤ MODAL ===
    const [editingPlayer, setEditingPlayer] = useState(null);
    const [editSaving, setEditSaving] = useState(false);

    const handleApprove = useCallback(
        async (playerId) => {
            try {
                await approvePlayerAdmin(playerId);
                showNotification("HrĂˇÄŤ byl schvĂˇlen.", "success");
                await reload();
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "SchvĂˇlenĂ­ hrĂˇÄŤe se nezdaĹ™ilo.";
                showNotification(message, "danger");
            }
        },
        [reload, showNotification]
    );

    const handleReject = useCallback(
        async (playerId) => {
            try {
                await rejectPlayerAdmin(playerId);
                showNotification("HrĂˇÄŤ byl zamĂ­tnut.", "success");
                await reload();
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "ZamĂ­tnutĂ­ hrĂˇÄŤe se nezdaĹ™ilo.";
                showNotification(message, "danger");
            }
        },
        [reload, showNotification]
    );

    const handleDelete = useCallback(
        async (playerId) => {
            const confirmDelete = window.confirm(
                `Opravdu chceĹˇ smazat hrĂˇÄŤe s ID ${playerId}?`
            );
            if (!confirmDelete) return;

            try {
                await deletePlayerAdmin(playerId);
                showNotification("HrĂˇÄŤ byl smazĂˇn.", "success");
                await reload();
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "SmazĂˇnĂ­ hrĂˇÄŤe se nezdaĹ™ilo.";
                showNotification(message, "danger");
            }
        },
        [reload, showNotification]
    );

    // OtevĹ™enĂ­ modalu pro editaci
    const handleEdit = useCallback(
        (player) => {
            setEditingPlayer(player);
        },
        []
    );

    // ZatĂ­m jen info â€“ implementace pĹ™es modal
    const handleChangeUser = useCallback(
        (player) => {
            console.log("Change user for player (TODO):", player);
            showNotification(
                "ZmÄ›na uĹľivatele zatĂ­m nenĂ­ implementovĂˇna.",
                "info"
            );
        },
        [showNotification]
    );

    // ZavĹ™enĂ­ modalu
    const handleCloseEdit = () => {
        if (!editSaving) {
            setEditingPlayer(null);
        }
    };

    // UloĹľenĂ­ zmÄ›n hrĂˇÄŤe z modalu
    const handleSaveEdit = async (payload) => {
        try {
            setEditSaving(true);

            // tady pĹ™edpoklĂˇdĂˇm API ve tvaru updatePlayerAdmin(id, dto)
            // pokud to mĂˇĹˇ jinak (tĹ™eba jen dto), uprav si tento Ĺ™Ăˇdek
            await updatePlayerAdmin(payload.id, payload);

            showNotification("HrĂˇÄŤ byl ĂşspÄ›ĹˇnÄ› upraven.", "success");
            setEditingPlayer(null);
            await reload();
        } catch (err) {
            const message =
                err?.response?.data?.message ||
                err?.message ||
                "Ăšprava hrĂˇÄŤe se nezdaĹ™ila.";
            showNotification(message, "danger");
        } finally {
            setEditSaving(false);
        }
    };

    // SeĹ™adit hrĂˇÄŤe podle pĹ™Ă­jmenĂ­ (vzestupnÄ›)
    const sortedPlayers = useMemo(() => {
        if (!players) return [];
        return [...players].sort((a, b) => {
            const aSurname = (a.surname || "").toLocaleLowerCase("cs");
            const bSurname = (b.surname || "").toLocaleLowerCase("cs");
            if (aSurname < bSurname) return -1;
            if (aSurname > bSurname) return 1;
            return 0;
        });
    }, [players]);

    return ( 
        <>
            <BackButton />         
            <div className="container mt-4">
                <div className="d-flex justify-content-between align-items-center mb-3">
                    <h1 className="h3 mb-0">SprĂˇva hrĂˇÄŤĹŻ</h1>
                </div>

                <p className="text-muted mb-3">
                    Zde mĹŻĹľe administrĂˇtor (a ÄŤĂˇsteÄŤnÄ› manaĹľer) spravovat vĹˇechny
                    hrĂˇÄŤe v systĂ©mu. Akce schvĂˇlit / zamĂ­tnout / upravit / smazat /
                    zmÄ›nit uĹľivatele jsou dostupnĂ© pouze uĹľivatelĹŻm s rolĂ­ ADMIN.
                </p>

                <AdminPlayersTable
                    players={sortedPlayers}
                    loading={loading}
                    error={error}
                    onApprove={handleApprove}
                    onReject={handleReject}
                    onEdit={handleEdit}
                    onDelete={handleDelete}
                    onChangeUser={handleChangeUser}
                />

                {/* Modal pro Ăşpravu hrĂˇÄŤe */}
                <AdminPlayerEditModal
                    player={editingPlayer}
                    show={!!editingPlayer}
                    onClose={handleCloseEdit}
                    onSave={handleSaveEdit}
                    saving={editSaving}
                />
            </div>
        </>
    );
};

export default AdminPlayersPage;


==================================================
src\pages\AdminSeasonsPage.jsx
==================================================

// src/pages/AdminSeasonsPage.jsx

import { useCallback, useState } from "react";
import {
    createSeasonAdmin,
    updateSeasonAdmin,
    setActiveSeasonAdmin,
} from "../api/seasonApi";
import { useAllSeasonsAdmin } from "../hooks/useAllSeasonsAdmin";
import AdminSeasonsTable from "../components/admin/AdminSeasonsTable";
import AdminSeasonModal from "../components/admin/AdminSeasonModal";
import { useNotification } from "../context/NotificationContext";
import BackButton from "../components/BackButton";

const AdminSeasonsPage = () => {
    const { seasons, loading, error, reload } = useAllSeasonsAdmin();
    const { showNotification } = useNotification();

    const [editingSeason, setEditingSeason] = useState(null);
    const [saving, setSaving] = useState(false);
    const [serverError, setServerError] = useState(null);

    const handleCreate = () => {
        setServerError(null);
        setEditingSeason({
            id: null,
            name: "",
            startDate: "",
            endDate: "",
            active: false, // novĂˇ sezĂłna je defaultnÄ› neaktivnĂ­
        });
    };

    const handleEdit = useCallback((season) => {
        setServerError(null);
        setEditingSeason(season);
    }, []);

    // NOVĂ‰: nastavenĂ­ aktivnĂ­ sezĂłny
    const handleSetActiveSeason = useCallback(
        async (seasonId) => {
            try {
                await setActiveSeasonAdmin(seasonId);
                showNotification("SezĂłna byla nastavena jako aktivnĂ­.", "success");
                await reload();
            } catch (err) {
                const message =
                    err?.response?.data?.message ||
                    err?.message ||
                    "NepodaĹ™ilo se nastavit aktivnĂ­ sezĂłnu.";
                showNotification(message, "danger");
            }
        },
        [reload, showNotification]
    );

    const handleCloseModal = () => {
        if (!saving) {
            setEditingSeason(null);
            setServerError(null);
        }
    };

    const handleSaveSeason = async (payload) => {
        try {
            setSaving(true);
            setServerError(null);

            if (payload.id) {
                await updateSeasonAdmin(payload.id, payload);
                showNotification("SezĂłna byla ĂşspÄ›ĹˇnÄ› upravena.", "success");
            } else {
                await createSeasonAdmin(payload);
                showNotification("SezĂłna byla ĂşspÄ›ĹˇnÄ› vytvoĹ™ena.", "success");
            }

            setEditingSeason(null);
            setServerError(null);
            await reload();
        } catch (err) {
            const status = err?.response?.status;
            const message =
                err?.response?.data?.message ||
                err?.message ||
                "UloĹľenĂ­ sezĂłny se nezdaĹ™ilo.";

            if (status === 400 || status === 409) {
                setServerError(message);
            } else {
                showNotification(message, "danger");
            }
        } finally {
            setSaving(false);
        }
    };

    return (

        <>
            <BackButton />
        <div className="container mt-4">
         
            <div className="d-flex justify-content-between align-items-center mb-3">
                <h1 className="h3 mb-0">SprĂˇva sezĂłn</h1>

                <button
                    type="button"
                    className="btn btn-primary"
                    onClick={handleCreate}
                >
                    VytvoĹ™it novou sezĂłnu
                </button>
            </div>

            <p className="text-muted mb-3">
                Zde mĹŻĹľe administrĂˇtor (a manaĹľer) spravovat sezĂłny,
                ke kterĂ˝m se vĂˇĹľou zĂˇpasy a statistiky.
            </p>

            <AdminSeasonsTable
                seasons={seasons}
                loading={loading}
                error={error}
                onEdit={handleEdit}
                onSetActive={handleSetActiveSeason}
            />

            <AdminSeasonModal
                season={editingSeason}
                show={!!editingSeason}
                onClose={handleCloseModal}
                onSave={handleSaveSeason}
                saving={saving}
                allSeasons={seasons}
                serverError={serverError}
            />

      
        </div>
        </>
    );
};

export default AdminSeasonsPage;


==================================================
src\pages\AdminUserDetailPage.jsx
==================================================

// src/pages/admin/AdminUserDetailPage.jsx
import { useEffect, useState } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import { userApi } from '../api/userApi';

function AdminUserDetailPage() {
    const { id } = useParams();
    const navigate = useNavigate();
    const [user, setUser] = useState(null);

    useEffect(() => {
        userApi.getById(Number(id)).then(setUser);
    }, [id]);

    if (!user) return <p className="m-4">NaÄŤĂ­tĂˇmâ€¦</p>;

    return (
        <div className="container mt-4">
            <button className="btn btn-link" onClick={() => navigate(-1)}>
                â† ZpÄ›t
            </button>

            <h2>{user.name} {user.surname}</h2>

            <p><strong>Email:</strong> {user.email}</p>
            <p><strong>Role:</strong> {user.role}</p>
            <p>
                <strong>Stav:</strong>{' '}
                {user.enabled ? 'AktivnĂ­' : 'NeaktivnĂ­'}
            </p>

            <div className="d-flex gap-2 mt-3">
                <button
                    className="btn btn-warning"
                    onClick={() => userApi.resetPassword(user.id)}
                >
                    Reset hesla
                </button>

                {user.enabled ? (
                    <button
                        className="btn btn-outline-danger"
                        onClick={() => userApi.deactivate(user.id)}
                    >
                        Deaktivovat
                    </button>
                ) : (
                    <button
                        className="btn btn-outline-success"
                        onClick={() => userApi.activate(user.id)}
                    >
                        Aktivovat
                    </button>
                )}
            </div>
        </div>
    );
}

export default AdminUserDetailPage;


==================================================
src\pages\AdminUsersPage.jsx
==================================================

// src/pages/AdminUsersPage.jsx
import { useCallback, useMemo, useState } from "react";
import { useAllUsersAdmin } from "../hooks/useAllUsersAdmin";
import AdminUsersTable from "../components/admin/AdminUsersTable";
import AdminUserEditModal from "../components/admin/AdminUserEditModal";
import { useNotification } from "../context/NotificationContext";
import { userApi } from "../api/userApi";
import BackButton from "../components/BackButton";
/**
 * StrĂˇnka pro globĂˇlnĂ­ sprĂˇvu uĹľivatelĹŻ (ADMIN).
 *
 * - naÄŤĂ­tĂˇ vĹˇechny uĹľivatele pĹ™es useAllUsersAdmin
 * - zobrazuje je jako karty (uĹľivatel + jeho hrĂˇÄŤi)
 * - Ĺ™eĹˇĂ­ akce EDIT / RESET PASSWORD / ACTIVATE / DEACTIVATE
 */
const AdminUsersPage = () => {
  const { users, loading, error, reload } = useAllUsersAdmin();
  const { showNotification } = useNotification();

  // === STAV PRO EDITACĂŤ MODAL ===
  const [editingUser, setEditingUser] = useState(null);
  const [editSaving, setEditSaving] = useState(false);

  // Reset hesla
  const handleResetPassword = useCallback(
    async (userId) => {
      const confirmReset = window.confirm(
        `Opravdu chceĹˇ resetovat heslo uĹľivatele s ID ${userId}?`
      );
      if (!confirmReset) return;

      try {
        await userApi.resetPassword(userId);
        showNotification(
          "Heslo bylo resetovĂˇno na 'Player123'.",
          "success"
        );
        await reload();
      } catch (err) {
        const message =
          err?.response?.data?.message ||
          err?.message ||
          "Reset hesla se nezdaĹ™il.";
        showNotification(message, "danger");
      }
    },
    [reload, showNotification]
  );

  // Aktivace uĹľivatele
  const handleActivate = useCallback(
    async (userId) => {
      try {
          await userApi.activateUser(userId);
        showNotification("UĹľivatel byl aktivovĂˇn.", "success");
        await reload();
      } catch (err) {
        const message =
          err?.response?.data?.message ||
          err?.message ||
          "Aktivace uĹľivatele se nezdaĹ™ila.";
        showNotification(message, "danger");
      }
    },
    [reload, showNotification]
  );

  // Deaktivace uĹľivatele
  const handleDeactivate = useCallback(
    async (userId) => {
      try {
        await userApi.deactivateUser(userId);
        showNotification("UĹľivatel byl deaktivovĂˇn.", "success");
        await reload();
      } catch (err) {
        const message =
          err?.response?.data?.message ||
          err?.message ||
          "Deaktivace uĹľivatele se nezdaĹ™ila.";
        showNotification(message, "danger");
      }
    },
    [reload, showNotification]
  );

  // OtevĹ™enĂ­ modalu pro editaci
  const handleEdit = useCallback((user) => {
    setEditingUser(user);
  }, []);

  // ZavĹ™enĂ­ modalu
  const handleCloseEdit = () => {
    if (!editSaving) {
      setEditingUser(null);
    }
  };

  // UloĹľenĂ­ zmÄ›n uĹľivatele z modalu
  const handleSaveEdit = async (payload) => {
    try {
      setEditSaving(true);

      await userApi.updateAdmin(payload.id, payload);

      showNotification("UĹľivatel byl ĂşspÄ›ĹˇnÄ› upraven.", "success");
      setEditingUser(null);
      await reload();
    } catch (err) {
      const message =
        err?.response?.data?.message ||
        err?.message ||
        "Ăšprava uĹľivatele se nezdaĹ™ila.";
      showNotification(message, "danger");
    } finally {
      setEditSaving(false);
    }
  };

  // (volitelnÄ›) seĹ™adit uĹľivatele podle pĹ™Ă­jmenĂ­
  const sortedUsers = useMemo(() => {
    if (!users) return [];
    return [...users].sort((a, b) => {
      const aSurname = (a.surname || "").toLocaleLowerCase("cs");
      const bSurname = (b.surname || "").toLocaleLowerCase("cs");
      if (aSurname < bSurname) return -1;
      if (aSurname > bSurname) return 1;
      return 0;
    });
  }, [users]);

  return (
    <>
            <BackButton />
    <div className="container mt-4">
 
      <div className="d-flex justify-content-between align-items-center mb-3">
        <h1 className="h3 mb-0">SprĂˇva uĹľivatelĹŻ</h1>
      </div>

      <p className="text-muted mb-3">
        Zde mĹŻĹľe administrĂˇtor spravovat vĹˇechny uĹľivatele v systĂ©mu.
        Lze upravovat zĂˇkladnĂ­ Ăşdaje, resetovat heslo a aktivovat /
        deaktivovat uĹľivatelskĂ© ĂşÄŤty. V dolnĂ­ ÄŤĂˇsti kaĹľdĂ© karty je
        pĹ™ehled hrĂˇÄŤĹŻ pĹ™iĹ™azenĂ˝ch k danĂ©mu uĹľivateli.
      </p>

      <AdminUsersTable
        users={sortedUsers}
        loading={loading}
        error={error}
        onEdit={handleEdit}
        onResetPassword={handleResetPassword}
        onActivate={handleActivate}
        onDeactivate={handleDeactivate}
      />

      {/* Modal pro Ăşpravu uĹľivatele */}
      <AdminUserEditModal
        user={editingUser}
        show={!!editingUser}
        onClose={handleCloseEdit}
        onSave={handleSaveEdit}
        saving={editSaving}
      />
    
    </div>
    </>
  );
};

export default AdminUsersPage;


==================================================
src\pages\Contact.jsx
==================================================



==================================================
src\pages\CreatePlayer.jsx
==================================================

import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { createPlayer } from "../api/playerApi";
import CreatePlayerForm from "../components/players/CreatePlayerForm";

const CreatePlayer = () => {
    const navigate = useNavigate();
    const [submitting, setSubmitting] = useState(false);
    const [error, setError] = useState(null);

    const handleCreatePlayer = async (data) => {
        setError(null);
        setSubmitting(true);

        try {
            await createPlayer(data);
            navigate("/app/players");
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                "NepodaĹ™ilo se vytvoĹ™it hrĂˇÄŤe.";
            setError(msg);
        } finally {
            setSubmitting(false);
        }
    };

    return (
        <div className="container mt-4">
            <div className="row justify-content-center">
                <div className="col-md-6">

                    <h2 className="mb-4 text-center">
                        VytvoĹ™it novĂ©ho hrĂˇÄŤe
                    </h2>

                    {error && (
                        <div className="alert alert-danger">
                            {error}
                        </div>
                    )}

                    <CreatePlayerForm
                        onSubmit={handleCreatePlayer}
                        onCancel={() => navigate("/app/players")}
                        submitting={submitting}
                    />

                </div>
            </div>
        </div>
    );
};

export default CreatePlayer;


==================================================
src\pages\ForgottenPasswordRequestPage.jsx
==================================================

// src/pages/ForgottenPasswordRequestPage.jsx
import { useState } from "react";
import { requestForgottenPassword } from "../api/authApi";
import { tryGetDemoNotifications, tryClearDemoNotifications } from "../api/demoApi";
import DemoNotificationsModal from "../components/demo/DemoNotificationsModal";

const hasAnyDemoItems = (demo) => {
    if (!demo) return false;
    return (demo.emails?.length ?? 0) > 0 || (demo.sms?.length ?? 0) > 0;
};

const ForgottenPasswordRequestPage = () => {
    const [email, setEmail] = useState("");
    const [submitting, setSubmitting] = useState(false);
    const [successMessage, setSuccessMessage] = useState("");
    const [errorMessage, setErrorMessage] = useState("");

    // DEMO modal
    const [demoNotifications, setDemoNotifications] = useState(null);
    const [showDemoModal, setShowDemoModal] = useState(false);

    const handleSubmit = async (e) => {
        e.preventDefault();
        setSubmitting(true);
        setSuccessMessage("");
        setErrorMessage("");

        try {
            await tryClearDemoNotifications();
            await requestForgottenPassword(email);

            setSuccessMessage(
                "Pokud existuje ĂşÄŤet s tĂ­mto e-mailem, byl odeslĂˇn odkaz pro reset hesla."
            );

            // DEMO: naÄŤti a zobraz zachycenĂ© notifikace
            const demo = await tryGetDemoNotifications();
            console.log("[ForgottenPasswordRequest] demo:", demo);

            if (hasAnyDemoItems(demo)) {
                setDemoNotifications(demo);
                setShowDemoModal(true);
            }
        } catch (err) {
            console.error(err);
            setErrorMessage(
                "Nastala chyba pĹ™i odesĂ­lĂˇnĂ­ poĹľadavku. Zkuste to prosĂ­m znovu."
            );
        } finally {
            setSubmitting(false);
        }
    };

    const handleCloseDemoModal = () => {
        setShowDemoModal(false);
        setDemoNotifications(null);
    };

    return (
        <div className="container mt-4">
            <h1>ZapomenutĂ© heslo</h1>
            <p className="text-muted">
                Zadejte e-mail, kterĂ˝ pouĹľĂ­vĂˇte k pĹ™ihlĂˇĹˇenĂ­. PoĹˇleme vĂˇm odkaz
                pro nastavenĂ­ novĂ©ho hesla.
            </p>

            {successMessage && (
                <div className="alert alert-success" role="alert">
                    {successMessage}
                </div>
            )}

            {errorMessage && (
                <div className="alert alert-danger" role="alert">
                    {errorMessage}
                </div>
            )}

            <form onSubmit={handleSubmit} className="mt-3" style={{ maxWidth: "400px" }}>
                <div className="mb-3">
                    <label htmlFor="email" className="form-label">
                        E-mail
                    </label>
                    <input
                        type="email"
                        id="email"
                        className="form-control"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        required
                    />
                </div>

                <button type="submit" className="btn btn-primary" disabled={submitting}>
                    {submitting ? "OdesĂ­lĂˇm..." : "Odeslat odkaz pro reset hesla"}
                </button>
            </form>

            {showDemoModal && demoNotifications && (
                <DemoNotificationsModal
                    show={showDemoModal}
                    notifications={demoNotifications}
                    loading={false}
                    error={null}
                    onClose={handleCloseDemoModal}
                />
            )}
        </div>
    );
};

export default ForgottenPasswordRequestPage;


==================================================
src\pages\ForgottenPasswordResetPage.jsx
==================================================

// src/pages/ForgottenPasswordResetPage.jsx

import { useEffect, useState } from "react";
import { useNavigate, useSearchParams } from "react-router-dom";
import {
    getForgottenPasswordInfo,
    resetForgottenPassword,
} from "../api/authApi";
import { tryGetDemoNotifications, tryClearDemoNotifications } from "../api/demoApi";
import DemoNotificationsModal from "../components/demo/DemoNotificationsModal";

const hasAnyDemoItems = (demo) => {
    if (!demo) return false;
    return (demo.emails?.length ?? 0) > 0 || (demo.sms?.length ?? 0) > 0;
};

const ForgottenPasswordResetPage = () => {
    const [searchParams] = useSearchParams();
    const navigate = useNavigate();

    const token = searchParams.get("token");

    const [email, setEmail] = useState("");
    const [loadingInfo, setLoadingInfo] = useState(true);
    const [infoError, setInfoError] = useState("");

    const [newPassword, setNewPassword] = useState("");
    const [confirmPassword, setConfirmPassword] = useState("");
    const [submitting, setSubmitting] = useState(false);
    const [submitError, setSubmitError] = useState("");
    const [submitSuccess, setSubmitSuccess] = useState("");

    // DEMO modal
    const [demoNotifications, setDemoNotifications] = useState(null);
    const [showDemoModal, setShowDemoModal] = useState(false);

    // 1) NaÄŤtenĂ­ info podle tokenu (email)
    useEffect(() => {
        const loadInfo = async () => {
            if (!token) {
                setInfoError("ChybĂ­ token pro reset hesla.");
                setLoadingInfo(false);
                return;
            }

            try {
                const res = await getForgottenPasswordInfo(token);
                setEmail(res.data.email);
            } catch (err) {
                console.error(err);
                setInfoError("NeplatnĂ˝ nebo expirovanĂ˝ odkaz pro reset hesla.");
            } finally {
                setLoadingInfo(false);
            }
        };

        loadInfo();
    }, [token]);

    // 2) OdeslĂˇnĂ­ novĂ©ho hesla
    const handleSubmit = async (e) => {
        e.preventDefault();
        setSubmitError("");
        setSubmitSuccess("");

        if (!token) {
            setSubmitError("ChybĂ­ token pro reset hesla.");
            return;
        }

        if (newPassword !== confirmPassword) {
            setSubmitError("Hesla se neshodujĂ­.");
            return;
        }
        await tryClearDemoNotifications();
        setSubmitting(true);
        try {
            await resetForgottenPassword({
                token,
                newPassword,
                newPasswordConfirm: confirmPassword,
            });

            setSubmitSuccess(
                "Heslo bylo ĂşspÄ›ĹˇnÄ› zmÄ›nÄ›no. MĹŻĹľete se pĹ™ihlĂˇsit novĂ˝m heslem."
            );

            const demo = await tryGetDemoNotifications();
            console.log("[ForgottenPasswordReset] demo:", demo);

            if (hasAnyDemoItems(demo)) {
                setDemoNotifications(demo);
                setShowDemoModal(true);
                return;
            }

            setTimeout(() => navigate("/login"), 3000);
        } catch (err) {
            const status = err?.response?.status;
            const backendMessage =
                err?.response?.data?.message ||
                err?.response?.data?.error ||
                null;

            // DEMO: backend vracĂ­ 405 s business message -> bereme jako "ĂşspÄ›ch v demo reĹľimu"
            if (status === 405 && backendMessage) {
                const demoPrefix = "Heslo u uĹľivatele, kterĂ˝ byl vytvoĹ™en aplikacĂ­, nebude ve skuteÄŤnosti resetovĂˇno. "

                setSubmitSuccess(demoPrefix + backendMessage);

                const demo = await tryGetDemoNotifications();
                console.log("[ForgottenPasswordReset] demo after 405:", demo);

                if (hasAnyDemoItems(demo)) {
                    setDemoNotifications(demo);
                    setShowDemoModal(true);
                    return;
                }

                // kdyĹľ by v demo store nic nebylo, aspoĹ umoĹľni odchod
                setTimeout(() => navigate("/login"), 3000);
                return;
            }

            setSubmitError(
                backendMessage ||
                "Nastala chyba pĹ™i zmÄ›nÄ› hesla. Zkuste to prosĂ­m znovu."
            );
        } finally {
            setSubmitting(false);
        }

    };

    const handleCloseDemoModal = () => {
        setShowDemoModal(false);
        setDemoNotifications(null);
        navigate("/login");
    };

    if (loadingInfo) {
        return (
            <div className="container mt-4">
                <p>NaÄŤĂ­tĂˇm informace...</p>
            </div>
        );
    }

    if (infoError) {
        return (
            <div className="container mt-4">
                <div className="alert alert-danger" role="alert">
                    {infoError}
                </div>
                <button
                    type="button"
                    className="btn btn-outline-primary mt-3"
                    onClick={() => navigate("app/forgotten-password")}
                >
                    Zkusit poslat novĂ˝ odkaz
                </button>
            </div>
        );
    }

    return (
        <div className="container mt-4">
            <h1>NastavenĂ­ novĂ©ho hesla</h1>

            <p className="text-muted">
                Reset hesla pro ĂşÄŤet: <strong>{email}</strong>
            </p>

            {submitError && (
                <div className="alert alert-danger" role="alert">
                    {submitError}
                </div>
            )}

            {submitSuccess && (
                <div className="alert alert-success" role="alert">
                    {submitSuccess}

                    <div className="mt-3">
                        <button
                            type="button"
                            className="btn btn-outline-primary"
                            onClick={() => navigate("/login")}
                        >
                            PĹ™ejĂ­t na pĹ™ihlĂˇĹˇenĂ­
                        </button>
                    </div>
                </div>
            )}

            <form onSubmit={handleSubmit} style={{ maxWidth: "400px" }}>
                <div className="mb-3">
                    <label htmlFor="newPassword" className="form-label">
                        NovĂ© heslo
                    </label>
                    <input
                        type="password"
                        id="newPassword"
                        className="form-control"
                        value={newPassword}
                        onChange={(e) => setNewPassword(e.target.value)}
                        required
                        minLength={8}
                    />
                </div>

                <div className="mb-3">
                    <label htmlFor="confirmPassword" className="form-label">
                        PotvrzenĂ­ hesla
                    </label>
                    <input
                        type="password"
                        id="confirmPassword"
                        className="form-control"
                        value={confirmPassword}
                        onChange={(e) => setConfirmPassword(e.target.value)}
                        required
                        minLength={8}
                    />
                </div>

                <button
                    type="submit"
                    className="btn btn-primary"
                    disabled={submitting}
                >
                    {submitting ? "MÄ›nĂ­m heslo..." : "ZmÄ›nit heslo"}
                </button>
            </form>

            {showDemoModal && demoNotifications && (
                <DemoNotificationsModal
                    show={showDemoModal}
                    notifications={demoNotifications}
                    loading={false}
                    error={null}
                    onClose={handleCloseDemoModal}
                   
                />
            )}
        </div>
    );
};

export default ForgottenPasswordResetPage;


==================================================
src\pages\Home.css
==================================================



==================================================
src\pages\Home.jsx
==================================================

// src/pages/Home.jsx
import MatchCard from "../components/matches/MatchCard";
import Players from "../components/players/Players";
import { useMyUpcomingMatches } from "../hooks/useMyUpcomingMatches";
import { useAuth } from "../hooks/useAuth";

const Home = () => {
    const { matches, loading, error } = useMyUpcomingMatches();
    const { user } = useAuth();

    if (loading) return <p>NaÄŤĂ­tĂˇm dataâ€¦</p>;

    if (error) {
        return (
            <div className="container mt-3">
                <p className="text-danger">{error}</p>
            </div>
        );
    }

    return (
        <div className="container mt-3">
            <Players />            
        </div>
    );
};

export default Home;


==================================================
src\pages\HomeDecider.jsx
==================================================

// src/pages/HomeDecider.jsx

import { useAuth } from "../hooks/useAuth";
import Home from "./Home";
import AdminHomePage from "./AdminHomePage";

const HomeDecider = () => {
    const { user, loading } = useAuth();

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm uĹľivateleâ€¦</p>;
    }

    // DefenzivnÄ› znormalizujeme role
    const rawRoles = user?.roles || user?.role || [];
    const roles = Array.isArray(rawRoles) ? rawRoles : [rawRoles].filter(Boolean);

    const isAdmin = roles.includes("ROLE_ADMIN");

    if (isAdmin) {
        return <AdminHomePage />;
    }

    // ostatnĂ­ (hrĂˇÄŤ, manaĹľerâ€¦) uvidĂ­ pĹŻvodnĂ­ Home
    return <Home />;
};

export default HomeDecider;


==================================================
src\pages\LoginPage.jsx
==================================================

// src/pages/LoginPage.jsx
import React, { useState } from "react";
import { useAuth } from "../hooks/useAuth";
import { loginUser } from "../api/authApi";
import { useNavigate, Link } from "react-router-dom";
import usePostLoginRedirect from "../hooks/usePostLoginRedirect";
import "../App.css";

const LoginPage = () => {
    const navigate = useNavigate();
    const { updateUser } = useAuth();
    const postLoginRedirect = usePostLoginRedirect();

    const [email, setEmail] = useState("");
    const [password, setPassword] = useState("");
    const [error, setError] = useState(null);
    const [loading, setLoading] = useState(false);

    const handleSubmit = async (e) => {
        e.preventDefault();
        setError(null);
        setLoading(true);

        try {
            await loginUser(email, password);
            await updateUser();               // naÄŤte usera do AuthContextu

            // tady mĂ­sto navigate("/Players")
            await postLoginRedirect();
        } catch (err) {
            setError(err?.response?.data?.message || "NeplatnĂ© pĹ™ihlĂˇĹˇenĂ­");
        } finally {
            setLoading(false);
        }
    };

   return (
        <div className="container mt-5">
            <div className="row justify-content-center">
                <div className="col-12 d-flex justify-content-center">
                    <div
                       className="card shadow p-4 mx-auto auth-card" 
                       style={{ maxWidth: "420px" }}
                        
                    >
                        <h3 className="text-center mb-2">HokejApp</h3>
                        <h5 className="text-center mb-4 text-muted">PĹ™ihlĂˇĹˇenĂ­</h5>
                        
                        <h5 className="text-center mb-3">pĹ™Ă­stupy:</h5>
                        <p>BBB  admin@example.com - Role Admin<br></br>
                        "Administrator123"</p>
                        <p>player1@example.com - Role ManaĹľer<br></br>
                            "Heslo123"</p>
                        <p>player2-10@example.com  - Role HrĂˇÄŤ<br></br>
                        "Heslo123"</p>
                        <hr/>

                        {error && (
                            <div className="alert alert-danger">
                                {error}
                            </div>
                        )}

                        <form onSubmit={handleSubmit}>
                            <div className="mb-3">
                                <label className="form-label">E-mail</label>
                                <input
                                    type="email"
                                   className="form-control"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    required
                                />
                            </div>

                            <div className="mb-3">
                                <label className="form-label">Heslo</label>
                                <input
                                    type="password"
                                   className="form-control"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    required
                                />
                            </div>

                            <button
                                type="submit"
                                className="btn btn-primary w-100"
                                disabled={loading}
                            >
                                {loading ? "PĹ™ihlaĹˇujiâ€¦" : "PĹ™ihlĂˇsit se"}
                            </button>
                        </form>

                        <div className="mt-3 text-center">
                            <Link to="/forgotten-password">
                                ZapomenutĂ© heslo?
                            </Link>
                        </div>

                        <div className="mt-2 text-center">
                            NemĂˇte ĂşÄŤet?{" "}
                            <Link to="/register">
                                Zaregistrujte se
                            </Link>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default LoginPage;


==================================================
src\pages\MatchDetailPage.jsx
==================================================

// src/pages/MatchDetailPage.jsx
import { useParams, useNavigate, useLocation } from "react-router-dom";
import { useState, useEffect, useCallback } from "react";
import { useMatchDetail } from "../hooks/useMatchDetail";
import { upsertMyRegistration } from "../api/matchRegistrationApi";
import MatchDetail from "../components/matches/MatchDetail";
import { useNotification } from "../context/NotificationContext";
import { useCurrentPlayer } from "../hooks/useCurrentPlayer";
import { ExcuseReason } from "../constants/excuseReason";

// DEMO NOTIF
import { useDemoNotifications } from "../hooks/useDemoNotifications";
import DemoNotificationsModal from "../components/demo/DemoNotificationsModal";
import { useAppMode } from "../context/AppModeContext";
import { tryClearDemoNotifications } from "../api/demoApi";


import ExcuseModal from "../components/matchRegistration/ExcuseModal";

const MatchDetailPage = () => {
    const { id } = useParams();
    const navigate = useNavigate();
    const location = useLocation();

    const { match, loading, error, reload } = useMatchDetail(id);
    const [saving, setSaving] = useState(false);
    const [actionError, setActionError] = useState(null);

    const { showNotification } = useNotification();
    const { currentPlayer } = useCurrentPlayer();

    const playerName = currentPlayer?.fullName || "HrĂˇÄŤ";
    const { demoMode } = useAppMode();

    // zapamatujeme si, se kterĂ˝m hrĂˇÄŤem jsme na strĂˇnku pĹ™iĹˇli
    const [initialPlayerId, setInitialPlayerId] = useState(null);

    useEffect(() => {
        if (!currentPlayer) return;
        if (initialPlayerId === null) {
            setInitialPlayerId(currentPlayer.id ?? null);
        }
    }, [currentPlayer, initialPlayerId]);

    useEffect(() => {
        if (initialPlayerId === null) return;
        if (!currentPlayer) return;

        if (currentPlayer.id !== initialPlayerId) {
            navigate("/app/matches");
        }
    }, [currentPlayer, initialPlayerId, navigate]);

    const isPast = location.state?.isPast === true;

    const playerMatchStatus = match?.playerMatchStatus ?? "NO_RESPONSE";
    const matchStatus = match?.matchStatus ?? null;

    // EXCUSE modal stav
    const [showExcuseModal, setShowExcuseModal] = useState(false);
    const [selectedReason, setSelectedReason] = useState(ExcuseReason.JINE);
    const [excuseNote, setExcuseNote] = useState("");
    const [isUnregisterFlow, setIsUnregisterFlow] = useState(false);

    // DEMO NOTIF
    const {
        notifications: demoNotifications,
        showModal: showDemoModal,
        loading: demoLoading,
        error: demoError,
        loadAndShow: loadAndShowDemoNotifications,
        close: closeDemoModal,
    } = useDemoNotifications();

    const handleCloseDemoModal = () => {
        closeDemoModal();
        navigate("/app/matches");
    };

    /**
     * DEMO: pĹ™ed akcĂ­ vyÄŤistit starĂ© notifikace, aby se "nelepily".
     * V produkci endpoint neexistuje â†’ tryClearDemoNotifications to bezpeÄŤnÄ› ignoruje.
     */
    const clearDemoBeforeAction = useCallback(async () => {
        if (!demoMode) return;
        await tryClearDemoNotifications();
    }, [demoMode]);

    /**
     * DEMO: po akci ukĂˇzat demo notifikace; pokud ĹľĂˇdnĂ© nejsou, rovnou pĹ™esmÄ›rovat.
     */
    const handleDemoAfterAction = useCallback(async () => {
        const result = await loadAndShowDemoNotifications();
        if (!result?.hasAny) {
            navigate("/app/matches");
        }
    }, [loadAndShowDemoNotifications, navigate]);

    const handleRegister = async (teamFromModal) => {
        if (!match) return;

        try {
            setSaving(true);
            setActionError(null);

            const team = teamFromModal || currentPlayer?.team || null;

            await clearDemoBeforeAction();

            await upsertMyRegistration({
                matchId: match.id,
                team,
                excuseReason: null,
                excuseNote: null,
                unregister: false,
                substitute: false,
            });

            showNotification(
                `${playerName} byl ĂşspÄ›ĹˇnÄ› pĹ™ihlĂˇĹˇen na zĂˇpas.`,
                "success"
            );

            if (demoMode) {
                await handleDemoAfterAction();
            } else {
                navigate("/app/matches");
            }
        } catch (err) {
            console.error(err);
            setActionError(
                err?.response?.data?.message || "NepodaĹ™ilo se pĹ™ihlĂˇsit na zĂˇpas."
            );
        } finally {
            setSaving(false);
        }
    };

    const handleSubstitute = async () => {
        if (!match) return;

        try {
            setSaving(true);
            setActionError(null);

            await clearDemoBeforeAction();

            await upsertMyRegistration({
                matchId: match.id,
                team: null,
                excuseReason: null,
                excuseNote: null,
                unregister: false,
                substitute: true,
            });

            showNotification(
                `${playerName} se pĹ™ihlĂˇsil jako nĂˇhradnĂ­k - moĹľnĂˇ pĹ™Ă­jde).`,
                "info"
            );

            if (demoMode) {
                await handleDemoAfterAction();
            } else {
                navigate("/app/matches");
            }
        } catch (err) {
            console.error(err);
            setActionError(
                err?.response?.data?.message || "NepodaĹ™ilo se nastavit stav 'MoĹľnĂˇ'."
            );
        } finally {
            setSaving(false);
        }
    };

    const openExcuseFlow = (unregister) => {
        if (!match) return;

        setActionError(null);
        setIsUnregisterFlow(unregister);

        const backendReason = match.excuseReason;
        const backendNote = match.excuseNote;

        setSelectedReason(
            backendReason && ExcuseReason[backendReason]
                ? backendReason
                : ExcuseReason.JINE
        );

        setExcuseNote(
            backendNote ??
            (unregister ? "OdhlĂˇĹˇenĂ­ ze zĂˇpasu." : "Nemohu se zĂşÄŤastnit.")
        );

        setShowExcuseModal(true);
    };

    const handleUnregister = () => openExcuseFlow(true);
    const openExcuseModal = () => openExcuseFlow(false);

    const handleSubmitExcuse = async () => {
        if (!match) return;

        try {
            setSaving(true);
            setActionError(null);

            await clearDemoBeforeAction();

            await upsertMyRegistration({
                matchId: match.id,
                team: null,
                excuseReason: selectedReason,
                excuseNote,
                unregister: isUnregisterFlow,
            });

            if (isUnregisterFlow) {
                showNotification(`${playerName} byl odhlĂˇĹˇen ze zĂˇpasu.`, "info");
            } else {
                showNotification(`${playerName} se omluvil ze zĂˇpasu.`, "warning");
            }

            setShowExcuseModal(false);
            setIsUnregisterFlow(false);

            if (demoMode) {
                await handleDemoAfterAction();
            } else {
                navigate("/app/matches");
            }
        } catch (err) {
            console.error(err);
            setActionError(
                err?.response?.data?.message ||
                (isUnregisterFlow
                    ? "NepodaĹ™ilo se odhlĂˇsit ze zĂˇpasu."
                    : "NepodaĹ™ilo se omluvit ze zĂˇpasu.")
            );
        } finally {
            setSaving(false);
        }
    };

    const handleCloseExcuseModal = () => {
        if (saving) return;
        setShowExcuseModal(false);
        setIsUnregisterFlow(false);
    };

    return (
        <>
            <MatchDetail
                match={match}
                playerMatchStatus={playerMatchStatus}
                matchStatus={matchStatus}
                loading={loading}
                error={error}
                actionError={actionError}
                onRegister={handleRegister}
                onUnregister={handleUnregister}
                onExcuse={openExcuseModal}
                onSubstitute={handleSubstitute}
                saving={saving}
                isPast={isPast}
                defaultTeam={currentPlayer?.team || "LIGHT"}
                onRefresh={reload}
            />

            <ExcuseModal
                show={showExcuseModal}
                saving={saving}
                isUnregisterFlow={isUnregisterFlow}
                selectedReason={selectedReason}
                excuseNote={excuseNote}
                onChangeReason={setSelectedReason}
                onChangeNote={setExcuseNote}
                onClose={handleCloseExcuseModal}
                onSubmit={handleSubmitExcuse}
            />

            {/* DEMO NOTIF â€“ modal s demo notifikacemi jen v demo reĹľimu */}
            {demoMode && (
                <DemoNotificationsModal
                    show={showDemoModal}
                    onClose={handleCloseDemoModal}
                    notifications={demoNotifications}
                    loading={demoLoading}
                    error={demoError}
                />
            )}
        </>
    );
};

export default MatchDetailPage;


==================================================
src\pages\MatchesPage.jsx
==================================================

import React from 'react'
import UpcomingMatches from "../components/matches/UpcomingMatches";
import PastMatches from "../components/matches/PastMatches";
import { useCurrentPlayer } from "../hooks/useCurrentPlayer";
import BackButton from "../components/BackButton";
import SeasonSelect from "../components/seasons/seasonSelect";

const matches = () => {
  const { currentPlayer, loading } = useCurrentPlayer();

  if (loading) {
    return <p>NaÄŤĂ­tĂˇmâ€¦</p>;
  }

  return (
    <div>
      {/* hornĂ­ Ĺ™Ăˇdek â€“ vlevo vĂ˝bÄ›r sezĂłny */}
      <div className="d-flex justify-content-start mb-3">
        <SeasonSelect />
      </div>
      <UpcomingMatches />
     
      <hr className="my-4" />

      {currentPlayer && (
        <PastMatches />
      )}
      

    </div>
  )
}

export default matches

==================================================
src\pages\MyInactivityPage.jsx
==================================================

// src/pages/MyInactivityPage.jsx
import { useMemo, useState } from "react";
import { useMyInactivity } from "../hooks/useMyInactivity";
import { useCurrentPlayer } from "../hooks/useCurrentPlayer";

const normalizeDate = (value) => {
    if (!value) return null;

    const raw =
        typeof value === "string"
            ? value.includes("T")
                ? value
                : value.replace(" ", "T")
            : value;

    const d = new Date(raw);
    return Number.isNaN(d.getTime()) ? null : d;
};

const formatDateTime = (value) => {
    const d = normalizeDate(value);
    if (!d) return "-";
    return d.toLocaleString("cs-CZ");
};

const FILTERS = {
    ALL: "ALL",
    CURRENT: "CURRENT",
    NON_CURRENT: "NON_CURRENT",
};

const MyInactivityPage = () => {
    const { periods, loading, error, reload } = useMyInactivity();
    const { currentPlayer } = useCurrentPlayer();

    const [filter, setFilter] = useState(FILTERS.ALL);

    const filteredPeriods = useMemo(() => {
        switch (filter) {
            case FILTERS.CURRENT:
                return periods.filter((p) => p.isCurrent);
            case FILTERS.NON_CURRENT:
                return periods.filter((p) => !p.isCurrent);
            case FILTERS.ALL:
            default:
                return periods;
        }
    }, [periods, filter]);

    const counts = useMemo(() => {
        const all = periods.length;
        const current = periods.filter((p) => p.isCurrent).length;
        const nonCurrent = all - current;

        return { all, current, nonCurrent };
    }, [periods]);

    if (loading) {
        return <p>NaÄŤĂ­tĂˇm informace o neaktivitÄ›â€¦</p>;
    }

    if (error) {
        return (
            <div className="alert alert-danger">
                {error}
                <div className="mt-2">
                    <button
                        type="button"
                        className="btn btn-sm btn-outline-light"
                        onClick={reload}
                    >
                        Zkusit znovu naÄŤĂ­st
                    </button>
                </div>
            </div>
        );
    }

    const playerName =
        currentPlayer?.surname || currentPlayer?.name
            ? `${currentPlayer?.surname?.toUpperCase() || ""} ${currentPlayer?.name || ""
                }`.trim()
            : "HrĂˇÄŤ";

    return (
        <div className="container py-3">
            <div className="d-flex justify-content-between align-items-center mb-3">
                <h1 className="h2 mb-2">
                    Moje obdobĂ­ neaktivity
                    {playerName && (
                        <span className="d-block h6 text-muted mt-3 mb-0">
                            {playerName}
                        </span>
                    )}
                </h1>
                <button
                    type="button"
                    className="btn btn-outline-secondary btn-sm"
                    onClick={reload}
                >
                    Znovu naÄŤĂ­st
                </button>
            </div>

            <p className="text-muted mb-3">
                CelkovĂ˝ poÄŤet obdobĂ­ neaktivity:{" "}
                <strong>{periods.length}</strong>
            </p>

            {/* FiltrovacĂ­ tlaÄŤĂ­tka â€“ stejnĂ˝ styl jako admin */}
            <div className="d-flex justify-content-center mb-4">
                <div
                    className="btn-group"
                    role="group"
                    aria-label="Filtr obdobĂ­ neaktivity"
                >
                    <button
                        type="button"
                        className={
                            filter === FILTERS.ALL
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.ALL)}
                    >
                        VĹˇechna{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.all}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.CURRENT
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.CURRENT)}
                    >
                        AktuĂˇlnÄ› neaktivnĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.current}
                        </span>
                    </button>

                    <button
                        type="button"
                        className={
                            filter === FILTERS.NON_CURRENT
                                ? "btn btn-primary"
                                : "btn btn-outline-primary"
                        }
                        onClick={() => setFilter(FILTERS.NON_CURRENT)}
                    >
                        NeaktuĂˇlnĂ­{" "}
                        <span className="badge bg-light text-dark ms-1">
                            {counts.nonCurrent}
                        </span>
                    </button>
                </div>
            </div>

            {filteredPeriods.length === 0 && (
                <p>Pro zvolenĂ˝ filtr nejsou ĹľĂˇdnĂˇ obdobĂ­ neaktivity.</p>
            )}

            <div className="d-flex flex-column gap-3">
                {filteredPeriods.map((p) => (
                    <div key={p.id} className="card shadow-sm">
                        <div className="card-body">
                            <div className="row align-items-center">
                                <div className="col-md-3">
                                    <small className="text-muted d-block">
                                        ObdobĂ­
                                    </small>
                                    {p.isCurrent && (
                                        <span className="badge bg-dark mb-1">
                                            AktuĂˇlnÄ› neaktivnĂ­
                                        </span>
                                    )}
                                    <div className="text-muted small">
                                        ID obdobĂ­: {p.id}
                                    </div>
                                </div>

                                <div className="col-md-3">
                                    <small className="text-muted d-block">
                                        NeaktivnĂ­ od
                                    </small>
                                    {formatDateTime(p.inactiveFrom)}
                                </div>

                                <div className="col-md-3">
                                    <small className="text-muted d-block">
                                        NeaktivnĂ­ do
                                    </small>
                                    {formatDateTime(p.inactiveTo)}
                                </div>

                                <div className="col-md-3">
                                    <small className="text-muted d-block">
                                        DĹŻvod neaktivity
                                    </small>
                                    {p.inactivityReason || "-"}
                                </div>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

export default MyInactivityPage;


==================================================
src\pages\PlayerHomePage.jsx
==================================================

// src/pages/PlayerHomePage.jsx
import { Link } from "react-router-dom";
import { useMemo } from "react";

import { useAuth } from "../hooks/useAuth";
import { useCurrentPlayer } from "../hooks/useCurrentPlayer";
import { useMyPlayerStats } from "../hooks/useMyPlayerStats";
import SeasonSelect from "../components/seasons/seasonSelect";
import PlayerStats from "../components/players/PlayerStats";

/**
 * HrĂˇÄŤskĂˇ domovskĂˇ strĂˇnka.
 *
 * StrĂˇnka slouĹľĂ­ jako pĹ™ehled pro pĹ™ihlĂˇĹˇenĂ©ho uĹľivatele a aktuĂˇlnÄ› zvolenĂ©ho hrĂˇÄŤe.
 * Obsahuje rychlĂ© akce a souhrnnĂ© statistiky pro aktuĂˇlnĂ­ sezĂłnu.
 */
const PlayerHomePage = () => {
    const { user } = useAuth();
    const { currentPlayer, loading: playerLoading } = useCurrentPlayer();

    const {
        stats,
        loading: statsLoading,
        error: statsError,
        reload: reloadStats,
    } = useMyPlayerStats({ enabled: true });

    const displayName = useMemo(() => {
        const email = user?.email || user?.username || "";
        return email || "UĹľivatel";
    }, [user]);

    const playerLabel = useMemo(() => {
        if (playerLoading) return "NaÄŤĂ­tĂˇm hrĂˇÄŤeâ€¦";
        if (!currentPlayer) return "NenĂ­ zvolen aktuĂˇlnĂ­ hrĂˇÄŤ";
        const name =
            currentPlayer?.fullName ||
            currentPlayer?.nickname ||
            "HrĂˇÄŤ";
        return name;
    }, [currentPlayer, playerLoading]);

    const ActionCard = ({ title, desc, to, icon }) => (
        <div className="col-12 col-md-6 col-xl-3">
            <div className="card h-100 shadow-sm">
                <div className="card-body d-flex flex-column">
                    <div className="d-flex align-items-center gap-2 mb-2">
                        <span className="fs-4">{icon}</span>
                        <h5 className="card-title mb-0">{title}</h5>
                    </div>
                    <p className="text-muted small mb-3">{desc}</p>
                    <div className="mt-auto">
                        <Link to={to} className="btn btn-outline-primary w-100">
                            OtevĹ™Ă­t
                        </Link>
                    </div>
                </div>
            </div>
        </div>
    );

    return (
        <div className="container py-4">
            {/* Header */}
            <div className="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2 mb-4">
                <div>
                    <h1 className="h3 mb-1">MĹŻj pĹ™ehled</h1>
                    <p className="text-muted mb-0">
                        PĹ™ihlĂˇĹˇen: <span className="fw-semibold">{displayName}</span> â€˘
                        HrĂˇÄŤ: <span className="fw-semibold">{playerLabel}</span>
                    </p>
                </div>


               
                <div className="d-flex gap-2">
                    <button
                        type="button"
                        className="btn btn-outline-secondary"
                        onClick={reloadStats}
                        disabled={statsLoading}
                        title="ObnovĂ­ statistiky"
                    >
                        Obnovit
                    </button>
                  
                </div>
            </div>

            {/* Quick actions */}
            <div className="row g-3 mb-4">
                <ActionCard
                    icon="đźŹ’"
                    title="ZĂˇpasy"
                    desc="PĹ™ehled zĂˇpasĹŻ a registrace."
                    to="/app/matches"
                />
                <ActionCard
                    icon="đź§‘â€Ťđź¤ťâ€Ťđź§‘"
                    title="Moji hrĂˇÄŤi"
                    desc="PĹ™epnutĂ­ aktuĂˇlnĂ­ho hrĂˇÄŤe a sprĂˇva profilu."
                    to="/app/players"
                />
                <ActionCard
                    icon="â›”"
                    title="Moje absence"
                    desc="NahlĂˇĹˇenĂ­ neaktivity a omluv."
                    to="/app/my-inactivity"
                />
                <ActionCard
                    icon="đź› ď¸Ź"
                    title="nastavenĂ­"
                    desc="Co a jak ti chodĂ­ (email/SMS)."
                    to="/app/settings"
                />
            </div>

            {/* Stats */}
            <PlayerStats
                stats={stats}
                loading={statsLoading}
                error={statsError}
                onReload={reloadStats}
            />

            <div className="text-muted small mt-4">
                
            </div>
        </div>
    );
};

export default PlayerHomePage;


==================================================
src\pages\PlayersPage.jsx
==================================================

import React from 'react'
import Players from "../components/players/Players"
import BackButton from "../components/BackButton";

const PlayersPage = () => {

  return (
    <div>
      <Players />
      
    </div>
    
    
    

  )
}

export default PlayersPage


==================================================
src\pages\PublicLandingPage.jsx
==================================================

import { Link } from "react-router-dom";

const PublicLandingPage = () => {
    return (
        <div className="min-vh-100 d-flex flex-column bg-light">

            {/* TOP BAR */}
            <div className="border-bottom bg-white shadow-sm">
                <div className="container py-3 d-flex justify-content-between align-items-center">
                    <div className="d-flex align-items-center gap-2">
                        <img
                            src="/hockey-clipart.svg"
                            alt="Logo"
                            style={{ height: "34px" }}
                        />
                        <div className="fw-bold fs-5">HobbyHokej App</div>
                        <span className="badge bg-danger ms-2">DEMO</span>
                    </div>
                    <div className="d-flex gap-2">
                        <Link to="/login" className="btn btn-primary btn-sm px-3">
                            PĹ™ihlĂˇĹˇenĂ­
                        </Link>
                        <Link to="/register" className="btn btn-outline-primary btn-sm px-3">
                            Registrace
                        </Link>
                    </div>
                </div>
            </div>

            {/* HERO */}
            <main className="flex-grow-1">

                <div
                    className="py-5"
                    style={{
                        background: "linear-gradient(135deg, #f8f9fa 0%, #e9f2ff 100%)"
                    }}
                >
                    <div className="container">
                        <div className="row align-items-center g-5">

                            {/* LEFT */}
                            <div className="col-lg-7">

                                <div className="mb-4 d-flex justify-content-center">
                                    <img
                                        src="/hockey-clipart.svg"
                                        alt="Logo"
                                        className="img-fluid"
                                        style={{
                                            maxWidth: "clamp(120px, 30vw, 220px)",
                                            height: "auto"
                                        }}
                                    />
                                </div>

                                <h1 className="fw-bold mb-3">
                                    SprĂˇva hobby hokejovĂ©ho tĂ˝mu jednoduĹˇe a pĹ™ehlednÄ›
                                </h1>

                                <p className="lead text-muted mb-4">
                                    Evidence zĂˇpasĹŻ, pĹ™ihlĂˇĹˇek, omluvenek, neaktivit a automatickĂ˝ch notifikacĂ­.
                                    Podpora rolĂ­ hrĂˇÄŤĹŻ, manaĹľerĹŻ i administrĂˇtorĹŻ.
                                </p>

                                <div className="d-flex flex-column flex-sm-row gap-3">
                                    <Link to="/login" className="btn btn-primary btn-lg px-4 shadow-sm">
                                        PĹ™ihlĂˇsit se
                                    </Link>
                                    <Link to="/register" className="btn btn-outline-primary btn-lg px-4">
                                        VytvoĹ™it ĂşÄŤet
                                    </Link>
                                </div>

                                <div className="mt-5">
                                    <div className="row g-3">

                                        <div className="col-sm-6">
                                            <div className="card border-0 shadow-sm h-100">
                                                <div className="card-body">
                                                    <h6 className="fw-semibold">ZĂˇpasy</h6>
                                                    <p className="small text-muted mb-0">
                                                        PĹ™ehled nadchĂˇzejĂ­cĂ­ch i probÄ›hlĂ˝ch zĂˇpasĹŻ.
                                                        ZobrazenĂ­ nadchĂˇzejĂ­cĂ­ch zĂˇpasĹŻ dle typu hrĂˇÄŤe. VytvĂˇĹ™enĂ­, zmÄ›na a ruĹˇenĂ­ zĂˇpasĹŻ.
                                                    </p>
                                                    <p className="small text-muted mb-0">
                                                        Detail zĂˇpasĹŻ s poÄŤty hrĂˇÄŤĹŻ.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="col-sm-6">
                                            <div className="card border-0 shadow-sm h-100">
                                                <div className="card-body">
                                                    <h6 className="fw-semibold">Registrace na zĂˇpas</h6>
                                                    <p className="small text-muted mb-0">
                                                        ĂšÄŤast, nĂˇhradnĂ­k, omluva, automatickĂ© pĹ™epoÄŤty.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="col-sm-6">
                                            <div className="card border-0 shadow-sm h-100">
                                                <div className="card-body">
                                                    <h6 className="fw-semibold">Notifikace</h6>
                                                    <p className="small text-muted mb-0">
                                                        E-mail a SMS dle uĹľivatelskĂ©ho nastavenĂ­.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="col-sm-6">
                                            <div className="card border-0 shadow-sm h-100">
                                                <div className="card-body">
                                                    <h6 className="fw-semibold">SprĂˇva</h6>
                                                    <p className="small text-muted mb-0">
                                                        HrĂˇÄŤi, sezĂłny, uĹľivatelĂ© a pĹ™ehledy.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            {/* RIGHT PANEL */}
                            <div className="col-lg-5">

                                {/* DEMO CARD */}
                                <div className="card shadow border-0 mb-4">
                                    <div className="card-body">
                                        <h5 className="fw-semibold mb-3">DEMO reĹľim</h5>

                                        <p className="small text-muted">
                                            Aplikace mĹŻĹľe bÄ›Ĺľet v demonstraÄŤnĂ­m reĹľimu.
                                            Notifikace jsou zobrazovĂˇny v modĂˇlnĂ­ch oknech, nejsou reĂˇlnÄ› odesĂ­lĂˇny a nÄ›kterĂ© operace nejsou provĂˇdÄ›ny â€žna ostroâ€ś. 
                                        </p>

                                        <div className="alert alert-warning small">
                                            <strong>DĹŻleĹľitĂ©:</strong><br />
                                            NepouĹľĂ­vej reĂˇlnĂ© e-maily, telefonnĂ­ ÄŤĂ­sla ani osobnĂ­ Ăşdaje.
                                            PouĹľĂ­vej testovacĂ­ data nebo si vytvoĹ™ vlastnĂ­ demo ĂşÄŤet.
                                        </div>
                                    </div>
                                </div>

                                {/* ROLE CARD */}
                                <div className="card shadow border-0">
                                    <div className="card-body">
                                        <h5 className="fw-semibold mb-3">TestovacĂ­ pĹ™ihlĂˇĹˇenĂ­</h5>

                                        {/* ADMIN */}
                                        <div className="mb-4 p-3 bg-light rounded">
                                            <div className="d-flex justify-content-between align-items-center mb-2">
                                                <span className="badge bg-dark">Admin</span>
                                            </div>
                                            <div className="small text-muted mb-2">
                                                KompletnĂ­ sprĂˇva systĂ©mu â€“ uĹľivatelĂ©, hrĂˇÄŤi, sezĂłny, zĂˇpasy.
                                            </div>
                                            <div className="small">
                                                <strong>Email:</strong> admin@example.com<br />
                                                <strong>Heslo:</strong> administrator123
                                            </div>
                                        </div>

                                        {/* MANAGER */}
                                        <div className="mb-4 p-3 bg-light rounded">
                                            <div className="d-flex justify-content-between align-items-center mb-2">
                                                <span className="badge bg-primary">ManaĹľer</span>
                                            </div>
                                            <div className="small text-muted mb-2">
                                                SprĂˇva hrĂˇÄŤĹŻ a zĂˇpasĹŻ, pĹ™ehledy ĂşÄŤasti.
                                            </div>
                                            <div className="small">
                                                <strong>Email:</strong> player1@example.com<br />
                                                <strong>Heslo:</strong> Heslo123
                                            </div>
                                        </div>

                                        {/* HRĂÄŚ */}
                                        <div className="p-3 bg-light rounded">
                                            <div className="mb-2">
                                                <span className="badge bg-secondary">HrĂˇÄŤ</span>
                                            </div>
                                            <div className="small text-muted mb-2">
                                                Registrace na zĂˇpasy, omluvy, vlastnĂ­ nastavenĂ­ notifikacĂ­.
                                            </div>
                                            <div className="small">
                                                <strong>Email:</strong> player(1-10)@example.com<br />
                                                <strong>Heslo:</strong> Heslo123
                                            </div>
                                        </div>

                                        <div className="border-top pt-3 mt-3 small text-muted text-center">
                                            âš  Pouze pro DEMO ĂşÄŤely â€“ nepouĹľĂ­vej reĂˇlnĂ© osobnĂ­ Ăşdaje.
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </main>

            {/* FOOTER */}
            <footer className="bg-white border-top">
                <div className="container py-3 small text-muted d-flex justify-content-between">
                    <span>Â© {new Date().getFullYear()} Petr Hlista - HobbyHokejApp</span>
                    <span>DEMO / ProdukÄŤnĂ­ reĹľim dle konfigurace</span>
                </div>
            </footer>
        </div>
    );
};

export default PublicLandingPage;


==================================================
src\pages\PublicLayout.jsx
==================================================

import { Outlet } from "react-router-dom";
import HeaderTop from "../components/HeaderTop";

const PublicLayout = () => {
    return (
        <>
            <HeaderTop />
            <Outlet />
        </>
    );
};

export default PublicLayout;


==================================================
src\pages\RegisterPage.jsx
==================================================

// src/pages/RegisterPage.jsx
import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { registerUser } from "../api/authApi";
import { tryGetDemoNotifications, tryClearDemoNotifications } from "../api/demoApi";
import DemoNotificationsModal from "../components/demo/DemoNotificationsModal";

const hasAnyDemoItems = (demo) => {
  if (!demo) return false;
  return (demo.emails?.length ?? 0) > 0 || (demo.sms?.length ?? 0) > 0;
};

const RegisterPage = () => {
  const navigate = useNavigate();

  const [form, setForm] = useState({
    name: "",
    surname: "",
    email: "",
    password: "",
    passwordConfirm: "",
  });

  const [error, setError] = useState(null);
  const [loading, setLoading] = useState(false);
  const [success, setSuccess] = useState(false);

  // DEMO modal
  const [demoNotifications, setDemoNotifications] = useState(null);
  const [showDemoModal, setShowDemoModal] = useState(false);

  const handleChange = (e) => {
    setForm({
      ...form,
      [e.target.name]: e.target.value,
    });
  };

  const handleCloseDemoModal = () => {
    setShowDemoModal(false);
    setDemoNotifications(null);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError(null);
    setLoading(true);
    setSuccess(false);

    if (form.password !== form.passwordConfirm) {
      setError("Hesla se neshodujĂ­.");
      setLoading(false);
      return;
    }

    try {
      await tryClearDemoNotifications();
      await registerUser(form);

      // Success hlĂˇĹˇka (platĂ­ vĹľdy)
      setSuccess(true);

      // DEMO: naÄŤti zachycenĂ© notifikace a ukaĹľ modal (napĹ™. USER_CREATED s aktivaÄŤnĂ­m odkazem)
      const demo = await tryGetDemoNotifications();
      console.log("[RegisterPage] demo:", demo);

      if (hasAnyDemoItems(demo)) {
        setDemoNotifications(demo);
        setShowDemoModal(true);
      }
    } catch (err) {
      console.error(err);
      setError(
        err?.response?.data?.message ||
        err?.message ||
        "Registrace se nezdaĹ™ila."
      );
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="container mt-4">
      <div className="row justify-content-center">
        <div className="col-md-6 col-lg-5">
          <div className="card shadow p-4">
            <h3 className="text-center mb-4">Registrace</h3>

            {error && <div className="alert alert-danger">{error}</div>}

            {success && (
              <div className="alert alert-success">
                <strong>Registrace probÄ›hla ĂşspÄ›ĹˇnÄ›.</strong>
                <br />
                Byl VĂˇm zaslĂˇn e-mail s odkazem pro aktivaci ĂşÄŤtu. ProsĂ­m
                zkontrolujte svou schrĂˇnku (i sloĹľku Spam).
              </div>
            )}

            {/* đź”ą FORMULĂĹ SE SKRYJE PO ĂšSPÄšCHU */}
            {!success && (
              <form onSubmit={handleSubmit}>
                <div className="mb-3">
                  <label className="form-label">KĹ™estnĂ­ jmĂ©no</label>
                  <input
                    type="text"
                    className="form-control"
                    name="name"
                    value={form.name}
                    onChange={handleChange}
                    required
                  />
                </div>

                <div className="mb-3">
                  <label className="form-label">PĹ™Ă­jmenĂ­</label>
                  <input
                    type="text"
                    className="form-control"
                    name="surname"
                    value={form.surname}
                    onChange={handleChange}
                    required
                  />
                </div>

                <div className="mb-3">
                  <label className="form-label">E-mail</label>
                  <input
                    type="email"
                    className="form-control"
                    name="email"
                    value={form.email}
                    onChange={handleChange}
                    required
                  />
                </div>

                <div className="mb-3">
                  <label className="form-label">Heslo</label>
                  <input
                    type="password"
                    className="form-control"
                    name="password"
                    value={form.password}
                    onChange={handleChange}
                    required
                  />
                </div>

                <div className="mb-3">
                  <label className="form-label">PotvrzenĂ­ hesla</label>
                  <input
                    type="password"
                    className="form-control"
                    name="passwordConfirm"
                    value={form.passwordConfirm}
                    onChange={handleChange}
                    required
                  />
                </div>

                <button
                  type="submit"
                  className="btn btn-primary w-100 mb-2"
                  disabled={loading}
                >
                  {loading ? "Registrujiâ€¦" : "Registrovat"}
                </button>
              </form>
            )}

            {/* đź”ą TLAÄŚĂŤTKO ZPÄšT NA LOGIN â€“ vĹľdy viditelnĂ© */}
            <button
              type="button"
              className="btn btn-outline-secondary w-100 mt-2"
              onClick={() => navigate("/login")}
            >
              ZpÄ›t na pĹ™ihlĂˇĹˇenĂ­
            </button>
          </div>
        </div>
      </div>

      {showDemoModal && demoNotifications && (
        <DemoNotificationsModal
          show={showDemoModal}
          notifications={demoNotifications}
          loading={false}
          error={null}
          onClose={handleCloseDemoModal}
        />
      )}
    </div>
  );
};

export default RegisterPage;


==================================================
src\pages\SettingsPage.jsx
==================================================

// src/pages/SettingsPage.jsx
import { useEffect, useState } from "react";
import { usePlayerSettings } from "../hooks/usePlayerSettings";
import { useUserSettings } from "../hooks/useUserSettings";
import { useCurrentPlayer } from "../hooks/useCurrentPlayer";

import { updateMyCurrentPlayer } from "../api/playerApi";

import PlayerSettings from "../components/settings/PlayerSettings";
import UserSettings from "../components/settings/UserSettings";
import PlayerProfileForm from "../components/settings/PlayerProfileForm";
import BackButton from "../components/BackButton";
import ChangePasswordForm from "../components/settings/ChangePasswordForm";
import { userApi } from "../api/userApi";
import UserProfileForm from "../components/settings/UserProfileForm";
import { useUserProfile } from "../hooks/useUserProfile";
import RoleGuard from "../components/RoleGuard";
import { validatePlayerProfile } from "../validation/playerValidation";

// Frontend validace AppUserDTO (profil uĹľivatele)
const validateUserProfile = (values) => {
    const errors = {};

    if (!values.name || !values.name.trim()) {
        errors.name = "KĹ™estnĂ­ jmĂ©no je povinnĂ©.";
    } else if (
        values.name.trim().length < 2 ||
        values.name.trim().length > 50
    ) {
        errors.name = "KĹ™estnĂ­ jmĂ©no musĂ­ mĂ­t 2 aĹľ 50 znakĹŻ.";
    }

    if (!values.surname || !values.surname.trim()) {
        errors.surname = "PĹ™Ă­jmenĂ­ je povinnĂ©.";
    } else if (
        values.surname.trim().length < 2 ||
        values.surname.trim().length > 50
    ) {
        errors.surname = "PĹ™Ă­jmenĂ­ musĂ­ mĂ­t 2 aĹľ 50 znakĹŻ.";
    }

    // email tady nekontrolujeme â€“ je jen read-only login

    return errors;
};


// Frontend validace kontaktnĂ­ch ĂşdajĹŻ v PlayerSettingsDTO
const validatePlayerSettingsContact = (values) => {
    const errors = {};

    const rawEmail = values.contactEmail ?? "";
    const rawPhone = values.contactPhone ?? "";

    const email = rawEmail.trim();
    const phone = rawPhone.trim();

    // 1) pokud chce emailovĂ© notifikace, email je povinnĂ˝
    if (values.emailEnabled && !email) {
        errors.contactEmail =
            "Pro e-mailovĂ© notifikace musĂ­Ĺˇ vyplnit kontaktnĂ­ e-mail.";
    }

    // 2) pokud je email vyplnÄ›nĂ˝, musĂ­ vypadat jako e-mail
    if (email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            errors.contactEmail =
                "Zadej platnĂ˝ e-mail ve formĂˇtu napĹ™. uzivatel@example.com.";
        }
    }

    // 3) pokud chce SMS notifikace, telefon je povinnĂ˝
    if (values.smsEnabled && !phone) {
        errors.contactPhone =
            "Pro SMS notifikace musĂ­Ĺˇ vyplnit kontaktnĂ­ telefon.";
    }

    // 4) pokud je telefon vyplnÄ›nĂ˝, musĂ­ bĂ˝t E.164
    if (phone) {
        const phoneRegex = /^\+[1-9]\d{1,14}$/;
        if (!phoneRegex.test(phone)) {
            errors.contactPhone =
                "KontaktnĂ­ telefon musĂ­ bĂ˝t v mezinĂˇrodnĂ­m formĂˇtu, napĹ™. +420123456789.";
        }
    }

    return errors;
};

// Frontend validace zmÄ›ny hesla
const validateChangePassword = (values) => {
    const errors = {};

    if (!values.oldPassword || !values.oldPassword.trim()) {
        errors.oldPassword = "StĂˇvajĂ­cĂ­ heslo je povinnĂ©.";
    }

    if (!values.newPassword || !values.newPassword.trim()) {
        errors.newPassword = "NovĂ© heslo je povinnĂ©.";
    } else if (values.newPassword.length < 8) {
        errors.newPassword = "NovĂ© heslo musĂ­ mĂ­t alespoĹ 8 znakĹŻ.";
    }

    if (
        !values.newPasswordConfirm ||
        !values.newPasswordConfirm.trim()
    ) {
        errors.newPasswordConfirm = "PotvrzenĂ­ novĂ©ho hesla je povinnĂ©.";
    } else if (values.newPasswordConfirm !== values.newPassword) {
        errors.newPasswordConfirm = "NovĂ© heslo a potvrzenĂ­ se neshodujĂ­.";
    }

    if (
        values.oldPassword &&
        values.newPassword &&
        values.oldPassword === values.newPassword
    ) {
        errors.newPassword =
            "NovĂ© heslo se musĂ­ liĹˇit od stĂˇvajĂ­cĂ­ho hesla.";
    }

    return errors;
};

const SettingsPage = () => {
    const [activeTab, setActiveTab] = useState("player"); // "player" | "user"

    // === AktuĂˇlnĂ­ hrĂˇÄŤ (profil) ===
    const {
        currentPlayer,
        loading: loadingCurrentPlayer,
        error: errorCurrentPlayer,
    } = useCurrentPlayer();

    const emptyPlayerProfile = {
        id: null,
        name: "",
        surname: "",
        nickname: "",
        phoneNumber: "",
        team: "",
    };

    const [playerProfileValues, setPlayerProfileValues] = useState(
        emptyPlayerProfile
    );
    const [savingProfile, setSavingProfile] = useState(false);
    const [profileError, setProfileError] = useState(null);
    const [profileSuccess, setProfileSuccess] = useState(null);
    const [profileFieldErrors, setProfileFieldErrors] = useState({});

    useEffect(() => {
        if (currentPlayer) {
            setPlayerProfileValues({
                id: currentPlayer.id,
                name: currentPlayer.name || "",
                surname: currentPlayer.surname || "",
                nickname: currentPlayer.nickname || "",
                phoneNumber: currentPlayer.phoneNumber || "",
                team: currentPlayer.team || "",
            });
        } else {
            setPlayerProfileValues(emptyPlayerProfile);
        }
        setProfileFieldErrors({});
        setProfileError(null);
        setProfileSuccess(null);
    }, [currentPlayer]);


    const handlePlayerProfileChange = (patch) => {
        setPlayerProfileValues((prev) => ({ ...prev, ...patch }));
        setProfileSuccess(null);

        const key = Object.keys(patch)[0];
        setProfileFieldErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handlePlayerProfileSubmit = async () => {
        const errors = validatePlayerProfile(playerProfileValues);
        setProfileFieldErrors(errors);

        if (Object.keys(errors).length > 0) {
            setProfileError("ProsĂ­m zkontroluj zvĂ˝raznÄ›nĂˇ pole.");
            setProfileSuccess(null);
            return;
        }

        try {
            setSavingProfile(true);
            setProfileError(null);
            setProfileSuccess(null);

            const payload = {
                id: playerProfileValues.id,
                name: playerProfileValues.name?.trim(),
                surname: playerProfileValues.surname?.trim(),
                nickname: playerProfileValues.nickname?.trim() || null,
                phoneNumber:
                    playerProfileValues.phoneNumber &&
                        playerProfileValues.phoneNumber.trim() !== ""
                        ? playerProfileValues.phoneNumber.trim()
                        : null,
                team: playerProfileValues.team || null,
            };

            await updateMyCurrentPlayer(payload);
            setProfileSuccess("Profil hrĂˇÄŤe byl ĂşspÄ›ĹˇnÄ› uloĹľen.");
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                "NepodaĹ™ilo se uloĹľit profil hrĂˇÄŤe.";
            setProfileError(msg);
        } finally {
            setSavingProfile(false);
        }
    };

    // === NastavenĂ­ hrĂˇÄŤe (PlayerSettingsDTO â€“ notifikace atd.) ===
    const {
        settings: playerSettings,
        loading: loadingPlayerSettings,
        saving: savingPlayerSettings,
        error: errorPlayerSettings,
        success: successPlayerSettings,
        saveSettings: savePlayerSettings,
    } = usePlayerSettings();

    const [playerSettingsValues, setPlayerSettingsValues] =
        useState(playerSettings);
    const [playerSettingsErrors, setPlayerSettingsErrors] = useState({});

    useEffect(() => {
        setPlayerSettingsValues(playerSettings);
        setPlayerSettingsErrors({});
    }, [playerSettings]);

    const handlePlayerSettingsChange = (patch) => {
        setPlayerSettingsValues((prev) => ({ ...prev, ...patch }));

        const key = Object.keys(patch)[0];
        setPlayerSettingsErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handlePlayerSettingsSubmit = async () => {
        const errors = validatePlayerSettingsContact(playerSettingsValues);
        setPlayerSettingsErrors(errors);

        if (Object.keys(errors).length > 0) {
            return;
        }

        const emailRaw = playerSettingsValues.contactEmail ?? "";
        const phoneRaw = playerSettingsValues.contactPhone ?? "";

        const payload = {
            ...playerSettingsValues,
            contactEmail: emailRaw.trim() !== "" ? emailRaw.trim() : null,
            contactPhone: phoneRaw.trim() !== "" ? phoneRaw.trim() : null,
            reminderHoursBefore: playerSettingsValues.notifyReminders
                ? playerSettingsValues.reminderHoursBefore
                : null,
        };

        await savePlayerSettings(payload);
    };

    // === NastavenĂ­ uĹľivatele (AppUserSettingsDTO) ===
    const {
        settings: userSettings,
        loading: loadingUserSettings,
        saving: savingUserSettings,
        error: errorUserSettings,
        success: successUserSettings,
        saveSettings: saveUserSettings,
    } = useUserSettings();

    const [userFormValues, setUserFormValues] = useState(userSettings);

    useEffect(() => {
        setUserFormValues(userSettings);
    }, [userSettings]);

    const handleUserChange = (patch) => {
        setUserFormValues((prev) => ({ ...prev, ...patch }));
    };

    const handleUserSubmit = async () => {
        await saveUserSettings(userFormValues);
    };

    // === ZmÄ›na hesla ===
    const [passwordValues, setPasswordValues] = useState({
        oldPassword: "",
        newPassword: "",
        newPasswordConfirm: "",
    });
    const [passwordErrors, setPasswordErrors] = useState({});
    const [passwordSaving, setPasswordSaving] = useState(false);
    const [passwordSuccess, setPasswordSuccess] = useState(null);
    const [passwordError, setPasswordError] = useState(null);

    const handlePasswordChange = (patch) => {
        setPasswordValues((prev) => ({ ...prev, ...patch }));
        setPasswordSuccess(null);

        const key = Object.keys(patch)[0];
        setPasswordErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handlePasswordSubmit = async () => {
        const errors = validateChangePassword(passwordValues);
        setPasswordErrors(errors);

        if (Object.keys(errors).length > 0) {
            return;
        }

        try {
            setPasswordSaving(true);
            setPasswordError(null);
            setPasswordSuccess(null);

            const payload = {
                oldPassword: passwordValues.oldPassword,
                newPassword: passwordValues.newPassword,
                newPasswordConfirm: passwordValues.newPasswordConfirm,
            };

            const message = await userApi.changeMyPassword(payload); // â¬…ď¸Ź tady

            setPasswordSuccess(
                typeof message === "string"
                    ? message
                    : "Heslo bylo ĂşspÄ›ĹˇnÄ› zmÄ›nÄ›no."
            );

            setPasswordValues({
                oldPassword: "",
                newPassword: "",
                newPasswordConfirm: "",
            });
        } catch (err) {
            const msg =
                err?.response?.data?.message ||
                "NepodaĹ™ilo se zmÄ›nit heslo.";
            setPasswordError(msg);
        } finally {
            setPasswordSaving(false);
        }
    };

    // === Profil uĹľivatele (AppUserDTO) ===
    const {
        profile: userProfile,
        loading: loadingUserProfile,
        saving: savingUserProfile,
        error: errorUserProfile,
        success: successUserProfile,
        saveProfile: saveUserProfile,
    } = useUserProfile();

    const emptyUserProfile = {
        id: null,
        name: "",
        surname: "",
        email: "",
        role: "",
        enabled: false,
        players: [],
    };

    const [userProfileValues, setUserProfileValues] = useState(emptyUserProfile);
    const [userProfileErrors, setUserProfileErrors] = useState({});

    useEffect(() => {
        if (userProfile) {
            setUserProfileValues({
                id: userProfile.id,
                name: userProfile.name || "",
                surname: userProfile.surname || "",
                email: userProfile.email || "",
                role: userProfile.role || "",
                enabled: userProfile.enabled ?? false,
                players: userProfile.players || [],
            });
        } else {
            setUserProfileValues(emptyUserProfile);
        }
        setUserProfileErrors({});
    }, [userProfile]);

    const handleUserProfileChange = (patch) => {
        setUserProfileValues((prev) => ({ ...prev, ...patch }));

        const key = Object.keys(patch)[0];
        setUserProfileErrors((prev) => {
            const copy = { ...prev };
            delete copy[key];
            return copy;
        });
    };

    const handleUserProfileSubmit = async () => {
        const errors = validateUserProfile(userProfileValues);
        setUserProfileErrors(errors);

        if (Object.keys(errors).length > 0) {
            return;
        }

        await saveUserProfile(userProfileValues);
    };


    const isLoading =
        loadingCurrentPlayer ||
        loadingPlayerSettings ||
        loadingUserSettings ||
        loadingUserProfile;

    return (
        <div className="container mt-0">
            <h1 className="h4 mb-3">NastavenĂ­</h1>

            <p className="text-muted mb-3">
                Zde mĹŻĹľeĹˇ upravit nastavenĂ­ svĂ©ho uĹľivatelskĂ©ho ĂşÄŤtu i
                nastavenĂ­ aktuĂˇlnĂ­ho hrĂˇÄŤe.
            </p>

            {/* PĹ™epĂ­naÄŤ zĂˇloĹľek */}
            <ul className="nav nav-pills mb-4 gap-2">
                <li className="nav-item">
                    <button
                        type="button"
                        className={
                            "nav-link border border-primary rounded " +
                            (activeTab === "player"
                                ? "active"
                                : "text-primary bg-transparent")
                        }
                        onClick={() => setActiveTab("player")}
                    >
                        NastavenĂ­ hrĂˇÄŤe
                    </button>
                </li>
                <li className="nav-item">
                    <button
                        type="button"
                        className={
                            "nav-link border border-primary rounded " +
                            (activeTab === "user"
                                ? "active"
                                : "text-primary bg-transparent")
                        }
                        onClick={() => setActiveTab("user")}
                    >
                        NastavenĂ­ uĹľivatele (ĂşÄŤtu)
                    </button>
                </li>
                <li className="nav-item">
                    <button
                        type="button"
                        className={
                            "nav-link border border-primary rounded " +
                            (activeTab === "password"
                                ? "active"
                                : "text-primary bg-transparent")
                        }
                        onClick={() => setActiveTab("password")}
                    >
                        ZmÄ›na hesla
                    </button>
                </li>
                <RoleGuard roles={["ROLE_ADMIN"]}>
                    <li className="nav-item">
                        <button
                            type="button"
                            className={
                                "nav-link border border-primary rounded " +
                                (activeTab === "transfer"
                                    ? "active"
                                    : "text-primary bg-transparent")
                            }
                            onClick={() => setActiveTab("transfer")}
                        >
                            PĹ™esun hrĂˇÄŤe k jinĂ©mu uĹľivateli
                        </button>
                    </li>
                </RoleGuard>
            </ul>

            {isLoading && <p>NaÄŤĂ­tĂˇm nastavenĂ­â€¦</p>}

            {!isLoading && activeTab === "player" && (
                <>
                    {errorCurrentPlayer && (
                        <div className="alert alert-warning">
                            {errorCurrentPlayer}
                        </div>
                    )}

                    {!currentPlayer && !errorCurrentPlayer && (
                        <div className="alert alert-info">
                            NemĂˇĹˇ vybranĂ©ho aktuĂˇlnĂ­ho hrĂˇÄŤe. NastavenĂ­ hrĂˇÄŤe
                            nenĂ­ k dispozici.
                        </div>
                    )}

                    {currentPlayer && (
                        <>
                            <div className="card mb-4 shadow-sm">
                                <div className="card-header bg-light">
                                    <strong>Profil hrĂˇÄŤe</strong>
                                </div>
                                <div className="card-body">
                                    {profileError && (
                                        <div className="alert alert-danger">
                                            {profileError}
                                        </div>
                                    )}
                                    {profileSuccess && (
                                        <div className="alert alert-success">
                                            {profileSuccess}
                                        </div>
                                    )}

                                    <PlayerProfileForm
                                        values={playerProfileValues}
                                        onChange={handlePlayerProfileChange}
                                        errors={profileFieldErrors}
                                    />
                                    <div className="d-flex justify-content-end">
                                        <button
                                            type="button"
                                            className="btn btn-primary"
                                            onClick={handlePlayerProfileSubmit}
                                            disabled={savingProfile}
                                        >
                                            {savingProfile
                                                ? "UklĂˇdĂˇm profil hrĂˇÄŤeâ€¦"
                                                : "UloĹľit profil hrĂˇÄŤe"}
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div className="card mb-4 shadow-sm">
                                <div className="card-header bg-light">
                                    <strong>NastavenĂ­ notifikacĂ­ hrĂˇÄŤe</strong>
                                </div>
                                <div className="card-body">
                                    <PlayerSettings
                                        values={playerSettingsValues}
                                        onChange={handlePlayerSettingsChange}
                                        onSubmit={handlePlayerSettingsSubmit}
                                        saving={savingPlayerSettings}
                                        error={errorPlayerSettings}
                                        success={successPlayerSettings}
                                        errors={playerSettingsErrors}
                                    />
                                </div>
                            </div>
                        </>
                    )}
                </>
            )}

            {!isLoading && activeTab === "user" && (
                <>
                    {/* Profil uĹľivatele (AppUserDTO) */}
                    <div className="card mb-4 shadow-sm">
                        <div className="card-header bg-light d-flex justify-content-between align-items-center">
                            <strong>Profil uĹľivatele</strong>
                        </div>
                        <div className="card-body">
                            {errorUserProfile && (
                                <div className="alert alert-danger">
                                    {errorUserProfile}
                                </div>
                            )}
                            {successUserProfile && (
                                <div className="alert alert-success">
                                    {successUserProfile}
                                </div>
                            )}

                            <UserProfileForm
                                values={userProfileValues}
                                onChange={handleUserProfileChange}
                                errors={userProfileErrors}
                            />

                            <div className="d-flex justify-content-end">
                                <button
                                    type="button"
                                    className="btn btn-primary"
                                    onClick={handleUserProfileSubmit}
                                    disabled={savingUserProfile}
                                >
                                    {savingUserProfile
                                        ? "UklĂˇdĂˇm profil uĹľivateleâ€¦"
                                        : "UloĹľit profil uĹľivatele"}
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* NastavenĂ­ uĹľivatelskĂ©ho ĂşÄŤtu (AppUserSettingsDTO) */}
                    <div className="card mb-4 shadow-sm">
                        <div className="card-header bg-light">
                            <strong>NastavenĂ­ uĹľivatelskĂ©ho ĂşÄŤtu</strong>
                        </div>
                        <div className="card-body">
                            <UserSettings
                                values={userFormValues}
                                onChange={handleUserChange}
                                onSubmit={handleUserSubmit}
                                saving={savingUserSettings}
                                error={errorUserSettings}
                                success={successUserSettings}
                            />
                        </div>
                    </div>
                </>
            )}

            {!isLoading && activeTab === "password" && (
                <div className="card mb-4 shadow-sm">
                    <div className="card-header bg-light">
                        <strong>ZmÄ›na hesla</strong>
                    </div>
                    <div className="card-body">
                        <ChangePasswordForm
                            values={passwordValues}
                            errors={passwordErrors}
                            saving={passwordSaving}
                            success={passwordSuccess}
                            error={passwordError}
                            onChange={handlePasswordChange}
                            onSubmit={handlePasswordSubmit}
                        />
                    </div>
                </div>
            )}
        </div>
    );
};

export default SettingsPage;


==================================================
src\pages\SharedLayout.jsx
==================================================

import { Outlet } from "react-router-dom";
import Navbar from "../components/Navbar";
import Footer from "../components/Footer";
import HeaderTop from "../components/HeaderTop";
import { useNotification } from "../context/NotificationContext";
import CookieConsentBanner from "../components/CookieConsentBanner";

const SharedLayout = () => {
    const { notification } = useNotification();

    return (
        <div className="layout">
            <HeaderTop />
            <Navbar />

            {/* NOTIFIKACE POD NAVBAREM */}
            {notification && (
                <div className="container mt-2">
                    <div
                        className={`alert alert-${notification.type} text-center`}
                        role="alert"
                    >
                        {notification.message}
                    </div>
                </div>
            )}

            <main className="content">
                <div className="container">
                    <Outlet />
                </div>
            </main>

            <Footer />

            {/*  COOKIE INFO â€“ zobrazĂ­ se jen v pĹ™ihlĂˇĹˇenĂ© ÄŤĂˇsti */}
            <CookieConsentBanner />
        </div>
    );
};

export default SharedLayout;


==================================================
src\pages\VerifyEmailPage.jsx
==================================================

// src/pages/VerifyEmailPage.jsx

import { useEffect, useState } from "react";
import { useNavigate, useSearchParams } from "react-router-dom";
import { verifyEmail } from "../api/authApi";
import { tryGetDemoNotifications, tryClearDemoNotifications } from "../api/demoApi";
import DemoNotificationsModal from "../components/demo/DemoNotificationsModal";

const hasAnyDemoItems = (demo) => {
    if (!demo) return false;
    return (demo.emails?.length ?? 0) > 0 || (demo.sms?.length ?? 0) > 0;
};

const VerifyEmailPage = () => {
    const [searchParams] = useSearchParams();
    const navigate = useNavigate();

    const token = searchParams.get("token");

    const [loading, setLoading] = useState(true);
    const [error, setError] = useState("");
    const [successMessage, setSuccessMessage] = useState("");

    const [demoNotifications, setDemoNotifications] = useState(null);
    const [showDemoModal, setShowDemoModal] = useState(false);

    const handleCloseDemoModal = async () => {
        setShowDemoModal(false);
        setDemoNotifications(null);
        await tryClearDemoNotifications(); // pojistka
        navigate("/login");
    };

    useEffect(() => {
        const run = async () => {
            if (!token) {
                setError("ChybĂ­ aktivaÄŤnĂ­ token.");
                setLoading(false);
                return;
            }

            try {
                // pojistka: kdyby v demo store visely starĂ© zprĂˇvy
                await tryClearDemoNotifications();

                const res = await verifyEmail(token);
                setSuccessMessage(res.data || "ĂšÄŤet byl ĂşspÄ›ĹˇnÄ› aktivovĂˇn.");

                const demo = await tryGetDemoNotifications(); // GET uĹľ stejnÄ› dÄ›lĂˇ getAndClear()
                if (hasAnyDemoItems(demo)) {
                    setDemoNotifications(demo);
                    setShowDemoModal(true);
                    return;
                }

                setTimeout(() => navigate("/login"), 2500);
            } catch (e) {
                console.error(e);
                const msg =
                    e?.response?.data ||
                    e?.response?.data?.message ||
                    "AktivaÄŤnĂ­ odkaz je neplatnĂ˝ nebo expirovanĂ˝.";
                setError(msg);
            } finally {
                setLoading(false);
            }
        };

        run();
    }, [token, navigate]);

    return (
        <div className="container mt-4" style={{ maxWidth: 700 }}>
            <h1>Aktivace ĂşÄŤtu</h1>

            {loading && <p>ProbĂ­hĂˇ aktivaceâ€¦</p>}

            {!loading && error && (
                <div className="alert alert-danger" role="alert">
                    {error}
                </div>
            )}

            {!loading && !error && successMessage && (
                <div className="alert alert-success" role="alert">
                    {successMessage}
                </div>
            )}

            <button
                type="button"
                className="btn btn-outline-secondary"
                onClick={() => navigate("/login")}
            >
                ZpÄ›t na pĹ™ihlĂˇĹˇenĂ­
            </button>

            {showDemoModal && demoNotifications && (
                <DemoNotificationsModal
                    show={showDemoModal}
                    notifications={demoNotifications}
                    loading={false}
                    error={null}
                    onClose={handleCloseDemoModal}
                />
            )}
        </div>
    );
};

export default VerifyEmailPage;


==================================================
src\utils\formatPhoneNumber.js
==================================================

// src/utils/formatPhoneNumber.js
export const formatPhoneNumber = (phone) => {
    if (!phone) return "";

    // odstranĂ­ mezery, +, pomlÄŤky
    const digits = phone.replace(/\D/g, "");

    // 12 ÄŤĂ­slic (napĹ™. 420123456789)
    if (digits.length === 12) {
        return digits.replace(
            /(\d{3})(\d{3})(\d{3})(\d{3})/,
            "$1 $2 $3 $4"
        );
    }

    // 9 ÄŤĂ­slic (napĹ™. 123456789)
    if (digits.length === 9) {
        return digits.replace(
            /(\d{3})(\d{3})(\d{3})/,
            "$1 $2 $3"
        );
    }

    // fallback â€“ vrĂˇtĂ­ pĹŻvodnĂ­
    return phone;
};


==================================================
src\utils\matchFormatter.js
==================================================

// src/utils/matchFormatter.js

export const formatDateTime = (value) => {
    if (!value) return "";
    const date = new Date(value);
    if (Number.isNaN(date.getTime())) return "";
    return date.toLocaleString("cs-CZ", {
        day: "2-digit",
        month: "2-digit",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
    });
};

export const matchStatusLabel = (status) => {
    if (!status) return "";
    switch (status) {
        case "CANCELED":
            return "ZruĹˇenĂ˝";
        case "UNCANCELED":
            return "ObnovenĂ˝";
        case "UPDATED":
            return "ZmÄ›nÄ›nĂ˝";
        default:
            return status;
    }
};

export const matchCancelReasonLabel = (reason) => {
    if (!reason) return "";
    switch (reason) {
        case "NOT_ENOUGH_PLAYERS":
            return "Nedostatek hrĂˇÄŤĹŻ";
        case "TECHNICAL_ISSUE":
            return "TechnickĂ© problĂ©my (led, hala, doprava)";
        case "WEATHER":
            return "NepĹ™Ă­znivĂ© poÄŤasĂ­";
        case "ORGANIZER_DECISION":
            return "RozhodnutĂ­ organizĂˇtora";
        case "OTHER":
            return "JinĂ˝ dĹŻvod"
        default:
            return reason;
    }
};

export const matchActionLabel = (action) => {
    if (!action) return "";
    switch (action) {
        case "CREATED":
            return "VytvoĹ™enĂ­ zĂˇpasu";
        case "UPDATED":
            return "Ăšprava zĂˇpasu";
        case "CANCELED":
            return "ZruĹˇenĂ­ zĂˇpasu";
        case "UNCANCELED":
            return "ObnovenĂ­ zĂˇpasu";
        default:
            return action;
    }
};


==================================================
src\utils\registrationFormatter.js
==================================================

// src/utils/registrationFormatters.js

export const formatDateTime = (value) => {
    if (!value) return "";
    return new Date(value).toLocaleString("cs-CZ");
};

export const statusLabel = (status) => {
    const map = {
        REGISTERED: "PĹ™ihlĂˇĹˇen",
        UNREGISTERED: "OdhlĂˇĹˇen",
        EXCUSED: "Omluven",
        NO_EXCUSED: "Neomluven",
        SUBSTITUTE: "MoĹľnĂˇ",
        RESERVED: "ÄŚekatel"
    };
    return map[status] ?? status;
};

export const teamLabel = (team) => {
    if (!team) return "-";
    return team === "DARK" ? "TmavĂ˝" : "SvÄ›tlĂ˝";
};

export const excuseReasonLabel = (excuseReason) =>{
    const map = {
        NEMOC: "Nemoc",
        PRACE: "PrĂˇce",
        NECHCE_SE_MI: "Nechce se",
        JINE: "JinĂ©",
        
    };
    return map[excuseReason] ?? excuseReason;
}


==================================================
src\validation\matchValidation.js
==================================================

// src/validation/matchValidation.js

/**
 * Frontend validace pro MatchDTO.
 *
 * OÄŤekĂˇvanĂˇ pole v values:
 *  - dateTime: buÄŹ Date (Flatpickr), nebo string pro <input type="datetime-local"> (YYYY-MM-DDTHH:mm)
 *  - location: mĂ­sto zĂˇpasu
 *  - description: volitelnĂ˝ popis
 *  - maxPlayers: maximĂˇlnĂ­ poÄŤet hrĂˇÄŤĹŻ
 *  - price: celkovĂˇ cena zĂˇpasu
 */
export const validateMatch = (values) => {
    const errors = {};

    // --- dateTime ---
    const dt = values?.dateTime;

    const isValidDateObject =
        dt instanceof Date && !Number.isNaN(dt.getTime());

    const isValidDateString =
        typeof dt === "string" && dt.trim() !== "";

    if (!dt || (!isValidDateObject && !isValidDateString)) {
        errors.dateTime = "Datum a ÄŤas zĂˇpasu je povinnĂ©.";
    }

    // location â€“ @NotBlank, @Size(3, 70)
    const location = (values.location ?? "").trim();
    if (!location) {
        errors.location = "MĂ­sto zĂˇpasu je povinnĂ©.";
    } else if (location.length < 3 || location.length > 70) {
        errors.location = "MĂ­sto musĂ­ mĂ­t 3 aĹľ 70 znakĹŻ.";
    }

    // description â€“ @Size(max=255)
    const description = (values.description ?? "").trim();
    if (description.length > 255) {
        errors.description = "Popis mĹŻĹľe mĂ­t maximĂˇlnÄ› 255 znakĹŻ.";
    }

    // maxPlayers â€“ @NotNull + rozumnĂˇ kontrola > 0
    if (
        values.maxPlayers === null ||
        values.maxPlayers === undefined ||
        values.maxPlayers === ""
    ) {
        errors.maxPlayers = "MaximĂˇlnĂ­ poÄŤet hrĂˇÄŤĹŻ je povinnĂ˝.";
    } else {
        const maxPlayersNum = Number(values.maxPlayers);
        if (!Number.isInteger(maxPlayersNum) || maxPlayersNum <= 0) {
            errors.maxPlayers =
                "MaximĂˇlnĂ­ poÄŤet hrĂˇÄŤĹŻ musĂ­ bĂ˝t kladnĂ© celĂ© ÄŤĂ­slo.";
        }
    }

    // price â€“ @NotNull + rozumnĂˇ kontrola â‰Ą 0
    if (values.price === null || values.price === undefined || values.price === "") {
        errors.price = "Cena je povinnĂˇ.";
    } else {
        const priceNum = Number(values.price);
        if (!Number.isFinite(priceNum) || priceNum < 0) {
            errors.price = "Cena musĂ­ bĂ˝t ÄŤĂ­slo vÄ›tĹˇĂ­ nebo rovno nule.";
        }
    }

    return errors;
};


==================================================
src\validation\playerValidation.js
==================================================

// src/validation/playerValidation.js

// Frontend validace dle PlayerDTO
export const validatePlayerProfile = (values) => {
    const errors = {};

    // name: @NotBlank + @Size(2, 50)
    if (!values.name || !values.name.trim()) {
        errors.name = "KĹ™estnĂ­ jmĂ©no je povinnĂ©.";
    } else if (
        values.name.trim().length < 2 ||
        values.name.trim().length > 50
    ) {
        errors.name = "KĹ™estnĂ­ jmĂ©no musĂ­ mĂ­t 2 aĹľ 50 znakĹŻ.";
    }

    // surname: @NotBlank + @Size(2, 50)
    if (!values.surname || !values.surname.trim()) {
        errors.surname = "PĹ™Ă­jmenĂ­ je povinnĂ©.";
    } else if (
        values.surname.trim().length < 2 ||
        values.surname.trim().length > 50
    ) {
        errors.surname = "PĹ™Ă­jmenĂ­ musĂ­ mĂ­t 2 aĹľ 50 znakĹŻ.";
    }

    // phoneNumber: @Pattern(E.164), ale mĹŻĹľe bĂ˝t null/"" â†’ kontrolujeme jen pokud je nÄ›co vyplnÄ›nĂ©
    // NavĂ­c chceme, aby mÄ›l pro ÄŤeskĂ© prostĹ™edĂ­ celkem ( 12 ÄŤĂ­slic po +)
    if (values.phoneNumber && values.phoneNumber.trim() !== "") {
        const trimmed = values.phoneNumber.trim();

        // + [1-9] + 8â€“14 dalĹˇĂ­ch ÄŤĂ­slic => celkem 9â€“15 ÄŤĂ­slic
        const phoneRegex = /^\+[1-9]\d{11}$/;

        if (!phoneRegex.test(trimmed)) {
            errors.phoneNumber =
                "Telefon musĂ­ bĂ˝t v mezinĂˇrodnĂ­m formĂˇtu a dostateÄŤnÄ› dlouhĂ˝, napĹ™. +420123456789.";
        }
    }


    return errors;
};


==================================================
src\validation\seasonValidation.js
==================================================

// src/validation/seasonValidation.js

/**
 * Frontend validace pro SeasonDTO.
 *
 * @param {object} values - hodnoty formulĂˇĹ™e (name, startDate, endDate, id)
 * @param {Array} allSeasons - seznam existujĂ­cĂ­ch sezĂłn (SeasonDTO[])
 * @returns {object} errors - mapovĂˇnĂ­ field -> message
 */
export const validateSeason = (values, allSeasons = []) => {
    const errors = {};

    const rawName = values.name ?? "";
    const name = rawName.trim();
    const startDate = values.startDate;
    const endDate = values.endDate;
    const currentId = values.id ?? null;

    // 1) NĂˇzev
    if (!name) {
        errors.name = "NĂˇzev sezĂłny je povinnĂ˝ (napĹ™. 2025/2026).";
    }

    // 2) Datum od / do vyplnÄ›no
    if (!startDate) {
        errors.startDate = "Datum zaÄŤĂˇtku sezĂłny je povinnĂ©.";
    }
    if (!endDate) {
        errors.endDate = "Datum konce sezĂłny je povinnĂ©.";
    }

    // KdyĹľ chybĂ­ nÄ›kterĂ© datum, nemĂˇ smysl pokraÄŤovat dĂˇl
    if (!startDate || !endDate) {
        // ale jeĹˇtÄ› mĹŻĹľeme zkontrolovat duplicitnĂ­ nĂˇzev
        checkDuplicateName(name, currentId, allSeasons, errors);
        return errors;
    }

    // 3) start < end (stejnÄ› jako na backendu: start.isBefore(end))
    const start = new Date(startDate);
    const end = new Date(endDate);

    if (!(start < end)) {
        const msg = "Datum 'od' musĂ­ bĂ˝t dĹ™Ă­ve neĹľ datum 'do'.";
        errors.startDate = errors.startDate || msg;
        errors.endDate = errors.endDate || msg;
    }

    // 4) PĹ™ekryv s jinĂ˝mi sezĂłnami
    // backend: existsByStartDateLessThanEqualAndEndDateGreaterThanEqual(end, start)
    // => otherStart <= end && otherEnd >= start
    const overlaps = allSeasons.some((season) => {
        if (!season.startDate || !season.endDate) {
            return false;
        }

        const otherStart = new Date(season.startDate);
        const otherEnd = new Date(season.endDate);

        // u update ignorujeme prĂˇvÄ› editovanou sezĂłnu
        if (season.id != null && currentId != null && season.id === currentId) {
            return false;
        }

        return otherStart <= end && otherEnd >= start;
    });

    if (overlaps) {
        const msg = "SezĂłna se pĹ™ekrĂ˝vĂˇ s existujĂ­cĂ­ sezĂłnou.";
        errors.startDate = errors.startDate || msg;
        errors.endDate = errors.endDate || msg;
    }

    // 5) DuplicitnĂ­ nĂˇzev sezĂłny
    checkDuplicateName(name, currentId, allSeasons, errors);

    return errors;
};

/**
 * Zkontroluje duplicitnĂ­ nĂˇzev sezĂłny.
 *
 * - ignoruje aktuĂˇlnĂ­ sezĂłnu podle id (aby Ĺˇlo uloĹľit beze zmÄ›ny nĂˇzvu)
 */
const checkDuplicateName = (name, currentId, allSeasons, errors) => {
    if (!name) return;

    const normalizedName = name.toLowerCase();

    const hasDuplicateName = allSeasons.some((season) => {
        if (!season.name) return false;

        const seasonName = season.name.trim().toLowerCase();

        // u editace ignorujeme tuto konkrĂ©tnĂ­ sezĂłnu
        if (season.id != null && currentId != null && season.id === currentId) {
            return false;
        }

        return seasonName === normalizedName;
    });

    if (hasDuplicateName) {
        errors.name =
            errors.name ||
            "SezĂłna s tĂ­mto nĂˇzvem jiĹľ existuje. Zvol jinĂ˝ nĂˇzev.";
    }
};


==================================================
src\App.css
==================================================

/*
  app.css
  Root musĂ­ bĂ˝t fluidnĂ­ â€“ ĹľĂˇdnĂ© max-width zde!
*/

#root {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
  text-align: left;
}

/* karta â€“ lehkĂ© vylepĹˇenĂ­ pro mobil */
.card {
  padding: 1.5rem;
  border-radius: 12px;
}

/* vĂ˝raznÄ›jĹˇĂ­ inputy v auth kartĂˇch */
.auth-card .form-control {
  border-width: 2px;
  padding: 0.75rem 0.9rem;
}

.auth-card .form-control:focus {
  border-color: #1B5E20;
  box-shadow: 0 0 0 0.2rem rgba(27, 94, 32, 0.18);
}

@media (max-width: 576px) {
  .card {
    padding: 1rem;
  }
}

==================================================
src\App.jsx
==================================================

// src/App.jsx
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom";
import LoginPage from "./pages/LoginPage";
import SharedLayout from "./pages/SharedLayout";
import ScrollToTop from "./components/ScrollToTop";
import RegisterPage from "./pages/RegisterPage";
import RequireAuth from "./RequireAuth";
import Matches from "./pages/MatchesPage";
import Players from "./pages/PlayersPage";
import CreatePlayer from "./pages/CreatePlayer";
import MatchDetailPage from "./pages/MatchDetailPage";
import SettingsPage from "./pages/SettingsPage";
import ForgottenPasswordRequestPage from "./pages/ForgottenPasswordRequestPage";
import ForgottenPasswordResetPage from "./pages/ForgottenPasswordResetPage";
import { CurrentPlayerProvider } from "./hooks/useCurrentPlayer";
import { SeasonProvider } from "./hooks/useSeason";
import AdminPlayersInactivityPage from "./pages/AdminPlayersInactivityPage";
import MyInactivityPage from "./pages/MyInactivityPage";
import ScrollToTopButton from "./components/ScrollToTopButton";
import VerifyEmailPage from "./pages/VerifyEmailPage";
import PlayerHomePage from "./pages/PlayerHomePage";
import "./App.css";

// ADMIN PAGES
import HomeDecider from "./pages/HomeDecider";
import AdminHomePage from "./pages/AdminHomePage";
import AdminPlayersPage from "./pages/AdminPlayersPage";
import RoleGuard from "./components/RoleGuard";

// ADMIN MATCHES
import AdminMatchesPage from "./pages/AdminMatchesPage";

// ADMIN SEASONS
import AdminSeasonsPage from "./pages/AdminSeasonsPage";

// ADMIN USERS
import AdminUsersPage from "./pages/AdminUsersPage";
import AdminUserDetailPage from "./pages/AdminUserDetailPage";

// DEMO MODE CONTEXT
import { AppModeProvider } from "./context/AppModeContext";

// veĹ™ejnĂˇ ĂşvodnĂ­ strĂˇnka pĹ™ed loginem
import PublicLandingPage from "./pages/PublicLandingPage";

// veĹ™ejnĂ˝ layout s topBarem
import PublicLayout from "./pages/PublicLayout";

const App = () => (
  <AppModeProvider>
    <BrowserRouter>
      <ScrollToTop resetPrefixes={["/"]} />

      <Routes>
        {/* VEĹEJNĂ ÄŚĂST â€“ s HeaderTop */}
        <Route element={<PublicLayout />}>
          <Route path="/" element={<PublicLandingPage />} />
          <Route path="/login" element={<LoginPage />} />
          <Route path="/register" element={<RegisterPage />} />
          <Route path="/verify" element={<VerifyEmailPage />} />
          <Route
            path="/forgotten-password"
            element={<ForgottenPasswordRequestPage />}
          />
          <Route
            path="/reset-password"
            element={<ForgottenPasswordResetPage />}
          />
        </Route>

        {/* ChrĂˇnÄ›nĂˇ ÄŤĂˇst aplikace â€“ se SharedLayout + Navbar */}
        <Route
          path="/app"
          element={
            <RequireAuth>
              <CurrentPlayerProvider>
                <SeasonProvider>
                  <SharedLayout />
                </SeasonProvider>
              </CurrentPlayerProvider>
            </RequireAuth>
          }
        >
          {/* index = "/app" */}
          <Route index element={<HomeDecider />} />

          {/* nested routy bez "/" */}
          <Route path="matches" element={<Matches />} />
          <Route path="players" element={<Players />} />
          <Route path="createPlayer" element={<CreatePlayer />} />
          <Route path="matches/:id" element={<MatchDetailPage />} />
          <Route path="settings" element={<SettingsPage />} />
          <Route path="my-inactivity" element={<MyInactivityPage />} />
          <Route path="player" element={<PlayerHomePage />} />

          {/* ADMIN/MANAGER â€“ SPRĂVA */}
          <Route
            path="admin"
            element={
              <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                <AdminHomePage />
              </RoleGuard>
            }
          />

          {/* ADMIN/MANAGER â€“ SPRĂVA HRĂÄŚĹ® */}
          <Route
            path="admin/players"
            element={
              <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                <AdminPlayersPage />
              </RoleGuard>
            }
          />

          {/* ADMIN/MANAGER â€“ SPRĂVA ZĂPASĹ® */}
          <Route
            path="admin/matches"
            element={
              <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                <AdminMatchesPage />
              </RoleGuard>
            }
          />

          {/* ADMIN/MANAGER â€“ SPRĂVA SEZĂ“N */}
          <Route
            path="admin/seasons"
            element={
              <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                <AdminSeasonsPage />
              </RoleGuard>
            }
          />

          {/* ADMIN/MANAGER â€“ SPRĂVA NEAKTIVIT */}
          <Route
            path="admin/inactivity"
            element={
              <RoleGuard roles={["ROLE_ADMIN", "ROLE_MANAGER"]}>
                <AdminPlayersInactivityPage />
              </RoleGuard>
            }
          />

          {/* ADMIN â€“ SPRĂVA UĹ˝IVATELĹ® */}
          <Route
            path="admin/users"
            element={
              <RoleGuard roles={["ROLE_ADMIN"]}>
                <AdminUsersPage />
              </RoleGuard>
            }
          />
          <Route
            path="admin/users/:id"
            element={
              <RoleGuard roles={["ROLE_ADMIN"]}>
                <AdminUserDetailPage />
              </RoleGuard>
            }
          />
        </Route>

        {/* fallback â€“ cokoliv jinĂ©ho â†’ ĂşvodnĂ­ strĂˇnka */}
        <Route path="*" element={<Navigate to="/" replace />} />
      </Routes>

      <ScrollToTopButton />
    </BrowserRouter>
  </AppModeProvider>
);

export default App;


==================================================
src\index.css
==================================================

/*
  index.css
  Mobile-first globĂˇlnĂ­ nastavenĂ­ aplikace
*/

/* reset + bezpeÄŤnĂ© rozmÄ›ry + prevence dlouhĂ˝ch textĹŻ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* zĂˇkladnĂ­ rozloĹľenĂ­ a prevence horizontĂˇlnĂ­ho scrollu */
html,
body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

html {
  font-size: 16px;
}

body {
  font-size: 1rem;
  line-height: 1.5;
  background-color: #f8f9fa;
}

/* na mobilu trochu vÄ›tĹˇĂ­ ÄŤitelnost */
@media (max-width: 576px) {
  html {
    font-size: 18px;
  }

  body {
    line-height: 1.6;
  }
}

/* root bez clip */
#root {
  width: 100%;
  max-width: 100%;
  margin: 0;
  padding: 0;
}

/* vlastnĂ­ container pro obsah (pokud nepouĹľĂ­vĂˇĹˇ vĹˇude Bootstrap container) */
.app-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 12px;
}

/* hlavnĂ­ layout */
.layout {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  width: 100%;
}

/* footer */
footer {
  background: #222;
  color: #ffffff;
  padding: 20px 16px;
  text-align: center;
}

/* seznamy */
ul {
  list-style-position: inside;
  padding-left: 1.2em;
  margin: 0.5em 0;
  text-align: left;
}

li {
  margin-bottom: 0.5em;
  line-height: 1.5em;
}

/* slider */
.slider {
  height: 50vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* =========================
   OVERLAY A MODALY
   ========================= */

/*
  Tohle je tvĹŻj globĂˇlnĂ­ "dim" overlay (pseudo-element na body).
  MusĂ­ bĂ˝t VIZUĂLNĂŤ, ale NESMĂŤ blokovat kliky ani scroll,
  jinak uvidĂ­Ĺˇ jen Ĺˇedou vrstvu a modal nebude ovladatelnĂ˝.
*/
body.modal-open::before,
body.dim-open::before {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1040;
  pointer-events: none;
}

/* backdrop z Bootstrapu / modalu */
.modal-backdrop {
  z-index: 1045;
}

/* samotnĂ˝ modal musĂ­ bĂ˝t nad backdropem */
.modal {
  z-index: 1055;
}

/* prvky, kterĂ© se majĂ­ udrĹľet nad dimem (pokud nÄ›kde pouĹľĂ­vĂˇĹˇ) */
.dim-keep {
  position: relative;
  z-index: 1056;
}

/* tvoje klikacĂ­ vrstva â€“ vĹľdy POD modalem */
.global-dim-click {
  position: fixed;
  inset: 0;
  z-index: 1044;
}

/* obrĂˇzky a svg */
img,
svg {
  max-width: 100%;
  height: auto;
}

/* bootstrap tabulky budou scrollovat jen uvnitĹ™ */
.table-responsive {
  width: 100%;
}

==================================================
src\main.jsx
==================================================

import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import "bootstrap/dist/css/bootstrap.min.css";
import App from "./App.jsx";
import "./index.css";


import { AuthProvider } from "./hooks/useAuth.jsx";
import { NotificationProvider } from "./context/NotificationContext.jsx";

createRoot(document.getElementById("root")).render(
  <StrictMode>
    <AuthProvider>

      
        <NotificationProvider>
          <App />
        </NotificationProvider>
      


    </AuthProvider>
  </StrictMode>
);


==================================================
src\RequireAuth.jsx
==================================================

// chrĂˇnÄ›nĂˇ routa s vyuĹľitĂ­m useAuth()
//ZabezpeÄŤenĂ­: nerenderuje UI dokud nevĂ­me stav. Akce auth je pouze v hooku, ne v komponentÄ›.

import { Navigate } from "react-router-dom";
import { useAuth } from "./hooks/useAuth";

const RequireAuth = ({ children }) => {
    const { user, loading } = useAuth();

    if (loading) return <p>OvÄ›Ĺ™uji pĹ™ihlĂˇĹˇenĂ­â€¦</p>;

    return user ? children : <Navigate to="/login" replace />;
};

export default RequireAuth;




