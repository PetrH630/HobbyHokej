.env
.env.*
application-*.local.properties

----
/etc/systemd/system/hokej.service

[Unit]
Description=HobbyHokej Spring Boot App
After=network.target

[Service]
User=www-data
WorkingDirectory=/var/www/hokej
EnvironmentFile=/var/www/hokej/.env
ExecStart=/usr/bin/java -jar /var/www/hokej/hokej.jar
SuccessExitStatus=143
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target


PÅ™Ã­kazy:

sudo systemctl daemon-reload
sudo systemctl enable hokej
sudo systemctl start hokej
sudo systemctl status hokej

-- spuÅ¡tÄ›nÃ­ MariaDB10.6 v cmd - jako sprÃ¡vce
net start MariaDB106


----
DOCKER
Do /opt/hobbyhokej/:
docker-compose.yml
.env
backend/Dockerfile
backend/app.jar (vÃ¡Å¡ vybuildÄ›nÃ½ jar z lokÃ¡lu)

--  cd /opt/hobbyhokej
    docker compose up -d --build
    docker ps
    docker logs -f hobbyhokej-backend

    -------------------
ğŸ›  Postup krok za krokem
1ï¸âƒ£ VytvoÅ™ sloÅ¾ku
mkdir -p /opt/hobbyhokej/backend
cd /opt/hobbyhokej/backend

2ï¸âƒ£ VytvoÅ™ Dockerfile
nano Dockerfile


VloÅ¾ pÅ™esnÄ› toto:

FROM eclipse-temurin:17-jre

WORKDIR /app

COPY app.jar /app/app.jar

EXPOSE 8080

ENV JAVA_OPTS="-XX:MaxRAMPercentage=75 -XX:+UseG1GC"

ENTRYPOINT ["sh","-c","java $JAVA_OPTS -jar /app/app.jar"]


UloÅ¾.

ğŸ“¦ Co je dÅ¯leÅ¾itÃ© pochopit

Tento Dockerfile Å™Ã­kÃ¡:

Vezmi hotovÃ½ image s Java 17 (Temurin)

Nastav pracovnÃ­ adresÃ¡Å™ /app

ZkopÃ­ruj do nÄ›j app.jar

SpusÅ¥ ho

â— Ale pozor

Soubor se jmenuje:

app.jar


To znamenÃ¡, Å¾e musÃ­Å¡ na server nahrÃ¡t svÅ¯j vybuildÄ›nÃ½ JAR pod tÃ­mto nÃ¡zvem.

ğŸ§± TeÄ musÃ­Å¡ udÄ›lat lokÃ¡lnÃ­ build

Na svÃ©m poÄÃ­taÄi v projektu:

mvn clean package -DskipTests


Pak zjisti pÅ™esnÃ½ nÃ¡zev jar v target/.

NapÅ™Ã­klad:

HobbyHokej-1.0-SNAPSHOT.jar


Nahraj ho na server a pÅ™ejmenuj:

scp target/HobbyHokej-1.0-SNAPSHOT.jar root@TVAJE_IP:/opt/hobbyhokej/backend/app.jar

ğŸ³ AÅ¾ bude Dockerfile i app.jar na mÃ­stÄ›

SpusÅ¥:

cd /opt/hobbyhokej
docker compose up -d --build


Docker:

vytvoÅ™Ã­ image

spustÃ­ MariaDB 10.6.25

spustÃ­ backend

backend se pÅ™ipojÃ­ na DB pÅ™es mariadb hostname

ğŸ” Kontrola
docker ps
docker logs -f hobbyhokej-backend


Pokud uvidÃ­Å¡:

Started HobbyHokejApplication


jsi hotovÃ½ ğŸ¯

ğŸ’¬ TeÄ dÅ¯leÅ¾itÃ¡ otÃ¡zka

Jak se jmenuje tvÅ¯j jar v target/?

A bÄ›Å¾Ã­ ti uÅ¾ Docker (docker --version)?