Balíček (složka): mappers
Cesta: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers

Seznam souborů:
AppUserMapper.java
AppUserSettingsMapper.java
MatchMapper.java
MatchRegistrationHistoryMapper.java
MatchRegistrationMapper.java
PlayerInactivityPeriodMapper.java
PlayerMapper.java
PlayerSettingsMapper.java
SeasonMapper.java



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\AppUserMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.AppUserEntity;
import cz.phsoft.hokej.data.entities.PlayerEntity;
import cz.phsoft.hokej.models.dto.AppUserDTO;
import cz.phsoft.hokej.models.dto.PlayerDTO;
import cz.phsoft.hokej.models.dto.RegisterUserDTO;
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.MappingTarget;

import java.util.List;

/**
 * Mapper zajišťující převod mezi uživatelskými entitami
 * a jejich DTO reprezentacemi.
 *
 * Slouží k oddělení perzistenční vrstvy od API vrstvy.
 * Controllery pracují výhradně s DTO objekty, zatímco
 * databázová vrstva používá entity.
 *
 * Mapper také zajišťuje bezpečné mapování, kdy citlivá
 * nebo systémově řízená pole nejsou přenášena z DTO
 * přímo do entit.
 */
@Mapper(componentModel = "spring")
public interface AppUserMapper {

    /**
     * Převede uživatelskou entitu na DTO.
     *
     * Součástí DTO je i seznam hráčů přiřazených
     * k danému uživateli.
     *
     * @param entity entita uživatele
     * @return DTO reprezentace uživatele
     */
    @Mapping(target = "players", source = "players")
    AppUserDTO toDTO(AppUserEntity entity);

    /**
     * Převede seznam uživatelských entit na seznam DTO.
     *
     * @param entities seznam uživatelských entit
     * @return seznam DTO
     */
    List<AppUserDTO> toDtoList(List<AppUserEntity> entities);

    /**
     * Převede entitu hráče na DTO.
     *
     * Pole fullName se záměrně nemapuje, protože
     * je skládáno jinde (např. v DTO logice).
     *
     * @param entity entita hráče
     * @return DTO hráče
     */
    @Mapping(target = "fullName", ignore = true)
    PlayerDTO toPlayerDTO(PlayerEntity entity);

    /**
     * Převede registrační DTO na novou uživatelskou entitu.
     *
     * Systémová pole nejsou mapována a jejich hodnoty
     * jsou nastavovány v servisní vrstvě.
     *
     * @param dto registrační DTO
     * @return nová entita uživatele
     */
    @Mapping(target = "id", ignore = true)
    @Mapping(target = "password", ignore = true)
    @Mapping(target = "role", ignore = true)
    @Mapping(target = "enabled", ignore = true)
    @Mapping(target = "players", ignore = true)
    AppUserEntity fromRegisterDto(RegisterUserDTO dto);

    /**
     * Aktualizuje existující entitu uživatele
     * hodnotami z DTO.
     *
     * Identita, role, heslo a vazby na hráče
     * nejsou z DTO přebírány.
     *
     * @param dto    zdrojové DTO
     * @param entity cílová entita
     */
    @Mapping(target = "id", ignore = true)
    @Mapping(target = "password", ignore = true)
    @Mapping(target = "role", ignore = true)
    @Mapping(target = "enabled", ignore = true)
    @Mapping(target = "players", ignore = true)
    void updateEntityFromDto(AppUserDTO dto, @MappingTarget AppUserEntity entity);
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\AppUserSettingsMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.AppUserSettingsEntity;
import cz.phsoft.hokej.models.dto.AppUserSettingsDTO;
import org.mapstruct.*;

/**
 * Mapper pro převod mezi entitou uživatelského nastavení
 * a její DTO reprezentací.
 *
 * Slouží pro správu preferencí uživatele bez zásahu
 * do samotné identity uživatelského účtu.
 */
@Mapper(componentModel = "spring")
public interface AppUserSettingsMapper {

    /**
     * Převede entitu nastavení na DTO.
     *
     * @param entity entita nastavení
     * @return DTO nastavení
     */
    AppUserSettingsDTO toDTO(AppUserSettingsEntity entity);

    /**
     * Aktualizuje existující entitu nastavení hodnotami z DTO.
     *
     * Null hodnoty jsou ignorovány, aby nedošlo
     * k nechtěnému přepsání existujících dat.
     *
     * @param dto    zdrojové DTO
     * @param entity cílová entita
     */
    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)
    void updateEntityFromDTO(AppUserSettingsDTO dto,
                             @MappingTarget AppUserSettingsEntity entity);
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\MatchMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.MatchEntity;
import cz.phsoft.hokej.models.dto.MatchDTO;
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.MappingTarget;

/**
 * Mapper pro převod mezi entitou zápasu a DTO.
 *
 * Řídí, jakým způsobem je vazba na sezónu
 * reprezentována v API vrstvě.
 */
@Mapper(componentModel = "spring")
public interface MatchMapper {

    /**
     * Převede entitu zápasu na DTO.
     *
     * Vazba na sezónu je reprezentována
     * pouze pomocí identifikátoru.
     *
     * @param entity entita zápasu
     * @return DTO zápasu
     */
    @Mapping(source = "season.id", target = "seasonId")
    MatchDTO toDTO(MatchEntity entity);

    /**
     * Převede DTO na novou entitu zápasu.
     *
     * Vazba na sezónu se nastavuje až
     * v servisní vrstvě.
     *
     * @param dto DTO zápasu
     * @return entita zápasu
     */
    @Mapping(target = "season", ignore = true)
    MatchEntity toEntity(MatchDTO dto);

    /**
     * Aktualizuje existující entitu zápasu.
     *
     * Vazba na sezónu se při aktualizaci
     * nemění.
     *
     * @param dto    zdrojové DTO
     * @param entity cílová entita
     */
    @Mapping(target = "season", ignore = true)
    void updateEntity(MatchDTO dto, @MappingTarget MatchEntity entity);
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\MatchRegistrationHistoryMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.MatchRegistrationHistoryEntity;
import cz.phsoft.hokej.models.dto.MatchRegistrationHistoryDTO;
import org.mapstruct.Mapper;

import java.util.List;

/**
 * Mapper pro převod historických záznamů registrací
 * na jejich DTO reprezentace.
 *
 * Slouží výhradně pro čtecí účely a auditní přehledy.
 */
@Mapper(componentModel = "spring")
public interface MatchRegistrationHistoryMapper {

    MatchRegistrationHistoryDTO toDTO(MatchRegistrationHistoryEntity entity);

    List<MatchRegistrationHistoryDTO> toDTOList(
            List<MatchRegistrationHistoryEntity> entities
    );
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\MatchRegistrationMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.MatchEntity;
import cz.phsoft.hokej.data.entities.MatchRegistrationEntity;
import cz.phsoft.hokej.data.entities.PlayerEntity;
import cz.phsoft.hokej.data.enums.ExcuseReason;
import cz.phsoft.hokej.data.enums.Team;
import cz.phsoft.hokej.data.enums.PlayerMatchStatus;
import cz.phsoft.hokej.models.dto.MatchRegistrationDTO;
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;

import java.util.List;

/**
 * Mapper pro převod registrací hráčů na zápasy
 * mezi entitním a DTO modelem.
 *
 * Zajišťuje konzistentní přenos stavu registrace,
 * omluv a administrativních metadat.
 */
@Mapper(componentModel = "spring")
public interface MatchRegistrationMapper {

    /**
     * Vytvoří novou entitu registrace.
     *
     * Systémová metadata jsou nastavena
     * automaticky při mapování.
     */
    @Mapping(target = "id", ignore = true)
    @Mapping(target = "timestamp", expression = "java(java.time.LocalDateTime.now())")
    MatchRegistrationEntity toEntity(
            MatchEntity match,
            PlayerEntity player,
            PlayerMatchStatus status,
            ExcuseReason excuseReason,
            String excuseNote,
            Team team,
            String adminNote,
            String createdBy
    );

    /**
     * Převede entitu registrace na DTO.
     *
     * @param entity entita registrace
     * @return DTO registrace
     */
    @Mapping(target = "matchId", source = "match.id")
    @Mapping(target = "playerId", source = "player.id")
    MatchRegistrationDTO toDTO(MatchRegistrationEntity entity);

    /**
     * Převede seznam registrací na seznam DTO.
     *
     * @param entities seznam entit
     * @return seznam DTO
     */
    List<MatchRegistrationDTO> toDTOList(List<MatchRegistrationEntity> entities);
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\PlayerInactivityPeriodMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.PlayerEntity;
import cz.phsoft.hokej.data.entities.PlayerInactivityPeriodEntity;
import cz.phsoft.hokej.models.dto.PlayerInactivityPeriodDTO;
import org.mapstruct.*;

/**
 * Mapper pro převod období neaktivity hráče
 * mezi entitním a DTO modelem.
 */
@Mapper(componentModel = "spring")
public interface PlayerInactivityPeriodMapper {

    @Mapping(target = "playerId", source = "player.id")
    PlayerInactivityPeriodDTO toDTO(PlayerInactivityPeriodEntity entity);

    @Mapping(target = "id", ignore = true)
    @Mapping(target = "player", ignore = true)
    PlayerInactivityPeriodEntity toEntity(PlayerInactivityPeriodDTO dto,
                                          @Context PlayerEntity player);

    @Mapping(target = "player", ignore = true)
    void updateEntityFromDto(PlayerInactivityPeriodDTO dto,
                             @MappingTarget PlayerInactivityPeriodEntity entity);

    /**
     * Tovární metoda pro vytvoření nové entity
     * s navázaným hráčem z kontextu.
     */
    @ObjectFactory
    default PlayerInactivityPeriodEntity createEntity(
            PlayerInactivityPeriodDTO dto,
            @Context PlayerEntity player
    ) {
        PlayerInactivityPeriodEntity entity = new PlayerInactivityPeriodEntity();
        entity.setPlayer(player);
        return entity;
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\PlayerMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.NotificationSettings;
import cz.phsoft.hokej.data.entities.PlayerEntity;
import cz.phsoft.hokej.models.dto.PlayerDTO;
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.MappingTarget;

import java.util.List;

/**
 * Mapper pro převod hráče mezi entitním
 * a DTO modelem.
 */
@Mapper(componentModel = "spring")
public interface PlayerMapper {

    @Mapping(target = "fullName", ignore = true)
    PlayerDTO toDTO(PlayerEntity entity);

    @Mapping(target = "fullName", ignore = true)
    @Mapping(target = "user", ignore = true)
    PlayerEntity toEntity(PlayerDTO dto);

    @Mapping(target = "fullName", ignore = true)
    @Mapping(target = "id", ignore = true)
    void updatePlayerDTO(PlayerDTO source, @MappingTarget PlayerDTO target);

    @Mapping(target = "fullName", ignore = true)
    @Mapping(target = "user", ignore = true)
    void updatePlayerEntity(PlayerDTO source, @MappingTarget PlayerEntity target);

    List<PlayerDTO> toDTOList(List<PlayerEntity> players);
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\PlayerSettingsMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.PlayerSettingsEntity;
import cz.phsoft.hokej.models.dto.PlayerSettingsDTO;
import org.mapstruct.*;

/**
 * Mapper pro převod hráčských nastavení
 * mezi entitou a DTO.
 */
@Mapper(componentModel = "spring")
public interface PlayerSettingsMapper {

    PlayerSettingsDTO toDTO(PlayerSettingsEntity entity);

    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)
    void updateEntityFromDTO(PlayerSettingsDTO dto,
                             @MappingTarget PlayerSettingsEntity entity);
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\models\mappers\SeasonMapper.java
-----

package cz.phsoft.hokej.models.mappers;

import cz.phsoft.hokej.data.entities.SeasonEntity;
import cz.phsoft.hokej.models.dto.SeasonDTO;
import org.mapstruct.Mapper;
import org.mapstruct.MappingTarget;

/**
 * Mapper pro převod sezón mezi entitním
 * a DTO modelem.
 */
@Mapper(componentModel = "spring")
public interface SeasonMapper {

    SeasonDTO toDTO(SeasonEntity entity);

    SeasonEntity toEntity(SeasonDTO dto);

    void updateEntityFromDTO(SeasonDTO dto,
                             @MappingTarget SeasonEntity entity);
}


