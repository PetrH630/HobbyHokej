Balíček (složka): exceptions
Cesta: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions

Seznam souborů:
AccountNotActivatedException.java
ApiError.java
BusinessException.java
CurrentPlayerNotSelectedException.java
DuplicateNameSurnameException.java
DuplicateRegistrationException.java
ForbiddenPlayerAccessException.java
InactivityPeriodNotFoundException.java
InactivityPeriodOverlapException.java
InvalidInactivityPeriodDateException.java
InvalidMatchStatusException.java
InvalidOldPasswordException.java
InvalidPlayerStatusException.java
InvalidSeasonPeriodDateException.java
InvalidSeasonStateException.java
MatchNotFoundException.java
MatchRegistrationNotFoundException.java
PasswordsDoNotMatchException.java
PlayerNotFoundException.java
RegistrationNotFoundException.java
SeasonNotFoundException.java
SeasonPeriodOverlapException.java
UserAlreadyExistsException.java
UserNotFoundException.java



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\AccountNotActivatedException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class AccountNotActivatedException extends BusinessException {

    public AccountNotActivatedException() {
        super("PrvnĂ­ musĂ­te aktivovat ĂşÄŤet pomocĂ­ odkazu v emailu", HttpStatus.FORBIDDEN); // 403
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\ApiError.java
-----

package cz.phsoft.hokej.exceptions;

import com.fasterxml.jackson.annotation.JsonFormat;
import java.time.LocalDateTime;
import java.util.Map;

/**
 * DTO reprezentujĂ­cĂ­ jednotnĂ˝ formĂˇt chybovĂ© odpovÄ›di backendu.
 * <p>
 * PouĹľĂ­vĂˇ se v {@link cz.phsoft.hokej.config.GlobalExceptionHandler} pro
 * serializaci vĂ˝jimek do JSON odpovÄ›di, kterou zpracovĂˇvĂˇ frontend.
 *
 * Struktura:
 * <ul>
 *     <li>{@code timestamp} â€“ ÄŤas vzniku chyby na serveru,</li>
 *     <li>{@code status} â€“ HTTP status kĂłd (napĹ™. 400, 403, 409, 500),</li>
 *     <li>{@code error} â€“ struÄŤnĂ˝ textovĂ˝ popis statusu (napĹ™. "Bad Request"),</li>
 *     <li>{@code message} â€“ detailnÄ›jĹˇĂ­ zprĂˇva (typicky z vĂ˝jimky),</li>
 *     <li>{@code path} â€“ URL, kde k chybÄ› doĹˇlo,</li>
 *     <li>{@code clientIp} â€“ IP adresa klienta, kterĂ˝ poĹľadavek poslal,</li>
 *     <li>{@code details} â€“ volitelnĂ© doplĹujĂ­cĂ­ informace (napĹ™. validaÄŤnĂ­ chyby).</li>
 * </ul>
 *
 * PĹ™Ă­klad JSON odpovÄ›di:
 * <pre>
 * {
 *   "timestamp": "2026-01-24 22:21:09",
 *   "status": 400,
 *   "error": "Bad Request",
 *   "message": "BE - Datum 'od' musĂ­ bĂ˝t pĹ™ed 'do'.",
 *   "path": "/api/inactivity/admin",
 *   "clientIp": "0:0:0:0:0:0:0:1",
 *   "details": {
 *     "field": "inactiveFrom",
 *     "reason": "must be before inactiveTo"
 *   }
 * }
 * </pre>
 */
public class ApiError {

    /**
     * Datum a ÄŤas vzniku chyby na serveru.
     * <p>
     * FormĂˇt {@code yyyy-MM-dd HH:mm:ss} usnadĹuje ÄŤitelnost v logu i ve FE.
     */
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private LocalDateTime timestamp;

    /**
     * HTTP status kĂłd (napĹ™. 400, 403, 404, 409, 500).
     */
    private int status;

    /**
     * StruÄŤnĂ˝ textovĂ˝ popis statusu (napĹ™. "Bad Request", "Forbidden", "Conflict").
     */
    private String error;

    /**
     * DetailnÄ›jĹˇĂ­ chybovĂˇ zprĂˇva â€“ typicky pochĂˇzĂ­ z {@link Exception#getMessage()}.
     * <p>
     * V domĂ©novĂ˝ch vĂ˝jimkĂˇch je zĂˇmÄ›rnÄ› formulovĂˇna tak,
     * aby byla pouĹľitelnĂˇ pĹ™Ă­mo pro uĹľivatele (pĹ™es FE).
     */
    private String message;

    /**
     * URL (path) poĹľadavku, ve kterĂ©m chyba vznikla (napĹ™. {@code /api/matches/1}).
     */
    private String path;

    /**
     * IP adresa klienta, kterĂ˝ poĹľadavek odeslal.
     * <p>
     * HodĂ­ se pro audit / diagnostiku (napĹ™. pĹ™i Ĺ™eĹˇenĂ­ problĂ©mĹŻ uĹľivatelĹŻ).
     */
    private String clientIp;

    /**
     * VolitelnĂˇ mapa s doplĹujĂ­cĂ­mi detaily o chybÄ›.
     * <p>
     * TypickĂ© pouĹľitĂ­:
     * <ul>
     *     <li>validaÄŤnĂ­ chyby formulĂˇĹ™e (field â†’ message),</li>
     *     <li>vĂ­ce chyb v jednom requestu (key â†’ popis problĂ©mu).</li>
     * </ul>
     * MĹŻĹľe bĂ˝t {@code null}.
     */
    private Map<String, String> details;

    /**
     * ZĂˇkladnĂ­ konstruktor pro chybovou odpovÄ›ÄŹ bez detailnĂ­ mapy.
     * <p>
     * {@code timestamp} se nastavuje automaticky na aktuĂˇlnĂ­ ÄŤas.
     */
    public ApiError(int status, String error, String message, String path,
                    String clientIp) {
        this.timestamp = LocalDateTime.now();
        this.status = status;
        this.error = error;
        this.message = message;
        this.path = path;
        this.clientIp = clientIp;
    }

    /**
     * RozĹˇĂ­Ĺ™enĂ˝ konstruktor umoĹľĹujĂ­cĂ­ doplnit i {@code details} mapu.
     */
    public ApiError(int status,
                    String error,
                    String message,
                    String path,
                    String clientIp,
                    Map<String, String> details) {
        this(status, error, message, path, clientIp);
        this.details = details;
    }

    // ======================
    // GETTERY
    // ======================

    public LocalDateTime getTimestamp() { return timestamp; }
    public int getStatus() { return status; }
    public String getError() { return error; }
    public String getMessage() { return message; }
    public String getPath() { return path; }
    public String getClientIp() { return clientIp; }
    public Map<String, String> getDetails() { return details; }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\BusinessException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class BusinessException extends RuntimeException {

    private final HttpStatus status;

    protected BusinessException(String message, HttpStatus status) {
        super(message);
        this.status = status;
    }

    public HttpStatus getStatus() {
        return status;
    }
}




-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\CurrentPlayerNotSelectedException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class CurrentPlayerNotSelectedException extends BusinessException {

    public CurrentPlayerNotSelectedException() {
        super("BE - NenĂ­ zvolen aktuĂˇlnĂ­ hrĂˇÄŤ.", HttpStatus.BAD_REQUEST);
        // alternativnÄ› by Ĺˇel i HttpStatus.CONFLICT, ale BAD_REQUEST dĂˇvĂˇ smysl:
        // klient volĂˇ endpoint, kterĂ˝ vyĹľaduje current player, ale ĹľĂˇdnĂ©ho nenastavil
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\DuplicateNameSurnameException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class DuplicateNameSurnameException extends BusinessException {
    public DuplicateNameSurnameException(String name, String surname) {
        super(
                "BE - HrĂˇÄŤ se jmĂ©nem " + name + " " + surname + " jiĹľ existuje.",
                HttpStatus.CONFLICT
        );
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\DuplicateRegistrationException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class DuplicateRegistrationException extends BusinessException {
    public DuplicateRegistrationException(Long matchId, Long playerId) {
        super("BE - HrĂˇÄŤ " + playerId + " jiĹľ mĂˇ aktivnĂ­ registraci na zĂˇpas " + matchId,
                HttpStatus.CONFLICT); // 409
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\ForbiddenPlayerAccessException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class ForbiddenPlayerAccessException extends BusinessException {

    public ForbiddenPlayerAccessException(Long playerId) {
        super("BE - HrĂˇÄŤ " + playerId + " nepatĹ™Ă­ pĹ™ihlĂˇĹˇenĂ©mu uĹľivateli.", HttpStatus.FORBIDDEN);
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InactivityPeriodNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InactivityPeriodNotFoundException extends BusinessException {
    public InactivityPeriodNotFoundException(Long id) {
        super("BE - ObdobĂ­ neaktivity s ID " + id + " neexistuje.", HttpStatus.NOT_FOUND);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InactivityPeriodOverlapException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InactivityPeriodOverlapException extends BusinessException {
    public InactivityPeriodOverlapException() {
        super("BE - NovĂ© obdobĂ­ se pĹ™ekrĂ˝vĂˇ s existujĂ­cĂ­m obdobĂ­m neaktivity hrĂˇÄŤe.", HttpStatus.CONFLICT);
    }
    public InactivityPeriodOverlapException(String message) {
        super(message, HttpStatus.CONFLICT);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InvalidInactivityPeriodDateException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InvalidInactivityPeriodDateException extends BusinessException {
    public InvalidInactivityPeriodDateException(String message) {
        super(message, HttpStatus.BAD_REQUEST);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InvalidMatchStatusException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InvalidMatchStatusException extends BusinessException {
    public InvalidMatchStatusException(Long id, String message) {
        super("BE - ZĂˇpas s id: " + id + message, HttpStatus.CONFLICT);
    }


}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InvalidOldPasswordException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InvalidOldPasswordException extends BusinessException {

    public InvalidOldPasswordException() {
        super("BE - StarĂ© heslo je nesprĂˇvnĂ©", HttpStatus.BAD_REQUEST);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InvalidPlayerStatusException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InvalidPlayerStatusException extends BusinessException {
    public InvalidPlayerStatusException(String message) {
        super(message, HttpStatus.BAD_REQUEST); // 400
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InvalidSeasonPeriodDateException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class InvalidSeasonPeriodDateException extends BusinessException {
    public InvalidSeasonPeriodDateException(String message){
        super(message, HttpStatus.BAD_REQUEST);
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\InvalidSeasonStateException.java
-----

package cz.phsoft.hokej.exceptions;

public class InvalidSeasonStateException extends RuntimeException {
    public InvalidSeasonStateException(String message) {
        super(message);
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\MatchNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class MatchNotFoundException extends BusinessException {
    public MatchNotFoundException(Long matchId) {
        super("BE - ZĂˇpas s ID " + matchId + " nenalezen.", HttpStatus.NOT_FOUND);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\MatchRegistrationNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class MatchRegistrationNotFoundException extends BusinessException {
    public MatchRegistrationNotFoundException(Long playerId, Long matchId) {
        super("BE - Registrace hrĂˇÄŤe s ID " + playerId + " na zĂˇpas s ID " + matchId + " nenalezena.", HttpStatus.NOT_FOUND);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\PasswordsDoNotMatchException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class PasswordsDoNotMatchException extends BusinessException {

    public PasswordsDoNotMatchException() {
        super("BE - Hesla se neshodujĂ­", HttpStatus.BAD_REQUEST);
    }

    public PasswordsDoNotMatchException(String message) {
        super(message, HttpStatus.BAD_REQUEST);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\PlayerNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class PlayerNotFoundException extends BusinessException {
    public PlayerNotFoundException(Long playerId) {
        super("BE - HrĂˇÄŤ s ID " + playerId + " nenalezen.", HttpStatus.NOT_FOUND);
    }

    public PlayerNotFoundException(String email) {
        super("BE - HrĂˇÄŤ s emailem " + email + " nenalezen.", HttpStatus.NOT_FOUND);
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\RegistrationNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class RegistrationNotFoundException extends BusinessException {
    public RegistrationNotFoundException(Long matchId, Long playerId) {
        super("BE - HrĂˇÄŤ " + playerId + " nemĂˇ registraci na zĂˇpas " + matchId,
                HttpStatus.NOT_FOUND);
    }
}


-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\SeasonNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class SeasonNotFoundException extends BusinessException {
    public SeasonNotFoundException() {
        super("BE - SezĂłna nebyla nalezena.", HttpStatus.CONFLICT);
    }

    public SeasonNotFoundException(String message) {
        super(message, HttpStatus.CONFLICT);
    }





}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\SeasonPeriodOverlapException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class SeasonPeriodOverlapException extends BusinessException {

       public SeasonPeriodOverlapException(String message) {
        super(message, HttpStatus.CONFLICT);
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\UserAlreadyExistsException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class UserAlreadyExistsException extends BusinessException {

    public UserAlreadyExistsException(String message) {
        super(message, HttpStatus.CONFLICT); // 409
    }
}



-----
# Soubor: C:\Projekty Práce\StaraGarda\backend\src\main\java\cz\phsoft\hokej\exceptions\UserNotFoundException.java
-----

package cz.phsoft.hokej.exceptions;

import org.springframework.http.HttpStatus;

public class UserNotFoundException extends BusinessException {

    public UserNotFoundException(String email) {
        super("BE - UĹľivatel s emailem " + email + " nenalezen.", HttpStatus.NOT_FOUND);
    }

    public UserNotFoundException(Long id) {
        super("BE - UĹľivatel s ID " + id + " nenalezen.", HttpStatus.NOT_FOUND);
    }
}


